[{"content":" âœï¸ ç·¨é›†\nè¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã€‚\nåŸºæœ¬çš„ã«æ¬¡ã®è¨˜äº‹ã®é€šã‚Šã«ã‚„ã‚Œã°è¡Œã‘ãŸã€‚\nRedashã®ãƒ‡ãƒ¼ã‚¿ã‚’Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«è‡ªå‹•ã§åæ˜ ã™ã‚‹æ–¹æ³• #redash - Qiita\nã“ã®è¨˜äº‹ã§ã¯ã€å®Ÿéš›ã«ã‚„ã£ã¦ã¤ã¾ã¥ã„ãŸã¨ã“ã‚ã‚’ãƒ¡ãƒ¢ã™ã‚‹ã€‚\nã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå´ã§å‹æ‰‹ã«æ•°å€¤ã¸å¤‰æ›ã•ã‚Œã¦ã—ã¾ã† ã‚«ãƒ©ãƒ ã®å€¤ãŒå…¨éƒ¨æ•°å€¤ã ã£ãŸã‚Š 12e9 ã®ã‚ˆã†ã«æŒ‡æ•°è¡¨è¨˜ã ã£ãŸã‚Šã™ã‚‹ã¨ã€ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆå´ã§å‹æ‰‹ã«æ•°å€¤å¤‰æ›ã•ã‚Œã¦ã—ã¾ã†ã€‚ãã®å ´åˆã¯ Redash å´ã§å…ˆé ­ã« ' ã‚’å…¥ã‚Œã‚‹ã¨è‰¯ã„ã€‚ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã§ã¯å…ˆé ­ã« ' ãŒå…¥ã£ãŸã‚»ãƒ«ã¯è‡ªå‹•å¤‰æ›ãŒèµ°ã‚‰ãšãã®ã¾ã¾æ–‡å­—åˆ—ã¨ã—ã¦æ‰±ã£ã¦ãã‚Œã‚‹ã€‚\nMySQLã®å ´åˆã¯æ¬¡ã®ã‚ˆã†ã« CONCAT ã—ã¦ã‚ã’ã‚Œã°è‰¯ã„ã€‚\n1 2 3 4 SELECT CONCAT(\u0026#39;\u0026#39;\u0026#39;\u0026#39;, col) AS col, FROM table ã¡ãªã¿ã«è¡¨ç¤ºå½¢å¼ã‚’ã€Œæ›¸å¼ãªã—ãƒ†ã‚­ã‚¹ãƒˆã€ã«ã™ã‚‹ã®ã¯æ„å‘³ãŒãªã‹ã£ãŸï¼ˆæ™®é€šã«æ•°å€¤ã¸å¤‰æ›ã•ã‚Œã¦ã—ã¾ã£ãŸï¼‰ã€‚\nã‚¯ã‚¨ãƒªã«å¤‰æ›´ã‚’åŠ ãˆãŸå ´åˆã®æ›´æ–°æ‰‹é † Redashå´ã§ save -\u0026gt; execute ã—ã¦ã€API keyã®URLã§å–ã£ã¦ã“ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’æ›´æ–° ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®IMPORTDATAé–¢æ•°ã‚’ä¸€åº¦æ¶ˆã—ã¦å†è¨­å®š ","date":"2025-07-07T03:31:49Z","permalink":"https://yamamoto-yuta.github.io/p/redash-to-spreadsheet/","title":"Redashâ†’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®è‡ªå‹•åæ˜ ã‚’ã‚„ã£ã¦ã¿ãŸãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã‚„ã‚ã†ã¨æ€ã£ãŸç†ç”± GitHub Copilotã§æ›¸ã‹ã›ãŸã‚¯ã‚¨ãƒªã‚’BQã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¸ã‚³ãƒ”ãƒšã™ã‚‹ã®ã‚‚é¢å€’ã«ãªã£ã¦ããŸãŸã‚ã€‚\nã‚„ã£ãŸæ–¹æ³• ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ 1 2 3 4 5 6 7 8 9 10 11 12 . |-- .vscode/ | |-- extensions.json | |-- settings.json | |-- queries/ | |-- \u0026lt;YOUR_PROJECT_DIR_1\u0026gt;/ | | |-- \u0026lt;YOUR_QUERY_1\u0026gt;.bqsql // BQã®ã‚¯ã‚¨ãƒªã¯æ‹¡å¼µå­ã‚’.bqsqlã«ã™ã‚‹ã“ã¨ | | |-- ... | | | |-- ... | extensions.json 1 2 3 4 5 6 { \u0026#34;recommendations\u0026#34;: [ \u0026#34;minodisk.bigquery-runner\u0026#34;, // BigQuery runner \u0026#34;shinichi-takii.sql-bigquery\u0026#34;, // SQL syntax highlighting ] } settings.json 1 2 3 4 5 6 7 8 9 10 11 12 13 14 { \u0026#34;bigqueryRunner.projectId\u0026#34;: \u0026#34;YOUR_PROJECT_ID_1\u0026#34;, // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è«‹æ±‚å…ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚ã‚¢ãƒ‰ãƒ›ãƒƒã‚¯ç”¨é€”ã§ã‚¹ãƒ­ãƒƒãƒˆã«ä¸Šé™ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãªã©ãŒã‚ã‚Œã°ãã‚Œã‚’è¨­å®šã™ã‚‹ã¨è‰¯ã„ \u0026#34;bigqueryRunner.tree.projectIds\u0026#34;: [ \u0026#34;YOUR_PROJECT_ID_2\u0026#34;, // ã‚ˆããƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¦‹ã«è¡Œããƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Œã°ã“ã“ã«è¿½åŠ ã—ã¦ãŠãã¨ã€VSCodeã‹ã‚‰ãƒ„ãƒªãƒ¼ã§è¦‹ã‚Œã¦ä¾¿åˆ© ... ], \u0026#34;[sql-bigquery]\u0026#34;: { \u0026#34;editor.tabSize\u0026#34;: 2 }, // ï¼ˆãŠå¥½ã¿ã§ï¼‰.bqsqlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¤ã‚³ãƒ³ã«ã™ã‚‹ \u0026#34;material-icon-theme.files.associations\u0026#34;: { \u0026#34;*.bqsql\u0026#34;: \u0026#34;database\u0026#34; } } ãã®ä»–ã€å·¥å¤«ç‚¹ãªã© linterã‚„formatterã¯ã‚ãˆã¦è¨­å®šã—ã¦ã„ãªã„ã€‚å½“åˆã¯è¨­å®šã—ã¦ã„ãŸãŒã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµæœãŒæ°—ã«å…¥ã‚‰ãªã„ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§â€¦ã€‚\nå®Ÿéš›ã‚„ã£ã¦ã¿ã¦ã®æ„Ÿæƒ³ ä¸€æ™‚ã‚¯ã‚¨ãƒªã‚’ä¿å­˜ã—ã¦ãŠã‘ã‚‹ãŸã‚ã€åˆ†ææ¥­å‹™ä¸­ã«åˆ¥ã®åˆ†ææ¥­å‹™ãŒå‰²ã‚Šè¾¼ã‚“ã§ããŸæ™‚ã®åˆ‡ã‚Šæ›¿ãˆã¨ä½œæ¥­å¾©å¸°ãŒã—ã‚„ã™ããªã£ãŸã€‚Webã®BQã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã ã¨ã‚¯ã‚¨ãƒªã‚’ä¿å­˜ã—ãªã„é™ã‚Šã¯é©å½“ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ¶ˆãˆã¦ã—ã¾ã£ã¦åˆ‡ã‚Šæ›¿ãˆãŒé¢å€’ã ã£ãŸã®ã§ã€ã“ã‚Œã¯ã‹ãªã‚ŠåŠ©ã‹ã£ã¦ã„ã‚‹ã€‚åŠ ãˆã¦ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã”ã¨ã«ãƒ•ã‚©ãƒ«ãƒ€ã‚’åˆ†ã‘ã¦ãŠã‘ã°ã€ä¸¦è¡Œã—ã¦ã„ã‚‹åˆ†ææ¥­å‹™ã®æ•°ãŒå¢—ãˆã¦ã‚‚åˆ‡ã‚Šæ›¿ãˆã‚„ã™ã„ã®ã§ã€ã“ã‚Œã‚‚åŠ©ã‹ã£ã¦ã„ã‚‹ï¼ˆãã‚‚ãã‚‚ä¸¦åˆ—æ•°ã‚’å¢—ã‚„ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ã®ãŒç†æƒ³ã ãŒâ€¦ï¼‰ã€‚\nãŸã ã€ã‚¯ã‚¨ãƒªçµæœã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«å‡ºåŠ›ã—ã¦ãƒ”ãƒœãƒƒãƒˆãƒ†ãƒ¼ãƒ–ãƒ«ãªã©ã§é›†è¨ˆã™ã‚‹ã“ã¨ãŒå¤šã‹ã£ãŸã®ã§ã€VSCodeä¸Šã ã¨ãã®æ“ä½œãŒã§ããªã„ã®ãŒå°‘ã—ä¸ä¾¿ã€‚ç¾çŠ¶ã¯Webã®BQã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰å€‹äººã®å®Ÿè¡Œå±¥æ­´ã‚’è¦‹ã«è¡Œãã“ã¨ã§ã‚«ãƒãƒ¼ã—ã¦ã„ã‚‹ã€‚ã¾ãæ¯å›ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®å‡ºåŠ›ã‚’è¡Œã£ã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªã„ã®ã§ã€æ„å¤–ã¨ãã“ã¾ã§ä¸ä¾¿ã•ã¯æ„Ÿã˜ã¦ã„ãªã„ï¼ˆã©ã£ã‹ã§è¦‹ã‚‹ã¹ãå®Ÿè¡Œå±¥æ­´ã‚’é–“é•ãˆã¦äº‹æ•…ã‚Šãã†ã€ã¨ã„ã†ã®ã¯ã‚ã‚‹ï¼‰ã€‚ã“ã®è¾ºã‚Šã¯è‡ªåŠ›ã§ãªã‚“ã¨ã‹ãªã‚Šãã†ã ã£ãŸã‚‰contributeã—ã¦ã¿ã‚ˆã†ã‹ãªâ€¦ã€‚\nå‚è€ƒ VSCode ï¼‹ BigQuery ï¼‹ SQLFluff ã®ç’°å¢ƒæ§‹ç¯‰ BigQuery Runner for VSCode ã®ç´¹ä»‹ VSCodeã§SQLãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹ãªã‚‰ã€ŒSQL Formatter VSCodeã€ã§æ±ºã¾ã‚Šï¼ #VSCode - Qiita ","date":"2024-12-29T04:49:32Z","permalink":"https://yamamoto-yuta.github.io/p/run-bq-with-vscode/","title":"VSCodeã§BigQueryå®Ÿè¡Œç’°å¢ƒã‚’æ•´ãˆã‚‹"},{"content":" âœï¸ ç·¨é›†\nã‚¿ã‚¤ãƒˆãƒ«ã®é€šã‚Šã€‚Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’GASã§ãã®ã¾ã¾æ“ä½œã—ã‚ˆã†ã¨ã™ã‚‹ã¨æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\næ¤œè¨¼ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ:\n1 2 3 4 5 6 7 8 9 const main = () =\u0026gt; { const spreadsheetId = \u0026#34;YOUR_SPREADSHEET_ID\u0026#34;; const spreadsheetFromSpreadsheet = SpreadsheetApp.openById(spreadsheetId); console.log(spreadsheetFromSpreadsheet.getName()); // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒå‡ºåŠ›ã•ã‚Œã‚‹ const xlsxId = \u0026#34;YOUR_XLSX_ID\u0026#34;; const spreadsheetFromXlsx = SpreadsheetApp.openById(xlsxId); console.log(spreadsheetFromXlsx.getName()); // Exception: Service Spreadsheets failed while accessing document with id 1RgRpia4esAR9xXsoxs5xDZRlySzvGpsW. }; ãã®ãŸã‚ã€Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚èª¿ã¹ã‚‹ã¨è‰²ã€…ãªæ–¹æ³•ãŒè¦‹ã¤ã‹ã‚‹ãŒã©ã‚Œã‚‚å¾®å¦™ã«ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã§ã€ç¾æ™‚ç‚¹ã§ã†ã¾ãã„ã£ãŸæ–¹æ³•ã‚’è¨˜è¼‰ã™ã‚‹ï¼ˆã“ã®æ–¹æ³•ã‚‚ãã®ã†ã¡ä½¿ãˆãªããªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒâ€¦ï¼‰ã€‚\nã€Œã‚µãƒ¼ãƒ“ã‚¹ã€ã‹ã‚‰Drive APIã‚’æœ‰åŠ¹ã«ã™ã‚‹ï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯ç¾æ™‚ç‚¹ã§ã®æœ€æ–°ç‰ˆã§ã‚ã‚‹v3ã‚’ä½¿ç”¨ã™ã‚‹ï¼‰ æ¬¡ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 const main = () =\u0026gt; { const parentFolderId = \u0026#34;YOUR_PARENT_FOLDER_ID\u0026#34;; const xlsxId = \u0026#34;YOUR_XLSX_ID\u0026#34;; const xlsxFile = DriveApp.getFileById(xlsxId); const options = { name: xlsxFile.getName(), mimeType: MimeType.GOOGLE_SHEETS, parents: [parentFolderId] }; const spreadsheetFromXlsx = Drive.Files.create( options, xlsxFile.getBlob(), {supportsAllDrives: true} // å…±æœ‰ãƒ‰ãƒ©ã‚¤ãƒ–å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã™ã‚‹å ´åˆã«å¿…è¦ ref: https://developers.google.com/drive/api/guides/enable-shareddrives?hl=ja ); console.log(spreadsheetFromXlsx.getName()); // ãƒ•ã‚¡ã‚¤ãƒ«åãŒè¡¨ç¤ºã•ã‚Œã‚‹ }; ","date":"2024-12-29T02:38:10Z","permalink":"https://yamamoto-yuta.github.io/p/convert-xlsx-to-spreadsheet-with-gas/","title":"Excelãƒ•ã‚¡ã‚¤ãƒ«ã‚’GASã§æ“ä½œã™ã‚‹å ´åˆã¯ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¸ã®å¤‰æ›ãŒå¿…è¦ï¼ˆ2024/12/29æ™‚ç‚¹ï¼‰"},{"content":" âœï¸ ç·¨é›†\nå‹•æ©Ÿ Gmailã«æœªèª­ãŒæºœã¾ã‚Šã¾ãã‚‹ã€‚ãªã‚“ã¨ã‹ã—ãŸã„ã€‚Slackãªã‚‰å¸¸ã«è¦‹ã¦ã‚‹ã‹ã‚‰ã“ã“ã«è»¢é€ã•ã›ã‚Œã°è§£æ¶ˆã§ãã‚‹ã®ã§ã¯ï¼Ÿ\næ–¹æ³• Gmailã§ãƒ©ãƒ™ãƒ«ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ Slack Appã‚’ä½œæˆã—ã€Bot Token Scopesã« chat:write ã‚’è¿½åŠ ã—ã¦ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ é€šçŸ¥å…ˆã®ãƒãƒ£ãƒ³ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸSlack Appã‚’æ‹›å¾…ã™ã‚‹ GASã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã« SLACK_BOT_USER_OAUTH_TOKEN ã‚’è¨­å®šã™ã‚‹ æ¬¡ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®šæœŸçš„ã«ï¼ˆè‡ªåˆ†ã¯10åˆ†ã«ã—ã¦ã„ã‚‹ï¼‰å®Ÿè¡Œã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼ã‚’è¨­å®šã™ã‚‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 const main = () =\u0026gt; { forwardGmailToSlack(\u0026#39;label:\u0026lt;YOUR_LABEL\u0026gt; is:unread \u0026#39;, \u0026#39;YOUR_CHANNEL_ID\u0026#39;); forwardGmailToSlack(\u0026#39;is:unread \u0026#39;, \u0026#39;OTHERS_CHANNEL_ID\u0026#39;); // å…ˆã«åˆ†é¡å¯èƒ½ãªæœªèª­ãƒ¡ãƒ¼ãƒ«ã‚’è»¢é€ã•ã›ã¦ã‹ã‚‰ã€æœ€å¾Œã«æ®‹ã£ãŸæœªèª­ã‚’è»¢é€ã•ã›ã‚‹ã“ã¨ }; const forwardGmailToSlack = (query, channel) =\u0026gt; { const threads = GmailApp.search(query); if (threads.length == 0) { Logger.log(`æ–°è¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãªã—: ${query}`); return } // Logger.log(threads.length); threads.forEach((thread) =\u0026gt; { const messages = thread.getMessages(); // Logger.log(messages.length); messages.forEach((message) =\u0026gt; { const from = message.getFrom(); const subject = message.getSubject(); const body = message.getPlainBody(); const mailId = message.getId(); const received_date = message.getDate(); const profileId = 0; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ const mailUrl = \u0026#39;https://mail.google.com/mail/u/\u0026#39;+ profileId + \u0026#39;/#inbox/\u0026#39; + mailId; try { // ä»¶åã‚’ãƒãƒ£ãƒ³ãƒãƒ«ã«æŠ•ç¨¿ const subjectMessage = `*ä»¶å*: ${subject}\\n*é€ä¿¡è€…*: ${from}\\n*å—ä¿¡æ—¥æ™‚*: ${formatDate(received_date)}\\n*ãƒ¡ãƒ¼ãƒ«URL*: ${mailUrl}`; const subjectResponse = postToSlack(channel, subjectMessage); const threadTs = subjectResponse.ts; // æŠ•ç¨¿ã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— // æœ¬æ–‡ã‚’ã‚¹ãƒ¬ãƒƒãƒ‰ã«æŠ•ç¨¿ const bodyMessage = `*æœ¬æ–‡*:\\n${body}`; postToSlack(channel, bodyMessage, threadTs); // ãƒ¡ãƒ¼ãƒ«ã‚’æ—¢èª­ã«å¤‰æ›´ message.markRead(); } catch (e) { Logger.log(`Slackã¸ã®é€ä¿¡ã‚¨ãƒ©ãƒ¼: ${e.message}`); } }); }); }; const postToSlack = (channel, text, threadTs = null) =\u0026gt; { const getSlackBotToken = () =\u0026gt; { const scriptProperties = PropertiesService.getScriptProperties(); const token = scriptProperties.getProperty(\u0026#39;SLACK_BOT_USER_OAUTH_TOKEN\u0026#39;); if (!token) { throw new Error(\u0026#39;ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã« SLACK_BOT_USER_OAUTH_TOKEN ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚\u0026#39;); } return token; }; const slackBotToken = getSlackBotToken(); const url = \u0026#39;https://slack.com/api/chat.postMessage\u0026#39;; const payload = { channel: channel, text: text, // æŠ•ç¨¿ã™ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ }; // ã‚¹ãƒ¬ãƒƒãƒ‰ã¸ã®æŠ•ç¨¿ if (threadTs) { payload.thread_ts = threadTs; } const options = { method: \u0026#39;post\u0026#39;, contentType: \u0026#39;application/json\u0026#39;, headers: { \u0026#39;Authorization\u0026#39;: `Bearer ${slackBotToken}`, }, payload: JSON.stringify(payload), }; const response = UrlFetchApp.fetch(url, options); const result = JSON.parse(response.getContentText()); if (!result.ok) { throw new Error(`SlackæŠ•ç¨¿ã‚¨ãƒ©ãƒ¼: ${channel} ${text} ${result.error}`); } return result; }; const formatDate = (date) =\u0026gt; { const year = date.getFullYear(); const month = (\u0026#39;0\u0026#39; + (date.getMonth() + 1)).slice(-2); // æœˆã‚’2æ¡ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ const day = (\u0026#39;0\u0026#39; + date.getDate()).slice(-2); // æ—¥ã‚’2æ¡ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ const hours = (\u0026#39;0\u0026#39; + date.getHours()).slice(-2); // æ™‚é–“ã‚’2æ¡ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ const minutes = (\u0026#39;0\u0026#39; + date.getMinutes()).slice(-2); // åˆ†ã‚’2æ¡ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ return `${year}/${month}/${day} ${hours}:${minutes}`; }; ã“ã‚“ãªæ„Ÿã˜ã§Slackã¸é€šçŸ¥ã•ã‚Œã‚‹ã€‚\nãƒãƒ£ãƒ³ãƒãƒ«:\nã‚¹ãƒ¬ãƒƒãƒ‰:\n","date":"2024-12-23T13:38:07Z","permalink":"https://yamamoto-yuta.github.io/p/gmail-to-slack-using-gas/","title":"GASã‚’ä½¿ã£ã¦ã€Gmailã«å±Šã„ãŸãƒ¡ãƒ¼ãƒ«ã‚’Slackã¸è»¢é€ã™ã‚‹"},{"content":" âœï¸ ç·¨é›†\nBigQueryã§ JSON_EXTRACT_ARRAY() ã‚’ä½¿ã£ã¦JSONã®é…åˆ—ã‚’å±•é–‹ã™ã‚‹éš›ã€å€¤ãŒç©ºé…åˆ—ã®è¡ŒãŒæ··ã˜ã£ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹ã€‚\n1 2 3 4 [ {\u0026#34;id\u0026#34;: 1, \u0026#34;items\u0026#34;: [10, 20, 30]}, {\u0026#34;id\u0026#34;: 2, \u0026#34;items\u0026#34;: []} ] ã“ã‚Œã‚’ç„¡é‚ªæ°—ã« JSON_EXTRACT_ARRAY() ã™ã‚‹ã¨ã€ç©ºé…åˆ—ã®è¡ŒãŒå­˜åœ¨ã—ãªã„ã“ã¨ã«ãªã£ã¦ã—ã¾ã†ã€‚\nã‚¯ã‚¨ãƒª:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 WITH sample_data AS ( SELECT \u0026#39;{\u0026#34;id\u0026#34;: 1, \u0026#34;items\u0026#34;: [10, 20, 30]}\u0026#39; AS item_json UNION ALL SELECT \u0026#39;{\u0026#34;id\u0026#34;: 2, \u0026#34;items\u0026#34;: []}\u0026#39; ), final AS ( SELECT JSON_EXTRACT_SCALAR(item_json, \u0026#34;$.id\u0026#34;) AS id, item FROM sample_data, UNNEST(JSON_EXTRACT_ARRAY(item_json, \u0026#39;$.items\u0026#39;)) AS item ) SELECT * FROM final å®Ÿè¡Œçµæœ:\n1 2 3 4 id\titem 1\t10 1\t20 1\t30 ChatGPT (chatgpt-4o-latest) ã«è¨Šã„ã¦ã¿ãŸã¨ã“ã‚ã€è¦ç´ æ•°ãŒ0ã‹ã©ã†ã‹ã§å‡¦ç†ã‚’åˆ†ã‘ã‚‹ã¨ã„ã†è§£æ±ºç­–ã‚’æ•™ãˆã¦ãã‚ŒãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 WITH sample_data AS ( SELECT \u0026#39;{\u0026#34;id\u0026#34;: 1, \u0026#34;items\u0026#34;: [10, 20, 30]}\u0026#39; AS item_json UNION ALL SELECT \u0026#39;{\u0026#34;id\u0026#34;: 2, \u0026#34;items\u0026#34;: []}\u0026#39; ), final AS ( -- ã‚µãƒ–ã‚¯ã‚¨ãƒªã¯ä½¿ã‚ãªã„æ–¹ãŒè‰¯ã„ãŒã€ã“ã“ã¾ã§ä¸€æ°—ã«ã‚„ã‚‰ãªã„ã¨ä¸‹è¨˜ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã†ãŸã‚ä¾‹å¤–çš„ã«ä½¿ã£ã¦ã„ã‚‹ -- ã‚¨ãƒ©ãƒ¼æ–‡: Array cannot have a null element; error in writing field item_array SELECT id, IFNULL(item, NULL) AS item FROM ( SELECT JSON_EXTRACT_SCALAR(item_json, \u0026#34;$.id\u0026#34;) AS id, CASE WHEN ARRAY_LENGTH(JSON_EXTRACT_ARRAY(item_json, \u0026#39;$.items\u0026#39;)) = 0 THEN ARRAY\u0026lt;STRING\u0026gt;[NULL] ELSE JSON_EXTRACT_ARRAY(item_json, \u0026#39;$.items\u0026#39;) END AS item_array FROM sample_data ), UNNEST(item_array) AS item ) SELECT * FROM final çµæœ:\n1 2 3 4 5 id\titem 1\t10 1\t20 1\t30 2\tArray cannot have a null element ãªã®ã«å¾Œç¶šå‡¦ç†ã¾ã§ä¸€æ°—ã«ã‚„ã£ãŸã‚‰å‹•ãã®ã¯ä¸æ€è­°ãªæŒ™å‹•ã â€¦ï¼ˆBigQueryå†…éƒ¨ã®ã‚¯ã‚¨ãƒªæœ€é©åŒ–ã®éƒ½åˆã ã¨ã¯æ€ã†ãŒâ€¦ï¼‰ã€‚\n","date":"2024-11-01T15:02:19Z","permalink":"https://yamamoto-yuta.github.io/p/handling-empty-array-in-json-extract-array/","title":"å€¤ãŒç©ºé…åˆ—ã®å ´åˆã‚’è€ƒæ…®ã—ãŸJSON_EXTRACT_ARRAY"},{"content":" âœï¸ ç·¨é›†\nMeta Queset3 ã‚’è²·ã£ãŸã®ã§ Immsersed ã‚’ä½¿ã£ã¦ä½œæ¥­ç’°å¢ƒã‚’ä½œã‚Œãªã„ã‹è©¦ã—ã¦ã¿ãŸã€‚ãã®æ™‚ã®ä½œæ¥­ãƒ­ã‚°ã‚’ã“ã“ã¸æ®‹ã™ã€‚\næ¥ç¶š æ¥ç¶šã¯æœ‰ç·šæ¨å¥¨ã€‚ç„¡ç·šã ã¨ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã®ç§»å‹•ãŒå°‘ã—ãƒ©ã‚°ã„ã€‚é ‘å¼µã‚Œã°è¡Œã‘ãªãã‚‚ãªã„ãŒã€ä½œæ¥­ç’°å¢ƒã¨ã—ã¦ä½¿ã†ã«ã¯å¦¥å”ã§ããªã„é…å»¶å…·åˆ æœ‰ç·šæ¥ç¶šã¯çµæ§‹ãªé »åº¦ã§ã†ã¾ãã„ã‹ãªã„ã“ã¨ãŒã‚ã‚‹ã®ã§ã€Meta Quest3ã®å†èµ·å‹•ã§æš«å®šå¯¾å¿œã—ã¦ã„ã‚‹ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ è¨­å®š ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è¨­å®š ã‚¹ãƒŠãƒƒãƒ—ã‚°ãƒªãƒƒãƒ‰: ON OFFã ã¨ã‚¹ã‚¯ãƒªãƒ¼ãƒ³é…ç½®ã‚’è‡ªåŠ›ã§å¾®èª¿æ•´ã—ãªã„ã¨ã„ã‘ãªã„ï¼†è‡ªåŠ›èª¿æ•´ã¯è¾›ã™ãã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§â€¦ VRãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«: OFF ONã ã¨ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ™‚ã®ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ãŒé»’ä¸€è‰²ã«ãªã‚Šã€ã©ã“ã«ã„ã‚‹ã®ã‹ã‚ã‹ã‚‰ãªããªã£ã¦åœ°å‘³ã«ä¸ä¾¿ã ã£ãŸã®ã§ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®è§’ã§ãƒªã‚µã‚¤ã‚º: ON æ–‡å­—é€šã‚Šã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®è§’ã§ãƒªã‚µã‚¤ã‚ºã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚¹ãƒãƒ›ã®ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ç”»é¢ã¯ãƒªã‚µã‚¤ã‚ºå¿…é ˆãªã®ã§é‡å®ã™ã‚‹ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã®è§£åƒåº¦ åŸºæœ¬ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å¤§ä¸ˆå¤«ãªã¯ãš ä¸‹æ‰‹ã«é«˜è§£åƒåº¦ã«ä¸Šã’ã‚‹ã¨ImmersedãŒå›ºã¾ã‚‹ã®ã§ã€1920x1080ã‚ãŸã‚Šã‚’ä¸Šé™ã«è¨­å®šã™ã‚‹ã®ãŒè‰¯ã•ãã† ãã®ãŸã‚ã€ç‰©ç†ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã§æ‹¡å¤§ç‡ã‚„æ–‡å­—ã‚µã‚¤ã‚ºã‚’80%ãã‚‰ã„ã«ã—ã¦ã„ã‚‹å ´åˆã¯90%ãã‚‰ã„ã¾ã§ä¸Šã’ã‚‹ã¨è‰¯ã„ï¼ˆåŒã˜ã‚µã‚¤ã‚ºæ„Ÿã§ã¯å³ã—ã„ï¼‰ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³é…ç½® ã‚¹ãƒŠãƒƒãƒ—ã‚°ãƒªãƒƒãƒ‰ã‚’ONã«ã—ã¦ã„ã‚‹å ´åˆã¯ã€è·é›¢ã¨è§’åº¦ãŒèª¿æ•´ã§ãã‚‹ã€‚é…ç½®ã¯ä¸Šä¸‹å·¦å³å›ºå®šã€‚ è‡ªåˆ†çš„ã«ã¯æ¬¡ã®è¨­å®šãŒã—ã£ãã‚ŠããŸ: å¹³é¢ã§è§’åº¦MAX ã“ã‚ŒãŒä¸€ç•ªé¦–æŒ¯ã‚Šè§’åº¦ãŒå°‘ãªãã¦ç–²ã‚Œã«ãã„æ„Ÿã˜ãŒã—ãŸã®ã§â€¦ ãã®ä»– ä¸¡æ‰‹ã®è¦ªæŒ‡ã¨è–¬æŒ‡ã‚’æ•°ç§’ãã£ã¤ã‘ã‚‹ã¨ãƒãƒ³ãƒ‰ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã‚’OFFã«ã§ãã‚‹ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚„ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã®æ“ä½œã§å‰²ã¨èª¤åå¿œã™ã‚‹ã®ã§ã€OFFã«ã—ã¦ãŠãã®ãŒè‰¯ã„ ã‚¹ãƒãƒ›ç‰ˆImmersedã‚’å…¥ã‚Œã‚‹ã“ã¨ã§ãƒŸãƒ©ãƒ¼ãƒªãƒ³ã‚°ãŒã§ãã‚‹ ç”»è³ªã¯è‰¯ã„ ç”»é¢ã‚„éŸ³å£°ãŒã—ã‚‡ã£ã¡ã‚…ã†å›ºã¾ã‚‹â€¦ãŠãã‚‰ãå›ç·šãŒæ‚ªã„ã›ã„â€¦ æ“ä½œã¯ã‚¹ãƒãƒ›ã§è¡Œã†å¿…è¦ãŒã‚ã‚‹ ãªã®ã§ã€‚ã‚²ãƒ¼ãƒ ã«ã¯å‘ã‹ãªã„ã€‚æ¼«ç”»ã¨ã‹èª­ã‚€ã®ã«ä½¿ã†ã®ãŒè‰¯ã•ãã†ï¼Ÿ å‚è€ƒ ã€immersed åŸºæœ¬çš„ãªä½¿ã„æ–¹ã€‘ç„¡æ–™ï¼æ—¥æœ¬èªå¯¾å¿œï¼VRãƒ»MRã§æœ€å¤§5ç”»é¢ã‚’ç©ºé–“é…ç½®ã—ã€å‹•ç”»ç·¨é›†ãŒã§ãã‚‹!! Meta Quest2ã€Quest3 ã€Quest proã€Pico4ä»–å¯¾å¿œ ","date":"2024-09-29T07:10:52Z","permalink":"https://yamamoto-yuta.github.io/p/meta-quest3-immsered-config-memo/","title":"Meta Queset3 + Immersed è¨­å®šãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nä»Šå›ã€è‡ªåˆ†ã® github.io ã‚’ Hugo ã«ä¹—ã‚Šæ›ãˆãŸã€‚ãƒ†ãƒ¼ãƒã¯ Stack ã‚’é¸ã‚“ã ã€‚ã“ã®è¨˜äº‹ã§ã¯å°å…¥æ™‚ã®ãƒ¡ãƒ¢ã‚’æ®‹ã™ã€‚\nãªãŠã€æ¬¡ã®è¨˜äº‹ãŒå¤§å¤‰å‚è€ƒã«ãªã£ãŸã€‚\nHugo ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« ãƒ­ãƒ¼ã‚«ãƒ«ã‚’æ±šã—ãŸããªã‹ã£ãŸã®ã§ Docker ã§ç’°å¢ƒæ§‹ç¯‰ã‚’è¡Œã†ã“ã¨ã«ã—ãŸã€‚\napt install ã§å…¥ã‚‹ãŒã€ãã®ã¾ã¾ã ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã‹ã£ãŸã®ã§ã€GitHub ã‹ã‚‰æœ€æ–°ç‰ˆã‚’å–å¾—ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã€‚\nDockerfile 1 2 3 4 5 6 7 8 9 10 FROM ubuntu:latest RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \\ \u0026amp;\u0026amp; apt-get install -y \\ git \\ curl RUN curl -L -o hugo_extended.deb https://github.com/gohugoio/hugo/releases/download/v0.129.0/hugo_extended_0.129.0_linux-arm64.deb \\ \u0026amp;\u0026amp; apt-get install -y ./hugo_extended.deb \\ \u0026amp;\u0026amp; rm hugo_extended.deb docker-compose.yml 1 2 3 4 5 6 7 8 9 10 11 12 services: site: build: . image: hugo env_file: - ./.env volumes: - .:/$WORKING_DIR working_dir: /$WORKING_DIR ports: - \u0026#34;1313:1313\u0026#34; tty: true å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: Linux | Hugo\nHugo ã®åˆå›ã‚»ãƒƒãƒˆã¨ã‚¢ãƒƒãƒ— åŸºæœ¬çš„ã«ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® Quickstart ã®é€šã‚Šã«é€²ã‚ãŸã€‚\nã‚µã‚¤ãƒˆåã¯ blog ã«è¨­å®šã€‚\n1 hugo site new blog Stack ãƒ†ãƒ¼ãƒã‚’ submodule ã¨ã—ã¦è¿½åŠ ã€‚\n1 2 cd blog/ git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack ä»¥å¾Œã€Dockerfile ç­‰ã¯ blog/ ã«ã‚ã£ãŸã»ã†ãŒéƒ½åˆãŒè‰¯ã„ã®ã§ç§»å‹•ã€‚\n1 2 3 4 5 6 7 cd .. mv \\ .env \\ docker-compose.yml \\ Dockerfile \\ Makefile \\ blog/ Stack ãƒ†ãƒ¼ãƒã¯ã‚µãƒ³ãƒ—ãƒ«ã‚’ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ä½œæˆã€‚\n1 2 3 4 5 cp -r \\ blog/themes/hugo-theme-stack/exampleSite/hugo.yaml \\ blog/themes/hugo-theme-stack/exampleSite/content \\ blog/themes/hugo-theme-stack/archetypes \\ blog/ å…ƒã€…ã‚ã£ãŸ hugo.toml ã¯å…ˆã»ã©ã‚³ãƒ”ãƒ¼ã—ãŸhugo.yamlã«ç½®ãæ›ã‚ã£ã¦ä¸è¦ã«ãªã£ãŸã®ã§å‰Šé™¤ã€‚\n1 rm blog/hugo.toml å‚è€ƒ:\nQuick start | Hugo Getting Started | Stack éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®åˆå¿ƒè€…ãŒ Hugo(ãƒ†ãƒ¼ãƒ Stack)+GitHub Pages ã§ãƒ–ãƒ­ã‚°ã‚’é–‹è¨­ã™ã‚‹ã¾ã§ ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ç¢ºèª ã“ã“ã¾ã§ã§ä¸€æ—¦ Hugo+Stack ãƒ†ãƒ¼ãƒã®å°å…¥ã¯å®Œäº†ã—ãŸã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ä½œç¢ºèªã‚’è¡Œã£ãŸã€‚ã‚³ãƒãƒ³ãƒ‰ã¯ Makefile ã«ã¾ã¨ã‚ãŸã€‚Docker ç’°å¢ƒã ã¨hugo server æ™‚ã« --bind 0.0.0.0 ã‚’ä»˜ã‘ãªã„ã¨è¡¨ç¤ºã•ã‚Œãªã„ã®ã§æ³¨æ„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .PHONY: new-content new-content: @echo \u0026#39;Enter article title (e.g. \u0026#34;my-new-article\u0026#34;):\u0026#39; @read TITLE; docker compose run --rm site hugo new content content/post/$$TITLE/index.md .PHONY: server server: docker compose run --rm --service-ports site hugo server --bind 0.0.0.0 --buildDrafts .PHONY: server-prod server-prod: docker compose run --rm --service-ports site hugo server --bind 0.0.0.0 .PHONY: build build: docker compose run --rm site hugo --minify hugo.yaml ã®å¾®èª¿æ•´ æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nå‚è€ƒ:\néã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®åˆå¿ƒè€…ãŒ Hugo(ãƒ†ãƒ¼ãƒ Stack)+GitHub Pages ã§ãƒ–ãƒ­ã‚°ã‚’é–‹è¨­ã™ã‚‹ã¾ã§ miiitomi.github.io/config.yaml at main Â· miiitomi/miiitomi.github.io æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã®å¤‰æ›´ æ¼¢å­—ãŒä¸­å›½èªãƒ•ã‚©ãƒ³ãƒˆã«ãªã£ã¦ã„ãŸã®ã§æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã«å¤‰æ›´ã—ãŸã€‚å¤‰æ›´æ–¹æ³•ã¯layouts/partials/head/custom.htmlã‚’æ¬¡ã®å†…å®¹ã§ä½œæˆã™ã‚‹ã“ã¨ã§è¡Œã£ãŸã€‚\nlayouts/partials/head/custom.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 \u0026lt;style\u0026gt; /* Overwrite CSS variable */ :root { --ja-font-family: \u0026#34;æ¸¸ã‚´ã‚·ãƒƒã‚¯ä½“\u0026#34;, \u0026#34;Yu Gothic\u0026#34;, YuGothic, \u0026#34;ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro\u0026#34;, \u0026#34;Hiragino Kaku Gothic Pro\u0026#34;, \u0026#34;ãƒ¡ã‚¤ãƒªã‚ª\u0026#34;, \u0026#34;Meiryo\u0026#34;; --base-font-family: \u0026#34;Lato\u0026#34;, var(--sys-font-family), var(--ja-font-family), sans-serif; } \u0026lt;/style\u0026gt; \u0026lt;script\u0026gt; (function () { const customFont = document.createElement(\u0026#34;link\u0026#34;); customFont.href = \u0026#34;https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700\u0026amp;display=swap\u0026#34;; customFont.type = \u0026#34;text/css\u0026#34;; customFont.rel = \u0026#34;stylesheet\u0026#34;; document.head.appendChild(customFont); })(); \u0026lt;/script\u0026gt; å‚è€ƒ:\nCustom Header / Footer | Stack éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®åˆå¿ƒè€…ãŒ Hugo(ãƒ†ãƒ¼ãƒ Stack)+GitHub Pages ã§ãƒ–ãƒ­ã‚°ã‚’é–‹è¨­ã™ã‚‹ã¾ã§ ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¤ã‚³ãƒ³ã®è¿½åŠ  å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: Custom Menu | Stack\nåŸ‹ã‚è¾¼ã¿ãƒªãƒ³ã‚¯ã®å¯¾å¿œï¼ˆæ–­å¿µï¼‰ Hugo ã® Shortcodes ã‚’ä½¿ã£ã¦ã¯ã¦ãªãƒ–ãƒ­ã‚°ã‚„ Qiita ã®ã‚ˆã†ã«ç°¡å˜ã«åŸ‹ã‚è¾¼ã¿ãƒªãƒ³ã‚¯ã‚’å®Ÿç¾ã—ãŸã‹ã£ãŸãŒã€æƒ³åƒä»¥ä¸Šã«å·¥æ•°ã‹ã‹ã‚Šãã†ã ã£ãŸã®ã§ã®ã§ä¸€æ—¦ iframely ã§ç”Ÿæˆã—ãŸ DIV ã‚¿ã‚°ã‚’ãã®ã¾ã¾è²¼ã‚Šä»˜ã‘ã‚‹ã“ã¨ã«ã—ãŸã€‚\nå‚è€ƒ:\nè‡ªã‚µãƒ¼ãƒ“ã‚¹ã«åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰å¯¾å¿œã‚’ã™ã‚‹æ–¹æ³• #oEmbed - Qiita ãƒ‡ãƒ—ãƒ­ã‚¤ GitHub Actions ã‚’ä½¿ã£ã¦ GitHub Pages ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ãŸã€‚ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚ã‚³ãƒ¡ãƒ³ãƒˆã®ã‚ã‚‹ç®‡æ‰€ãŒæ³¨æ„ç‚¹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 name: Deploy Hugo site to GitHub Pages on: push: branches: - main workflow_dispatch: jobs: deploy: runs-on: ubuntu-latest permissions: contents: write # Required for deploying to GitHub Pages steps: - name: Checkout repository uses: actions/checkout@v4 with: submodules: true # Fetch Hugo themes - name: Setup Hugo uses: peaceiris/actions-hugo@v3 with: hugo-version: \u0026#34;latest\u0026#34; extended: true # Use Hugo extended version - name: Build Hugo site run: hugo --minify - name: Deploy to GitHub Pages uses: peaceiris/actions-gh-pages@v4 with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_branch: gh-pages publish_dir: ./public å‚è€ƒ:\npeaceiris/actions-gh-pages: GitHub Actions for GitHub Pages ğŸš€ Deploy static files and publish your site easily. Static-Site-Generators-friendly. ","date":"2024-07-28T06:27:45Z","permalink":"https://yamamoto-yuta.github.io/p/hugo-stack-theme-installation-notes/","title":"Hugo+Stackãƒ†ãƒ¼ãƒã®å°å…¥ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã“ã®å‰ã€ BigQuery ã§ LEFT JOIN ã™ã‚‹ã‚¯ã‚¨ãƒªã‚’æ›¸ã„ã¦ã„ãŸæ™‚ã«å°‘ã—ã¤ã¾ã¥ã„ãŸã®ã§ã€ãã®æ™‚ã®èª¿æŸ»çµæœã‚’å‚™å¿˜éŒ²ã¨ã—ã¦æ®‹ã™ï¼ˆãŠãã‚‰ã BigQuery ã«é™ã‚‰ãš SQL å…¨èˆ¬ã®è©±ã ã¨æ€ã†ã®ã§ã€è¨˜äº‹ã‚¿ã‚¤ãƒˆãƒ«ã¯ã€ŒSQL ã®ã€ã¨ã—ã¦ã„ã‚‹ï¼‰ã€‚\nå‰æ: å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ æ¬¡ã®ã‚ˆã†ãª 3 ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è€ƒãˆã‚‹ã€‚\nLEFT JOIN ã—ã¦ã¿ã‚‹ â‘  ã“ã® 3 ã¤ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ JOIN ã—ã¦ã€ (item_key, item_code, shop_id) ã®çµ„ã¿åˆã‚ã›ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œã‚‹ã“ã¨ã‚’è€ƒãˆã‚‹ã€‚\nä»Šå›ã¯æ¬¡ã® 3 ãƒ‘ã‚¿ãƒ¼ãƒ³ã® LEFT JOIN ã§å®Ÿç¾ã—ã¦ã¿ã‚‹ã€‚\næ¬¡ã®é †ã§ LEFT JOIN ã™ã‚‹: ItemShops â†’ Shops æ¬¡ã®é †ã§ LEFT JOIN ã™ã‚‹: Items â†’ ItemShops â†’ Shops æ¬¡ã®é †ã§ LEFT JOIN ã™ã‚‹: ItemShops â†’ Shops â†’ Items ãƒ‘ã‚¿ãƒ¼ãƒ³ 1: ItemShops â†’ Shops ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code UNION ALL SELECT \u0026#39;yyy\u0026#39;, \u0026#39;bbb\u0026#39; ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT C.item_key, B.item_code, B.shop_id FROM ItemShops B LEFT JOIN Shops C USING(shop_id) çµæœ:\n(item_key, item_code) ã®çµ„ã¿åˆã‚ã›ãŒãŠã‹ã—ã„è¡ŒãŒå‡ºã¦ã—ã¾ã†ãŸã‚ã€ã“ã® JOIN æ–¹æ³•ã§ã¯å®Ÿç¾ã§ããªã„ã€‚\nãƒ‘ã‚¿ãƒ¼ãƒ³ 2: Items â†’ ItemShops â†’ Shops ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code UNION ALL SELECT \u0026#39;yyy\u0026#39;, \u0026#39;bbb\u0026#39; ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT A.item_key AS A_item_key, C.item_key AS C_item_key, B.item_code, B.shop_id, FROM Items A LEFT JOIN ItemShops B USING(item_code) LEFT JOIN Shops C USING(shop_id) çµæœ:\nA_item_key ï¼ˆï¼ Items.item_key ï¼‰ã‚’æ¡ç”¨ã—ãªã„ã¨å¯¾å¿œãŒãŠã‹ã—ããªã‚‹ã€‚\nãƒ‘ã‚¿ãƒ¼ãƒ³ 3: ItemShops â†’ Shops â†’ Items ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code UNION ALL SELECT \u0026#39;yyy\u0026#39;, \u0026#39;bbb\u0026#39; ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT A.item_key AS A_item_key, C.item_key AS C_item_key, B.item_code, B.shop_id, FROM ItemShops B LEFT JOIN Shops C USING(shop_id) LEFT JOIN Items A USING(item_code) çµæœ:\nãƒ‘ã‚¿ãƒ¼ãƒ³ 2 ã¨åŒã˜ã€‚\nLEFT JOIN ã—ã¦ã¿ã‚‹ â‘¡ ä½•ã‚‰ã‹ã®ç†ç”±ã§ Items ãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã—ãªã„ item_key ãŒ Shops ãƒ†ãƒ¼ãƒ–ãƒ«ã«çµ„ã¾ã‚Œã¦ã„ã‚‹çŠ¶æ³ã‚’è€ƒãˆã‚‹ã€‚\nShops.item_key = \u0026quot;yyy\u0026quot; ã¯ Items ãƒ†ãƒ¼ãƒ–ãƒ«ã«å­˜åœ¨ã—ãªã„ã€‚\nã“ã®çŠ¶æ³ã§ã€å…ˆã»ã©ã¨åŒã˜ 3 ãƒ‘ã‚¿ãƒ¼ãƒ³ã® LEFT JOIN ã‚’è¡Œã£ã¦ã¿ã‚‹ã€‚\nãƒ‘ã‚¿ãƒ¼ãƒ³ 1: ItemShops â†’ Shops ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT C.item_key, B.item_code, B.shop_id FROM ItemShops B LEFT JOIN Shops C USING(shop_id) çµæœ:\nå­˜åœ¨ã—ãªã„ã¯ãšã® item_key = \u0026quot;yyy\u0026quot; ã®è¡ŒãŒæ®‹ã£ã¦ã„ãŸã‚Šã€ (item_key, item_code) ã®çµ„ã¿åˆã‚ã›ãŒãŠã‹ã—ã„è¡ŒãŒå­˜åœ¨ã—ã¦ã„ãŸã‚Šã—ã¦ãŠã‚Šã€é©åˆ‡ãª JOIN æ–¹æ³•ã§ã¯ãªã„ã“ã¨ãŒã‚ã‹ã‚‹ã€‚\nãƒ‘ã‚¿ãƒ¼ãƒ³ 2: Items â†’ ItemShops â†’ Shops ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT A.item_key AS A_item_key, C.item_key AS C_item_key, B.item_code, B.shop_id, FROM Items A LEFT JOIN ItemShops B USING(item_code) LEFT JOIN Shops C USING(shop_id) çµæœ:\nA_item_key ï¼ˆï¼ Items.item_key ï¼‰ã®æ–¹ã‚’æ¡ç”¨ã™ã‚Œã°ã€ã“ã® JOIN æ–¹æ³•ã§ OK ã€‚\nãƒ‘ã‚¿ãƒ¼ãƒ³ 3: ItemShops â†’ Shops â†’ Items ã‚¯ã‚¨ãƒª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 WITH Items AS ( SELECT \u0026#39;xxx\u0026#39; AS item_key, \u0026#39;aaa\u0026#39; AS item_code ), ItemShops AS ( SELECT \u0026#39;aaa\u0026#39; AS item_code, 1 AS shop_id UNION ALL SELECT \u0026#39;aaa\u0026#39;, 2 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 1 UNION ALL SELECT \u0026#39;bbb\u0026#39;, 2 ), Shops AS ( SELECT 1 AS shop_id, \u0026#39;xxx\u0026#39; AS item_key UNION ALL SELECT 2, \u0026#39;yyy\u0026#39; ) SELECT A.item_key AS A_item_key, C.item_key AS C_item_key, B.item_code, B.shop_id, FROM ItemShops B LEFT JOIN Shops C USING(shop_id) LEFT JOIN Items A USING(item_code) çµæœ:\n2 è¡Œç›®ã«ã¤ã„ã¦ã¯ A_item_key ï¼ˆï¼ Items.item_key ï¼‰ã®æ–¹ã‚’æ¡ç”¨ã—ãªã„ã¨ (item_key, item_code) ã®çµ„ã¿åˆã‚ã›ãŒãŠã‹ã—ããªã‚‹ãŒã€ 3~4 è¡Œç›®ã« A_item_key IS NULL ã®è¡ŒãŒã§ãã¦ã—ã¾ã£ã¦ã„ã‚‹ã€‚\nã—ãŸãŒã£ã¦ã€ã“ã® JOIN æ–¹æ³•ã¯é©åˆ‡ã§ã¯ãªã„ã€‚\næŒ™å‹•ã®ç†è§£ ä¸Šè¨˜æŒ™å‹•ã«ã¤ã„ã¦ã®å€‹äººçš„ãªç†è§£ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nLEFT JOIN ã—ã¦ã¿ã‚‹ â‘  ãƒ‘ã‚¿ãƒ¼ãƒ³ 1: ItemShops â†’ Shops\nãƒ‘ã‚¿ãƒ¼ãƒ³ 2: Items â†’ ItemShops â†’ Shops\nãƒ‘ã‚¿ãƒ¼ãƒ³ 3: ItemShops â†’ Shops â†’ Items\nLEFT JOIN ã—ã¦ã¿ã‚‹ â‘¡ ãƒ‘ã‚¿ãƒ¼ãƒ³ 1: ItemShops â†’ Shops\nã€ŒLEFT JOIN ã—ã¦ã¿ã‚‹ â‘ ã€ã¨åŒã˜\nãƒ‘ã‚¿ãƒ¼ãƒ³ 2: Items â†’ ItemShops â†’ Shops\nãƒ‘ã‚¿ãƒ¼ãƒ³ 3: ItemShops â†’ Shops â†’ Items\næ‰€æ„Ÿ LEFT JOIN ã™ã‚‹ã¨ãã¯ JOIN é †ã«æ°—ã‚’ã¤ã‘ã‚ˆã†ï¼ˆãã‚Œã¯ãã†ï¼‰\n","date":"2024-05-12T17:15:00Z","permalink":"https://yamamoto-yuta.github.io/p/sql-left-join-behavior-investigation-memo/","title":"SQL ã® LEFT JOIN ã®æŒ™å‹•ã«ã¤ã„ã¦ã®èª¿æŸ»ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nClasp ç’°å¢ƒã‹ã‚‰ Slack API ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€å—ä¿¡ã‚’è¡Œã£ã¦ã¿ãŸã®ã§ã€ãã®æ™‚ã®ãƒ¡ãƒ¢ã‚’æ®‹ã™ã€‚\nClasp ç’°å¢ƒã¯éå»è¨˜äº‹ã®ç’°å¢ƒã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€‚\nDocker ã§ clasp ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ | yamamoto-yuta.github.io\nSlack App ã®ä½œæˆ https://api.slack.com/apps ã‹ã‚‰ Slack App ã‚’ä½œæˆã™ã‚‹ã€\nOAuth \u0026amp; Permissions ã‹ã‚‰ä¸‹è¨˜ã® Scope ã‚’è¨­å®šã—ã¦ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nGAS ã§ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡éƒ¨åˆ†ã®å®Ÿè£… Bot User Token ã¨ Slack App ã®ãƒ¡ãƒ³ãƒãƒ¼ ID ã‚’ GAS ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ç™»éŒ²ã™ã‚‹ã€‚\nãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡éƒ¨åˆ†ã®å®Ÿè£…ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚ main.ts ã®å®Ÿè£…ã¯ä¸‹è¨˜è¨˜äº‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã»ã¼ã»ã¼ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ã€‚\nSlack ã§å‹•ã ChatGPT ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ Google Apps Scriptï¼ˆGASï¼‰ã§ã‚µã‚¯ãƒƒã¨ä½œã£ã¦ã¿ã‚‹\nindex.ts :\n1 2 3 4 5 6 import { doPost } from \u0026#34;./main\u0026#34;; declare const global: any; // GAS ã«ãŠã„ã¦ doPost() ã¯ç‰¹åˆ¥ãªé–¢æ•°ãªã®ã§ã€global ã®åå‰ã¯ doPost ã«ã—ã¦ãŠãå¿…è¦ãŒã‚ã‚‹ global.doPost = doPost; main.ts :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 import URLFetchRequestOptions = GoogleAppsScript.URL_Fetch.URLFetchRequestOptions; // Slack ã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡é–¢æ•° const sendMessageToSlack = (channel: string, message: string) =\u0026gt; { const SLACK_BOT_TOKEN = PropertiesService.getScriptProperties().getProperty(\u0026#34;SLACK_BOT_TOKEN\u0026#34;); if (!SLACK_BOT_TOKEN) throw new Error(\u0026#34;SLACK_BOT_TOKEN is not set.\u0026#34;); const url = \u0026#34;https://slack.com/api/chat.postMessage\u0026#34;; const payload = { channel: channel, text: \u0026#34;echo: \u0026#34; + message, }; const options: URLFetchRequestOptions = { method: \u0026#34;post\u0026#34;, contentType: \u0026#34;application/json\u0026#34;, headers: { Authorization: `Bearer ${SLACK_BOT_TOKEN}` }, payload: JSON.stringify(payload), }; UrlFetchApp.fetch(url, options); }; export const doPost = (e: any) =\u0026gt; { const reqObj = JSON.parse(e.postData.getDataAsString()); // Slackã‹ã‚‰èªè¨¼ã‚³ãƒ¼ãƒ‰ãŒé€ã‚‰ã‚Œã¦ããŸå ´åˆ(åˆå›æ¥ç¶šæ™‚) // ã“ã‚Œã‚’ã‚„ã£ã¦ãŠã‹ãªã„ã¨ Event Subscriptions ã§ URL ãŒ Verify ã•ã‚Œãªã„ if (reqObj.type == \u0026#34;url_verification\u0026#34;) { // èªè¨¼ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾è¿”ã™ã“ã¨ã§ã€ã‚¢ãƒ—ãƒªã‚’Slackã«ç™»éŒ²ã™ã‚‹å‡¦ç†ãŒå®Œäº†ã™ã‚‹ return ContentService.createTextOutput(reqObj.challenge); } // Slackã‹ã‚‰ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ä»¥å¤–ã®å ´åˆã€OKã‚’è¿”ã—ã¦å‡¦ç†ã‚’çµ‚äº†ã™ã‚‹ if (reqObj.type !== \u0026#34;event_callback\u0026#34; || reqObj.event.type !== \u0026#34;message\u0026#34;) { return ContentService.createTextOutput(\u0026#34;OK\u0026#34;); } // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒç·¨é›†ã¾ãŸã¯å‰Šé™¤ã•ã‚ŒãŸå ´åˆã€OKã‚’è¿”ã—ã¦å‡¦ç†ã‚’çµ‚äº†ã™ã‚‹ if (reqObj.event.subtype !== undefined) { return ContentService.createTextOutput(\u0026#34;OK\u0026#34;); } // Slackã‹ã‚‰é€ä¿¡ã•ã‚ŒãŸãƒˆãƒªã‚¬ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ const triggerMsg = reqObj.event; // ãƒ¦ãƒ¼ã‚¶ãƒ¼ID const userId = triggerMsg.user; // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID const msgId = triggerMsg.client_msg_id; // ãƒãƒ£ãƒ³ãƒãƒ«ID const channelId = triggerMsg.channel; // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— const ts = triggerMsg.ts; // Botè‡ªèº«ã«ã‚ˆã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚‹å ´åˆã€OKã‚’è¿”ã—ã¦å‡¦ç†ã‚’çµ‚äº†ã™ã‚‹ const SLACK_BOT_USER_ID = PropertiesService.getScriptProperties().getProperty(\u0026#34;SLACK_BOT_USER_ID\u0026#34;); if (!SLACK_BOT_USER_ID) throw new Error(\u0026#34;SLACK_BOT_USER_ID is not set.\u0026#34;); if (userId === SLACK_BOT_USER_ID) { return ContentService.createTextOutput(\u0026#34;OK\u0026#34;); } sendMessageToSlack(channelId, triggerMsg.text); return ContentService.createTextOutput(\u0026#34;OK\u0026#34;); }; Slack App ã® Event Subscription ã®è¨­å®š GAS å´ãŒå®Ÿè£…ã§ããŸã‚‰ã€ GAS ã‹ã‚‰ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚\nãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã® URL ã‚’ Slack App ã® Events Subscriptions ã® Request URL ã«è²¼ã‚Šä»˜ã‘ã‚‹ã€‚\næ¬¡ã® bot events ã‚’ subscribe ã™ã‚‹ã‚ˆã†è¨­å®šã™ã‚‹ã€‚\nå®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ ä½œæˆã—ãŸ Slack App ã‚’ãƒãƒ£ãƒ³ãƒãƒ«ã«æ‹›å¾…ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ã€é€ä¿¡ã—ãŸæ–‡ç« ã‚’ Slack App ãŒ echo ã™ã‚‹ã¯ãšã€‚\nãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ clasp deploy ã§ãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã€‚ãŒã€ã„ãã¤ã‹æ³¨æ„ç‚¹ãŒã‚ã‚‹ã€‚\nâ‘  appsscript.json ã«ä¸‹è¨˜è¨­å®šã‚’è¿½åŠ ã—ãªã„ã¨ã€ã€Œã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã€ã§ã¯ãªãã€Œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€ã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã¦ã—ã¾ã†ï¼ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã® URL ãŒç™ºè¡Œã•ã‚Œãªã„\n1 2 3 4 \u0026#34;webapp\u0026#34;: { \u0026#34;access\u0026#34;: \u0026#34;ANYONE_ANONYMOUS\u0026#34;, \u0026#34;executeAs\u0026#34;: \u0026#34;USER_DEPLOYING\u0026#34; }, è¨­å®šå†…å®¹ã¯ä¸‹è¨˜ç”»åƒã¨åŒã˜ã€‚\nâ‘¡ clasp deploy æ™‚ã«ãƒ‡ãƒ—ãƒ­ã‚¤ ID ã‚’æŒ‡å®šã—ãªã„ã¨æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ãŒä½œæˆã•ã‚Œã¦ã—ã¾ã„ã€ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã® URL ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ï¼ˆ â†’ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ï¼‰\nclasp deployment ã§ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ‡ãƒ—ãƒ­ã‚¤ã®ä¸€è¦§ãŒå–å¾—ã§ãã‚‹ã€‚å†ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹å ´åˆã€ãƒ‡ãƒ—ãƒ­ã‚¤ä¸€è¦§ã®ä¸­ã‹ã‚‰æœ€æ–°ã®ãƒ‡ãƒ—ãƒ­ã‚¤ ID ã‚’å–å¾—ã—ã€ãã‚Œã‚’ clasp deploy ã§æŒ‡å®šã™ã‚‹ã€‚ä»Šå›ã¯æ¬¡ã®ã‚ˆã†ãªå†ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¦å¯¾å‡¦ã—ãŸã€‚\nredeploy.sh :\n1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash # Build yarn webpack --mode production # Push yarn clasp push # Get last deployment id LAST_DEPLOYMENT_ID=$(yarn clasp deployments | tail -n 2 | head -n 1 | awk \u0026#39;{print $2}\u0026#39;) # Deploy yarn clasp deploy --deploymentId $LAST_DEPLOYMENT_ID ã‚¯ãƒªãƒ—ãƒˆã¯æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nGoogle Apps Script ã® Clasp ã§ Web ã‚¢ãƒ—ãƒªã® URL ã‚’å¤‰ãˆãªã„ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³• - ã‚ã‚‹ SE ã®ã¤ã¶ã‚„ããƒ»æ”¹\nå‚è€ƒè¨˜äº‹ Slack ã§å‹•ã ChatGPT ã®ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚’ Google Apps Scriptï¼ˆGASï¼‰ã§ã‚µã‚¯ãƒƒã¨ä½œã£ã¦ã¿ã‚‹ GAS ï¼‹ clasp ã« npm ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ä½¿ã£ã¦ slack ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ #Slack - Qiita GAS Web app ã‚’ Clasp ã‹ã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ #JavaScript - Qiita Google Apps Script ã® Clasp ã§ Web ã‚¢ãƒ—ãƒªã® URL ã‚’å¤‰ãˆãªã„ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ–¹æ³• - ã‚ã‚‹ SE ã®ã¤ã¶ã‚„ããƒ»æ”¹ ","date":"2024-03-24T16:56:00Z","permalink":"https://yamamoto-yuta.github.io/p/clasp-slack-api-send-receive-messages/","title":"Clasp ç’°å¢ƒä¸‹ã§ Slack API ã‚’ä½¿ã£ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€å—ä¿¡ã™ã‚‹"},{"content":" âœï¸ ç·¨é›†\nè²·ã£ãŸã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ NuPhy Air75 V2 ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰\næ—¥æœ¬ã®è²©å£²ãƒšãƒ¼ã‚¸: Air75 V2 ãƒ¯ã‚¤ãƒ¤ãƒ¬ã‚¹ãƒ¡ã‚«ãƒ‹ã‚«ãƒ«ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ â€“ Nuphy Japan NuPhy å…¬å¼è²©å£²ãƒšãƒ¼ã‚¸: NuPhy Air75 V2 QMK/VIA Wireless Custom Mechanical Keyboard ã‚­ãƒ¼å‰²ã‚Šå½“ã¦ åˆ©ç”¨ç’°å¢ƒ ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰: NuPhy Air75 V2 ï¼ˆUS é…åˆ—ï¼‰ PC: Mac (JIS é…åˆ—) Windows ï¼ˆJIS é…åˆ—ï¼‰ Win/Mac ã®ãƒ‡ãƒã‚¤ã‚¹åˆ‡ã‚Šæ›¿ãˆ ä¸‹è¨˜ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã§ãƒ‡ãƒã‚¤ã‚¹åˆ‡ã‚Šæ›¿ãˆãŒå¯èƒ½ã€‚\n1 FN + 1 / 2 / 3 / 4 = Bluetooth 1 / 2/ 3 / 2.4GHz ä»Šå›ã¯ FN + 1 ã‚’ Mac ã€ FN + 2 ã‚’ Windows ã«å‰²ã‚Šå½“ã¦ãŸã€‚\nã¾ãŸã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã« Win/Mac ã®åˆ‡ã‚Šæ›¿ãˆã‚¹ã‚¤ãƒƒãƒãŒã‚ã‚‹ã®ã§ã€æ¥ç¶šå…ˆã® PC ã«åˆã‚ã›ã¦ã‚¹ã‚¤ãƒƒãƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ã«ã—ãŸã€‚\nï¼ˆç”»åƒå¼•ç”¨: NuPhy Air75 V2 QMK/VIA Wireless Custom Mechanical Keyboardï¼‰\nã“ã‚Œã«ã‚ˆã‚Šã€ Windows ã¨ Mac ã§ä½¿ç”¨ã™ã‚‹ VIA ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nï¼ˆç”»åƒå¼•ç”¨: VIAâ€“ SUPER KOPEKï¼‰\nå‚è€ƒ: VIAâ€“ SUPER KOPEK\nMac ã§ã®ã‚­ãƒ¼å‰²ã‚Šå½“ã¦ Mac ã§ã¯ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ç¹‹ãã¨ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã¦ãã¦ã€ãã®æŒ‡ç¤ºã«å¾“ãˆã° JIS/US ã‚’åˆ¤åˆ¥ã—ã¦ãã‚Œã‚‹ã€‚ãã®ãŸã‚ã€ç¹‹ãã ã‘ã§æœ€ä½é™ä½¿ãˆã‚‹çŠ¶æ…‹ã«ãªã£ãŸã€‚\nä»¥å‰ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã¯å·¦ã‚­ãƒ¼ã‚’ä¸‹è¨˜ã®é…ç½®ã§ä½¿ã£ã¦ã„ãŸã€‚\n1 Ctrl | Cmd | Opt ãã®ãŸã‚ã€ Air75 V2 ã§ã‚‚ã‚­ãƒ¼å‰²ã‚Šå½“ã¦ã‚’å¤‰æ›´ã—ã€åŒã˜é…ç½®ã«ã—ãŸã€‚\nã‚­ãƒ¼å‰²ã‚Šå½“ã¦ã®å¤‰æ›´ã¯ VIA ã§è¡Œã£ãŸã€‚\nNuPhy Air75 V2 ã«ãŠã‘ã‚‹ VIA ã‚’ä½¿ã£ãŸã‚­ãƒ¼å‰²ã‚Šå½“ã¦å¤‰æ›´ã«ã¤ã„ã¦ã¯ã€æ¬¡ã®å…¬å¼ãƒšãƒ¼ã‚¸ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹æ‰‹é †ã§è¡Œã£ãŸã€‚\nå…¬å¼ãƒšãƒ¼ã‚¸: VIA Usage Guide for NuPhy Keyboards\nå®Ÿéš›ã«å‰²ã‚Šå½“ã¦ãŸçµæœãŒæ¬¡ã®ç”»åƒã€‚ãªãŠã€ LWin = LCmd ã€ LAlt = LOpt ã¨å¯¾å¿œã—ã¦ã„ã‚‹ã€‚\nã‚­ãƒ¼å‰²ã‚Šå½“ã¦ã«åˆã‚ã›ã¦ã€ã‚­ãƒ¼ã‚­ãƒ£ãƒƒãƒ—ã‚‚å…¥ã‚Œæ›¿ãˆãŸï¼ˆCMD ã¨ OPT ã®ã‚­ãƒ¼ã‚­ãƒ£ãƒƒãƒ—ãŒåŒã˜å½¢çŠ¶ã§è‰¯ã‹ã£ãŸâ€¦ï¼‰ã€‚\nWin ã§ã®ã‚­ãƒ¼å‰²ã‚Šå½“ã¦ JIS é…åˆ—ã® Windows ã« US é…åˆ—ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ç¹‹ãæ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã ãŒã€ä»Šå›ã¯ ULE4JIS ã¨ã„ã†ãƒ•ãƒªãƒ¼ã‚½ãƒ•ãƒˆã‚’ä½¿ã†æ–¹æ³•ã‚’æ¡ç”¨ã—ãŸã€‚ç†ç”±ã¯ Capslock ã§ã‹ãª/è‹±å­—ã®ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ã‚’è¡Œã„ãŸã‹ã£ãŸã‹ã‚‰ã€‚\nå‚è€ƒ: ãƒãƒ¼ãƒˆãƒ‘ã‚½ã‚³ãƒ³ã¯ JIS é…åˆ—ã§å¤–ä»˜ã‘ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ US é…åˆ—ã«ï¼ˆWindowsï¼‰\nMac ã® Cmd ã®ä½ç½®ã« Win ã® Ctrl ã‚’ç½®ããŸã‹ã£ãŸã®ã§ã€ VIA ã§æ¬¡ã®ã‚ˆã†ã«å‰²ã‚Šå½“ã¦ãŸã€‚\n","date":"2024-03-22T17:27:00Z","permalink":"https://yamamoto-yuta.github.io/p/nuphy-air75-v2-keyboard-layout-memo/","title":"NuPhy Air75 V2 ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’è²·ã£ãŸã®ã§ã€ã‚­ãƒ¼å‰²ã‚Šå½“ã¦ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nclasp ç’°å¢ƒã‚’ Docker ã§ä½œã£ã¦ã¿ãŸã®ã§ã€ãã®ã¨ãã®ä½œæ¥­ãƒ­ã‚°ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nClasp ã¨ã¯ GAS ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã€‚\nå…¬å¼ãƒªãƒã‚¸ãƒˆãƒª: google/clasp: ğŸ”— Command Line Apps Script Projects\nå‰æº–å‚™: GAS API ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ ã“ã“ã‹ã‚‰æœ‰åŠ¹åŒ–ã§ãã‚‹: https://script.google.com/home/usersettings\nç”¨æ„ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€  ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :\n1 2 3 4 . |-- .gitignore |-- .env |-- docker-compose.yml ç”¨æ„ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«:\n.gitignore 1 2 3 4 5 6 7 .* .*/ node_modules/ dist/Code.gs !.gitignore !.*.sample è£œè¶³:\nCode.gs ã¯ãƒ“ãƒ«ãƒ‰çµæœãªã®ã§ gitignore ã—ã¦ãŠã .env 1 2 WORKING_DIR=/usr/src/app HOME=$WORKING_DIR è£œè¶³:\nclasp ã¯ãƒ­ã‚°ã‚¤ãƒ³ã® credential æƒ…å ±ã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã®ãƒ¦ãƒ¼ã‚¶ã® $HOME ç›´ä¸‹ã«ä½œæˆã™ã‚‹ï¼ˆ â†’ å‚è€ƒ ï¼‰ã®ã§ã€ $HOME ã‚’ $WORKING_DIR ã«ã™ã‚‹ã‚ˆã†è¨­å®šã—ã¦ã„ã‚‹ docker-compose.yml ã«ã‚ˆã£ã¦ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒ $WORKING_DIR ã«ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ï¼ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« credential æƒ…å ±ãŒæ›¸ã‹ã‚ŒãŸãƒ‰ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãŒç½®ã‹ã‚Œã‚‹ãŒã€ .gitignore ã§æŒ‡å®šã—ãŸãƒ‰ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä»¥å¤–ã¯ gitignore ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§èª¤ push ã‚’é˜²ã„ã§ã„ã‚‹ docker-compose.yml 1 2 3 4 5 6 7 8 9 10 11 12 version: \u0026#34;3\u0026#34; services: app: image: node:20 container_name: docker_clasp_container env_file: - .env volumes: - ./:$WORKING_DIR working_dir: $WORKING_DIR tty: true ç’°å¢ƒæ§‹ç¯‰æ‰‹é † ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ä¸­ã«å…¥ã‚‹ãƒ»\n1 2 $ docker compose up -d $ docker exec -it \u0026lt;CONTAINER_ID\u0026gt; bash yarn init ã—ã€Clasp ã¨ TypeScript ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n1 2 [In the container]# yarn init -y [In the container]# yarn add -D @google/clasp @types/google-apps-script typescript ts-loader clasp ã«ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã€‚\n1 2 3 4 5 6 [In the container]# yarn clasp login â‘  å‡ºã¦ããŸ URL ã«ã‚¢ã‚¯ã‚»ã‚¹ â‘¡ Google ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ â‘¢ localhost:*** ã¨ã„ã†ç„¡åŠ¹ãª URL ã«é·ç§»ã™ã‚Œã° OK â‘£ åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚³ãƒ³ãƒ†ãƒŠå†…ã«å…¥ã‚Šã€ curl \u0026#39;ã•ã£ãã®ç„¡åŠ¹ãª URL\u0026#39; â‘¤ ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸã®æ—¨ãŒå‡ºã¦ã„ã‚Œã°OK è£œè¶³: ãªãœåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ curl ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã‹ï¼Ÿ ã©ã†ã‚„ã‚‰ clasp login ã® --no-localhost ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã†ã¾ãæ©Ÿèƒ½ã—ãªã„ã‚‰ã—ã„ãŸã‚ã€‚\nãã®å›é¿ç­–ã¨ã—ã¦åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ curl ã‚’å©ãæ–¹æ³•ãŒç´¹ä»‹ã•ã‚Œã¦ã„ãŸï¼ˆ â†’ å‚è€ƒ ï¼‰ã€‚\nä»Šå›ã€ --no-localhost ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½¿ç”¨ã—ã¦ã„ãªã„ãŒã€åŒã˜æ–¹æ³•ã§ãƒ­ã‚°ã‚¤ãƒ³ã§ããŸã€‚\nä»Šå›ã¯ ã‚¹ã‚¯ãƒªãƒ—ãƒˆ ID ãŒ \u0026lt;GAS_SCRIPT_ID\u0026gt; ã® GAS ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ src/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é…ç½®ã™ã‚‹ã“ã¨ã«ã™ã‚‹ã€‚\nãã®ãŸã‚ã€ã¾ãš src/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã™ã‚‹ã€‚\n1 [In the container]# mkdir src æŒ‡å®šã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆ ID ã® GAS ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã¸ clone ã™ã‚‹ã€‚\n1 [In the container]# yarn clasp clone \u0026lt;GAS_SCRIPT_ID\u0026gt; clone å¾Œã€æ¬¡ã® 3 ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 . |-- src/ |-- .clasp.json |-- appsscript.json |-- \u0026lt;YOUR_GAS_SCRIPT\u0026gt;.js ã“ã®ã†ã¡ã€æ¬¡ã® 2 ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ src/ ã¸ç§»å‹•ã•ã›ã‚‹ã€‚\n1 [In the container]# mv appsscript.json \u0026lt;YOUR_GAS_SCRIPT\u0026gt;.js src/ .clasp.json ã® rootDir ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚\n1 2 - \u0026#34;rootDir\u0026#34;: \u0026#34;/usr/src/app\u0026#34; + \u0026#34;rootDir\u0026#34;: \u0026#34;/usr/src/app/src\u0026#34; clasp push ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’ GAS ä¸Šã¸åæ˜ ã•ã›ã‚‹ã€‚\n1 [In the container]# yarn clasp push Web ä¸Šã® GAS ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ã¯ãšã€‚\nES modules ã®åˆ©ç”¨ 2024/03/18 ç¾åœ¨ã€ GAS ã¯ ES modules ã«å¯¾å¿œã—ã¦ãŠã‚‰ãšã€ import ãªã©ãŒä½¿ãˆãªã„ã€‚\nä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹æ–¹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã ãŒã€ä»Šå›ã¯ gas-webpack-plugin ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚\nWebpack ã¨ gas-webpack-plugin ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚\n1 [In the container]# yarn add -D gas-webpack-plugin webpack webpack-cli ä»Šå›ã¯ src/ ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ dist/ ã«ç½®ãã“ã¨ã«ã™ã‚‹ã€‚\nãã®ãŸã‚ã€ã¾ãš dist/ ã‚’ä½œæˆã™ã‚‹ã€‚\n1 [In the container]# mkdir dist/ ç¶šã„ã¦ã€ appsscript.json ã‚’ dist/ ã¸ç§»å‹•ã•ã›ã‚‹ã€‚\n1 [In the container]# mv src/appsscript.json dist/ ä½µã›ã¦ã€ .clasp.json ã® rootDir ã‚’æ¬¡ã®ã‚ˆã†ã«å¤‰æ›´ã™ã‚‹ã€‚\n1 2 - \u0026#34;rootDir\u0026#34;: \u0026#34;/usr/src/app/src\u0026#34; + \u0026#34;rootDir\u0026#34;: \u0026#34;/usr/src/app/dist\u0026#34; webpack.config.json ã‚’ä½œæˆã—ã€æ¬¡ã®å†…å®¹ã‚’è¨­å®šã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 const path = require(\u0026#34;path\u0026#34;); const GasPlugin = require(\u0026#34;gas-webpack-plugin\u0026#34;); module.exports = { context: __dirname, entry: \u0026#34;./src/index.ts\u0026#34;, output: { path: path.join(__dirname, \u0026#34;dist\u0026#34;), filename: \u0026#34;Code.gs\u0026#34;, }, resolve: { extensions: [\u0026#34;.ts\u0026#34;, \u0026#34;.js\u0026#34;], }, module: { rules: [ { test: /\\.[tj]s$/, use: \u0026#34;ts-loader\u0026#34;, exclude: /node_modules/, }, ], }, plugins: [new GasPlugin()], }; ã“ã®æ™‚ç‚¹ã§ã€æ¬¡ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã«ãªã£ã¦ã„ã‚‹ã¯ãšã€‚\n1 2 3 4 5 6 7 . |-- /dist | |-- appsscript.json |-- src/ | |-- \u0026lt;YOUR_GAS_SCRIPT\u0026gt;.js |-- .clasp.json |-- webpack.config.js yarn webpack ã§ã‚³ãƒ¼ãƒ‰ã‚’ãƒ“ãƒ«ãƒ‰ã—ãŸå¾Œã€ clasp push ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚³ãƒ¼ãƒ‰ã‚’ GAS ä¸Šã¸åæ˜ ã•ã›ã‚‹ã€‚\n1 2 [In the container]# yarn webpack --mode production [In the container]# yarn clasp push Web ä¸Šã§ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚³ãƒ¼ãƒ‰ãŒç¢ºèªã§ããŸã‚‰ OK ã€‚\nã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ clasp create ç­‰ã®éš›ã®å‹•ä½œç¢ºèªç”¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ :\n1 2 3 4 . |-- src/ |-- index.ts | |-- main.ts index.ts\n1 2 3 4 5 import { mainFunc } from \u0026#34;./main\u0026#34;; declare const global: any; global.mainFunc = mainFunc; main.ts\n1 export const mainFunc = () =\u0026gt; console.log(\u0026#34;Hello World\u0026#34;); TIPS ã“ã‚“ãªæ„Ÿã˜ã§ Makefile ã« clasp push ç”¨ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¦ãŠãã¨ã€ make push ã§ GAS ã¸ push ã§ãã¦æ¥½ã€‚\nMakefile\n1 2 3 .PHONY: push push: docker compose run --rm app bash -c \u0026#34;yarn webpack --mode production \u0026amp;\u0026amp; yarn clasp push\u0026#34; å‚è€ƒè¨˜äº‹ clasp ã‚’ä½¿ã£ã¦ Google Apps Script ã®é–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã¿ãŸ | DevelopersIO clasp ã§ GAS ã‚’ github ç®¡ç†ã™ã‚‹ gas ã‚’ç®¡ç†ã™ã‚‹ clasp ã® docker ç’°å¢ƒã‚’ä½œæˆã™ã‚‹ #Docker - Qiita clasp login \u0026ndash;no-localhost ãŒä½¿ãˆãªã„ #GoogleAppsScript - Qiita GAS + Typescript ã®ã„ã„æ„Ÿã˜ã®ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã‚’æ•´ãˆã‚‹ [åˆå¿ƒè€…å‘ã‘] GoogleAppsScript(GAS)ã®é–‹ç™ºç’°å¢ƒã‚’ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã«æ§‹ç¯‰(TypeScript / Module / Polyfill) #Docker - Qiita ","date":"2024-03-03T16:13:00Z","permalink":"https://yamamoto-yuta.github.io/p/docker-clasp-environment-setup/","title":"Docker ã§ clasp ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹"},{"content":" âœï¸ ç·¨é›†\nã‚„ã£ãŸã“ã¨ æ¬¡ã®è¨˜äº‹ã§å®Ÿè£…ã•ã‚Œã¦ã„ãŸ SQL ã® CTE ã‚’å¯è¦–åŒ–ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒä¾¿åˆ©ã ã£ãŸã€‚\nhttps://note.com/dd_techblog/n/n3876f38cc5fc\nãŸã ã€è¨˜äº‹ã§ã¯ Python ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã«ã¯ã‚µãƒ¼ãƒã‚’å»ºã¦ã‚‹å¿…è¦ãŒã‚ã‚Šå°‘ã—é¢å€’ã ã£ãŸã€‚ãªã®ã§ã€ GitHub Pages ã‹ã‚‰ã‚µã‚¯ãƒƒã¨ä½¿ãˆã‚‹ã‚ˆã† JavaScript ã§å®Ÿè£…ã—ç›´ã—ã¦ã¿ãŸã€‚\næ¬¡ã®ãƒªãƒ³ã‚¯ã‹ã‚‰å®Ÿéš›ã«è§¦ã‚Œã‚‹ã€‚\nhttps://yamamoto-yuta.github.io/sql-cte-visualizer-js/\nä»¥ä¸‹ã€è©¦è¡ŒéŒ¯èª¤ã—ãŸã¨ãã®ãƒ¡ãƒ¢\nPython â†’ JavaScript ã¸ã®å®Ÿè£… å…ˆã®è¨˜äº‹ ã‚’è‡ªåˆ†ã§å‹•ã‹ã—ã¦ã¿ãŸã€‚ãã®ã¨ãã® GitHub ãƒªãƒã‚¸ãƒˆãƒªãŒã“ã¡ã‚‰:\nhttps://github.com/yamamoto-yuta/sql-cte-visualizer?tab=readme-ov-file\nã“ã®ä¸­ã® main.py ã‚³ãƒ”ãƒ¼ã—ã€ ChatGPT ã¸ã€Œ JavaScript ã§æ›¸ãç›´ã—ã¦ã€ã¨æŒ‡ç¤ºã™ã‚‹ã“ã¨ã§ã€å®Ÿè£…ã®å©ãã‚’ä½œã£ãŸã€‚ã¨ã„ã†ã‹ã€å¯è¦–åŒ–ã®éƒ¨åˆ†ä»¥å¤–ã¯ã“ã‚Œã§ã„ã‘ãŸã€‚\nSQL ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’ç”¨ã„ãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒ å®Ÿã¯å½“åˆã¯è¨˜äº‹ã«ã‚ã‚‹æ­£è¦è¡¨ç¾ã§ã¯ãªã SQL ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’ç”¨ã„ãŸæ–¹æ³•ã‚’æ¤œè¨ã—ã¦ã„ãŸã€‚ç†ç”±ã¯ ChatGPT ã«æŠ•ã’ãŸéš›ã« Python â†’ JavaScript ã®å¤‰æ›ã§æ­£è¦è¡¨ç¾éƒ¨åˆ†ãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸãŸã‚ï¼ˆå¾Œã«ã†ã¾ãã„ãã“ã¨ãŒã‚ã‹ã£ãŸãŸã‚ã€æ­£è¦è¡¨ç¾ã‚’ç”¨ã„ãŸæ–¹æ³•ã«æˆ»ã—ãŸï¼‰ã€‚\nãã®éš›ã€ SQL ãƒ‘ãƒ¼ã‚µãƒ¼ã¯ã€Œ node-sql-parse ã€ã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¡ç”¨ã—ãŸã€‚\nhttps://github.com/taozhi8833998/node-sql-parser\nï¼ˆSQL ãƒ‘ãƒ¼ã‚µãƒ¼ã®é¸å®šã«ã¯æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸï¼‰\nhttps://zenn.dev/carenet/articles/d42b236ae69bc5\nnode-sql-parser ã§ã®ãƒ‘ãƒ¼ã‚¹ã®ä¾‹ã‚’ä»¥ä¸‹ã«ç¤ºã™ã€‚\nSQL 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 -- è¤‡æ•°ã®CTEã®å®šç¾© WITH DepartmentSummary AS ( SELECT department_id, department_name, COUNT(*) AS employee_count FROM departments GROUP BY department_id, department_name ), ProjectSummary AS ( SELECT project_id, project_name, COUNT(*) AS member_count FROM projects GROUP BY project_id, project_name ) -- è¤‡æ•°ã®CTEã¨JOINã‚’ä½¿ç”¨ã—ãŸã‚¯ã‚¨ãƒª SELECT e.employee_id, e.employee_name, e.role, d.department_name, d.employee_count, p.project_name, p.member_count FROM employees e JOIN DepartmentSummary d ON e.department_id = d.department_id LEFT JOIN employee_projects ep ON e.employee_id = ep.employee_id LEFT JOIN ProjectSummary p ON ep.project_id = p.project_id; ãƒ‘ãƒ¼ã‚¹çµæœ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 [ { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;employee_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;employee_name\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;role\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;d\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;department_name\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;d\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;employee_count\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;p\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;project_name\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;p\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;member_count\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;as\u0026#34;: null } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;employees\u0026#34;, \u0026#34;as\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;operator\u0026#34;: null }, { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;DepartmentSummary\u0026#34;, \u0026#34;as\u0026#34;: \u0026#34;d\u0026#34;, \u0026#34;join\u0026#34;: \u0026#34;JOIN\u0026#34;, \u0026#34;on\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;binary_expr\u0026#34;, \u0026#34;operator\u0026#34;: \u0026#34;=\u0026#34;, \u0026#34;left\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;department_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;right\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;d\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;department_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] } } }, { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;employee_projects\u0026#34;, \u0026#34;as\u0026#34;: \u0026#34;ep\u0026#34;, \u0026#34;join\u0026#34;: \u0026#34;LEFT JOIN\u0026#34;, \u0026#34;on\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;binary_expr\u0026#34;, \u0026#34;operator\u0026#34;: \u0026#34;=\u0026#34;, \u0026#34;left\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;e\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;employee_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;right\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;ep\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;employee_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] } } }, { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;ProjectSummary\u0026#34;, \u0026#34;as\u0026#34;: \u0026#34;p\u0026#34;, \u0026#34;join\u0026#34;: \u0026#34;LEFT JOIN\u0026#34;, \u0026#34;on\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;binary_expr\u0026#34;, \u0026#34;operator\u0026#34;: \u0026#34;=\u0026#34;, \u0026#34;left\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;ep\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;project_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] }, \u0026#34;right\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: \u0026#34;p\u0026#34;, \u0026#34;column\u0026#34;: \u0026#34;project_id\u0026#34;, \u0026#34;subFields\u0026#34;: [] } } } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: [ { \u0026#34;name\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;DepartmentSummary\u0026#34; }, \u0026#34;stmt\u0026#34;: { \u0026#34;tableList\u0026#34;: [\u0026#34;select::null::departments\u0026#34;], \u0026#34;columnList\u0026#34;: [ \u0026#34;select::null::department_id\u0026#34;, \u0026#34;select::null::department_name\u0026#34; ], \u0026#34;ast\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;department_id\u0026#34; }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;department_name\u0026#34; }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;aggr_func\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;COUNT\u0026#34;, \u0026#34;args\u0026#34;: { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;star\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;*\u0026#34; } }, \u0026#34;over\u0026#34;: null }, \u0026#34;as\u0026#34;: \u0026#34;employee_count\u0026#34; } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;departments\u0026#34;, \u0026#34;as\u0026#34;: null, \u0026#34;operator\u0026#34;: null } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: null, \u0026#34;groupby\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;department_id\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;department_name\u0026#34; } ], \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null } } }, { \u0026#34;name\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;ProjectSummary\u0026#34; }, \u0026#34;stmt\u0026#34;: { \u0026#34;tableList\u0026#34;: [\u0026#34;select::null::departments\u0026#34;, \u0026#34;select::null::projects\u0026#34;], \u0026#34;columnList\u0026#34;: [ \u0026#34;select::null::department_id\u0026#34;, \u0026#34;select::null::department_name\u0026#34;, \u0026#34;select::null::project_id\u0026#34;, \u0026#34;select::null::project_name\u0026#34; ], \u0026#34;ast\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;project_id\u0026#34; }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;project_name\u0026#34; }, \u0026#34;as\u0026#34;: null }, { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;aggr_func\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;COUNT\u0026#34;, \u0026#34;args\u0026#34;: { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;star\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;*\u0026#34; } }, \u0026#34;over\u0026#34;: null }, \u0026#34;as\u0026#34;: \u0026#34;member_count\u0026#34; } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;projects\u0026#34;, \u0026#34;as\u0026#34;: null, \u0026#34;operator\u0026#34;: null } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: null, \u0026#34;groupby\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;project_id\u0026#34; }, { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;project_name\u0026#34; } ], \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null } } } ], \u0026#34;groupby\u0026#34;: null, \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null, \u0026#34;_orderby\u0026#34;: null, \u0026#34;_limit\u0026#34;: null } ] node-sql-parser ã‚’ä½¿ã£ã¦ã„ãŸæ™‚ã«ç™ºç”Ÿã—ã¦ã„ãŸæ—¢çŸ¥ã®ä¸å…·åˆã¯ ã‚³ãƒãƒ© ã«ã‚¹ãƒˆãƒƒã‚¯ã—ã¦ã‚ã‚‹ã€‚\nç¾æ™‚ç‚¹ã§åˆ¤æ˜ã—ã¦ã„ã‚‹ä¸å…·åˆã®å¤šãã¯ node-sql-parser ãŒä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ‘ãƒ¼ã‚µãƒ¼ã®æ”¹ä¿®ãŒå¿…è¦ãã†ãªé›°å›²æ°—ï¼ˆè¦æ¤œè¨¼ï¼‰ã€‚ãã®å ´åˆã€ node-sql-parser ã¯å†…éƒ¨ã§ PEG.js ã¨ã„ã†ãƒ‘ãƒ¼ã‚µãƒ¼ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ãŠãã‚‰ãä¸‹è¨˜ã®éƒ¨åˆ†ã‚’å›åã™ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã‚ã‚Œã‚‹ï¼ˆãŒã€ä»Šå›ã¯ä¸€æ—¦ã“ã“ã¾ã§ã§â€¦ï¼‰ã€‚\nè©²å½“ã‚³ãƒ¼ãƒ‰: https://github.com/taozhi8833998/node-sql-parser/blob/master/pegjs/bigquery.pegjs\nã€ŒPEG.js is ä½•ï¼Ÿã€ã¯æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nhttps://qiita.com/kujirahand/items/eab914bc77cf1bc0837c\nå¯è¦–åŒ–æ–¹æ³•ã®æ¤œè¨ å…ˆã®è¨˜äº‹ ã§ã¯ Graphviz ã‚’ç”¨ã„ã¦å¯è¦–åŒ–ã—ã¦ã„ãŸã€‚å½“åˆã€ Graphviz ãŒ JavaScript ã§ã‚‚ä½¿ãˆã‚‹ã“ã¨ã‚’çŸ¥ã‚‰ãšã«åˆ¥ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã®å®Ÿè£…ã‚’è©¦ã¿ã¦ã„ãŸã€‚ãã®ã¨ãã®ãƒ¡ãƒ¢ã‚’ä¸‹è¨˜ã«ç¤ºã™ï¼ˆç¾åœ¨ã¯ Graphviz ã‚’ç”¨ã„ã¦ã„ã‚‹ï¼‰ã€‚\nD3.js å½“åˆã€ D3.js ã§ã®å¯è¦–åŒ–ã‚’è©¦ã¿ã¦ã„ãŸã€‚ç†ç”±ã¯ D3.js ã® hierarchy ãŒä»Šå›ã®ç”¨é€”ã«ä½¿ãˆãã†ã ã£ãŸã‹ã‚‰ï¼ˆå¾Œã«ä½¿ãˆãªã„ã“ã¨ãŒåˆ†ã‹ã£ãŸãŒâ€¦ï¼‰ã€‚\nhierarchy ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nhttps://zenn.dev/yuji/articles/7eb96460317222\nå‰è¿°ã®ã€Œä½¿ãˆãªã„ã“ã¨ãŒåˆ†ã‹ã£ãŸã€ã«ã¤ã„ã¦ã ãŒã€ã€ŒåŒåã®å­ãƒãƒ¼ãƒ‰ãŒè¤‡æ•°å­˜åœ¨ã§ãã¦ã—ã¾ã†ã€ã“ã¨ãŒå•é¡Œã¨ãªã£ãŸã€‚\nä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãª SQL ã‚¯ã‚¨ãƒªãŒã‚ã£ãŸã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 WITH cte1 AS ( SELECT * FROM source1 ), cte2 AS ( SELECT * FROM source1 ), cte3 AS ( SELECT * FROM cte2 ) SELECT * FROM cte3 JOIN cte1 ãã®å ´åˆâ€¦\næ­£è¦è¡¨ç¾ã«ã‚ˆã‚‹å¯è¦–åŒ–ï¼ˆæœ¬æ¥ï¼‰ hierarchy ã«ã‚ˆã‚‹å¯è¦–åŒ– ã“ã®ã‚ˆã†ã«å¯è¦–åŒ–ã—ã¦ã»ã—ã„ã€‚ ã—ã‹ã—ã€ hierarchy ã ã¨æ¬¡ã®ã‚ˆã†ãªå¯è¦–åŒ–ã«ãªã£ã¦ã—ã¾ã†ã€‚ è¦‹ã¦ã¿ã‚‹ã¨ã€ source1 ãŒè¤‡æ•°ã«åˆ†ã‹ã‚Œã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€ãŠãã‚‰ãå­ãƒãƒ¼ãƒ‰ãŒçµåˆã™ã‚‹ã‚ˆã†ãªæ§‹é€ ã« hierarchy ã‚’é©ç”¨ã™ã‚‹ã®ã¯é©åˆ‡ã§ã¯ãªã‹ã£ãŸã‚‚ã®ã¨æ€ã‚ã‚Œã‚‹â€¦ï¼ˆå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç­‰ã‚’èª¿ã¹ã¦ã‚‚ã€å­ãƒãƒ¼ãƒ‰ãŒçµåˆã™ã‚‹ã‚ˆã†ãªæ§‹é€ ã«é©ç”¨ã—ãŸã‚µãƒ³ãƒ—ãƒ«ã¯è¦‹ã¤ã‘ã‚‰ã‚Œãªã‹ã£ãŸï¼‰ã€‚\nãªãŠã€D3.js ä»¥å¤–ã§ã¯ Mermaid.js ã‚‚æ¤œè¨ã—ãŸãŒã€å…¬å¼ã® Live Editor ã®ã‚ˆã†ã«ãƒ¦ãƒ¼ã‚¶å…¥åŠ›ã«å¿œã˜ã§å›³ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•ãŒåˆ†ã‹ã‚‰ãšæ²¼ã£ãŸã®ã§æ–­å¿µã—ãŸã€‚\nGraphviz å…ˆã®è¨˜äº‹ ã¨åŒã˜ã Graphviz ãŒ JavaScript ã§ã‚‚ä½¿ãˆã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã®ã§ã€æœ€çµ‚çš„ã«ã“ã¡ã‚‰ã‚’æ¡ç”¨ã—ãŸã€‚\nGraphviz ã®æ“ä½œã¯æ¬¡ã®è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nhttps://qiita.com/mmmmk/items/f7c70024938b0e38e4c9\nnode-sql-parser ã‚’ä½¿ã£ã¦ã„ãŸã¨ãã®å®Ÿè£… node-sql-parser ã‚’ä½¿ã£ã¦ã„ãŸã¨ãã® CTE å¯è¦–åŒ–ã®å®Ÿè£…ã‚’ä¸‹è¨˜ã«ç¤ºã™ã€‚\nnode-sql-parser ã‚„ hierarchy ã®å®Ÿè£…ã«ã¤ã„ã¦ã¯ã»ã¼å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„å‚è€ƒè¨˜äº‹ã®é€šã‚Šã€‚\nç‹¬è‡ªã§å®Ÿè£…ã—ãŸã®ã¯ node-sql-parser ã§å¾—ã‚‰ã‚ŒãŸæ§‹æ–‡æœ¨ã‚’ hierarchy ã§å¯è¦–åŒ–ã§ãã‚‹ã‚ˆã†å¤‰æ›ã™ã‚‹å‡¦ç†ã€‚\nnode-sql-parser ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æ§‹æ–‡æœ¨ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã¨ãŠã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 [ { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, ... \u0026#34;from\u0026#34;: [ { ... \u0026#34;table\u0026#34;: \u0026#34;\u0026lt;ROOT_FROM_TABLE\u0026gt;\u0026#34;, ... }, ... ], ... \u0026#34;with\u0026#34;: [ { \u0026#34;name\u0026#34;: { ... \u0026#34;value\u0026#34;: \u0026#34;\u0026lt;CTE_1\u0026#34; }, \u0026#34;stmt\u0026#34;: { ... \u0026#34;ast\u0026#34;: { ... \u0026#34;from\u0026#34;: [ { ... \u0026#34;table\u0026#34;: \u0026#34;CTE_1_FROM_TABLE\u0026gt;\u0026#34;, ... }, ... ], ... } } }, ... ], ... } ] hierarchy ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã¨ãŠã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 { \u0026#34;name\u0026#34;: \u0026#34;\u0026lt;ROOT\u0026gt;\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;\u0026lt;CHILDREN_1_DEPTH_1\u0026gt;\u0026#34; }, { \u0026#34;name\u0026#34;: \u0026#34;\u0026lt;CHILDREN_2_DEPTH_1\u0026gt;\u0026#34;, \u0026#34;children\u0026#34;: [ ... } å¤‰æ›å‡¦ç†ã¯ä¸»ã«æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§è¡Œã†ã‚ˆã†ã«ã—ãŸã€‚\næ§‹æ–‡æœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ CTE åŒå£«ã®ä¾å­˜é–¢ä¿‚ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ æœ€å¾Œã® SELECT ~ FROM ã§ FROM ã—ã¦ã„ã‚‹ CTE ã«å…ˆã®ä¾å­˜é–¢ä¿‚ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã™ã‚‹ 1 ã¤ç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã‚ã‚‹ï¼ˆ originalJson ã«æ§‹æ–‡æœ¨ã®ãƒ‡ãƒ¼ã‚¿ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ï¼‰ã€‚ãƒã‚¤ãƒ³ãƒˆã¯ã€ CTE ãŒ CTE ã‚’ FROM ã—ã¦ã„ã‚‹ã‚±ãƒ¼ã‚¹ã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã€å†å¸°çš„ã«ä¾å­˜é–¢ä¿‚ã‚’ç‰¹å®šã—ã¦ã„ã‚‹ç‚¹ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 let cteMap = new Map(); // \u0026#39;with\u0026#39;ç¯€ã®å‡¦ç†ï¼ˆã‚‚ã—å­˜åœ¨ã™ã‚‹å ´åˆï¼‰ if (originalJson[0].with) { originalJson[0].with.forEach((cte) =\u0026gt; { cteMap.set(cte.name.value, { name: cte.name.value, children: [], processed: false, }); }); // å†å¸°çš„ã«CTEã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ function processCte(cteName) { let cte = cteMap.get(cteName); if (cte.processed) { return cte; } cte.processed = true; originalJson[0].with.forEach((w) =\u0026gt; { if (w.name.value === cteName) { if (w.stmt.ast.from) { // CTE ã« FROM å¥ãŒãªã„å ´åˆã‚‚ã‚ã‚‹ãŸã‚åˆ†å²ã‚’å…¥ã‚Œã¦ã„ã‚‹ w.stmt.ast.from.forEach((fromTable) =\u0026gt; { if (cteMap.has(fromTable.table)) { // FROM å¥ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒCTEã®å ´åˆã¯æ·±æ˜ã‚Š cte.children.push(processCte(fromTable.table)); } else { // ä¾å­˜ã®çµ‚ç«¯ã«é”ã—ãŸå ´åˆã¯ãƒ†ãƒ¼ãƒ–ãƒ«åã‚’è¿½åŠ  cte.children.push({ name: fromTable.table, }); } }); } } }); return cte; } cteMap.forEach((_, cteName) =\u0026gt; processCte(cteName)); } 2 ã¤ç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 // æ–°ã—ã„JSONã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ– let convertedJson = { name: \u0026#34;root\u0026#34;, children: [], }; // å„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‡¦ç† originalJson[0].from.forEach((table) =\u0026gt; { if (cteMap.has(table.table)) { convertedJson.children.push(cteMap.get(table.table)); } else { convertedJson.children.push({ name: table.table, }); } }); å„ã‚¹ãƒ†ãƒƒãƒ—ã®å‹•ä½œä¾‹ã‚’ä»¥ä¸‹ã«è¨˜ã™ã€‚\nä¾‹ãˆã°ã€æ¬¡ã®ã‚ˆã†ãª SQL ãŒã‚ã£ãŸã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 WITH cte_depth_2 AS ( SELECT * FROM source ), cte_depth_1 AS ( SELECT * FROM cte_depth_2 ) SELECT * FROM cte_depth_1 ã“ã® SQL ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹æ§‹æ–‡æœ¨ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã€‚\né•·ã„ã®ã§æŠ˜ã‚ŠãŸãŸã¿ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;*\u0026#34; }, \u0026#34;as\u0026#34;: null } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;cte_depth_1\u0026#34;, \u0026#34;as\u0026#34;: null, \u0026#34;operator\u0026#34;: null } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: [ { \u0026#34;name\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;cte_depth_2\u0026#34; }, \u0026#34;stmt\u0026#34;: { \u0026#34;tableList\u0026#34;: [\u0026#34;select::null::source\u0026#34;], \u0026#34;columnList\u0026#34;: [\u0026#34;select::null::(.*)\u0026#34;], \u0026#34;ast\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;*\u0026#34; }, \u0026#34;as\u0026#34;: null } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;source\u0026#34;, \u0026#34;as\u0026#34;: null, \u0026#34;operator\u0026#34;: null } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: null, \u0026#34;groupby\u0026#34;: null, \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null } } }, { \u0026#34;name\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;value\u0026#34;: \u0026#34;cte_depth_1\u0026#34; }, \u0026#34;stmt\u0026#34;: { \u0026#34;tableList\u0026#34;: [\u0026#34;select::null::source\u0026#34;, \u0026#34;select::null::cte_depth_2\u0026#34;], \u0026#34;columnList\u0026#34;: [\u0026#34;select::null::(.*)\u0026#34;], \u0026#34;ast\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;select\u0026#34;, \u0026#34;as_struct_val\u0026#34;: null, \u0026#34;distinct\u0026#34;: null, \u0026#34;columns\u0026#34;: [ { \u0026#34;expr\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;column_ref\u0026#34;, \u0026#34;table\u0026#34;: null, \u0026#34;column\u0026#34;: \u0026#34;*\u0026#34; }, \u0026#34;as\u0026#34;: null } ], \u0026#34;from\u0026#34;: [ { \u0026#34;db\u0026#34;: null, \u0026#34;table\u0026#34;: \u0026#34;cte_depth_2\u0026#34;, \u0026#34;as\u0026#34;: null, \u0026#34;operator\u0026#34;: null } ], \u0026#34;for_sys_time_as_of\u0026#34;: null, \u0026#34;where\u0026#34;: null, \u0026#34;with\u0026#34;: null, \u0026#34;groupby\u0026#34;: null, \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null } } } ], \u0026#34;groupby\u0026#34;: null, \u0026#34;having\u0026#34;: null, \u0026#34;qualify\u0026#34;: null, \u0026#34;orderby\u0026#34;: null, \u0026#34;limit\u0026#34;: null, \u0026#34;window\u0026#34;: null, \u0026#34;_orderby\u0026#34;: null, \u0026#34;_limit\u0026#34;: null } 1 ã¤ç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã¯ã€ã“ã®æ§‹æ–‡æœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ¬¡ã®ã‚ˆã†ãªä¾å­˜é–¢ä¿‚ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 [ [ \u0026#34;cte_depth_2\u0026#34;, { \u0026#34;name\u0026#34;: \u0026#34;cte_depth_2\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;source\u0026#34; } ], \u0026#34;processed\u0026#34;: true } ], [ \u0026#34;cte_depth_1\u0026#34;, { \u0026#34;name\u0026#34;: \u0026#34;cte_depth_1\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;cte_depth_2\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;source\u0026#34; } ], \u0026#34;processed\u0026#34;: true } ], \u0026#34;processed\u0026#34;: true } ] ] 2 ã¤ç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’çµŒã¦ã€æœ€çµ‚çš„ã«æ¬¡ã®ã‚ˆã†ãª hierarchy ç”¨ãƒ‡ãƒ¼ã‚¿ã«ãªã‚‹ã€‚ä»Šå›ã®ã‚¯ã‚¨ãƒªã§ã¯ã€æœ€çµ‚ã‚¯ã‚¨ãƒªã¯ cte_depth_1 ã‚’ FROM ã—ã¦ã„ãŸã®ã§ã€1 ã¤ç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã§å¾—ã‚‰ã‚ŒãŸ cte_depth_1 ã®ä¾å­˜é–¢ä¿‚ãƒ‡ãƒ¼ã‚¿ã‚’çµåˆã™ã‚Œã° OK ã¨ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 { \u0026#34;name\u0026#34;: \u0026#34;root\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;cte_depth_1\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;cte_depth_2\u0026#34;, \u0026#34;children\u0026#34;: [ { \u0026#34;name\u0026#34;: \u0026#34;source\u0026#34; } ], \u0026#34;processed\u0026#34;: true } ], \u0026#34;processed\u0026#34;: true } ] } ","date":"2024-02-25T11:53:00Z","permalink":"https://yamamoto-yuta.github.io/p/visualizing-cte-dependencies-in-javascript/","title":"SQL ã® CTE ã®ä¾å­˜é–¢ä¿‚ã‚’ JavaScript ã§å¯è¦–åŒ–ã—ã¦ã¿ã‚‹"},{"content":" âœï¸ ç·¨é›†\nSlack ã® Slash Commands ã‚’ä½œæˆã—ãŸéš›ã«è‰²ã€…ã¤ã¾ã¥ã„ãŸã®ã§ãƒ¡ãƒ¢ã«æ®‹ã™ã€‚\nä»Šå›ã®ã‚´ãƒ¼ãƒ« /echo ã§ echo ã¨è¿”ã™ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã™ã‚‹ /hoge ã§ hoge ã¨è¿”ã™ã‚¹ãƒ©ãƒƒã‚·ãƒ¥ã‚³ãƒãƒ³ãƒ‰ã‚’ä½œæˆã™ã‚‹ ngrok ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã® URL : https://ngrok.com/download\nã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã›ãšã«åˆ©ç”¨ã—ã¦ã„ãŸãŒã€æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã®ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ãŸ:\n1 2 3 4 ERR_NGROK_6022 Before you can serve HTML content, you must sign up for an ngrok account and install your authtoken. https://ngrok.com/docs/errors/err_ngrok_6022/ æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§ ngrok ã‚’èµ·å‹•ã•ã›ã‚‹ï¼ˆä»Šå›ã¯ 3000 ç•ªãƒãƒ¼ãƒˆã‚’ä½¿ã†ã“ã¨ã«ã™ã‚‹ï¼‰:\n1 $ ngrok http 3000 å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ .env.sample :\n1 2 3 4 WORKING_DIR=/usr/src/app OPENAI_API_KEY=# Your OpenAI API key SLACK_BOT_TOKEN=# OAuth \u0026amp; Permissions \u0026gt; OAuth Tokens for Your Workspace \u0026gt; Bot User OAuth Access Token SLACK_SIGNING_SECRET=# Basic Information \u0026gt; App Credentials \u0026gt; Signing Secret Dockerfile :\n1 2 3 4 5 6 7 8 FROM python:3.10 COPY requirements.txt ${WORKING_DIR}/ RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y RUN pip install --upgrade pip \u0026amp;\u0026amp; \\ pip install -r requirements.txt docker-compose.yml :\n1 2 3 4 5 6 7 8 9 10 11 12 13 version: \u0026#34;3.7\u0026#34; services: app: build: . env_file: - .env volumes: - .:$WORKING_DIR working_dir: $WORKING_DIR tty: true ports: - 3000:3000 requirements.txt :\n1 slack_bolt==1.18.1 main.py :\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import os from slack_bolt import App app = App( signing_secret=os.environ[\u0026#34;SLACK_SIGNING_SECRET\u0026#34;], token=os.environ[\u0026#34;SLACK_BOT_TOKEN\u0026#34;] ) @app.command(\u0026#34;/echo\u0026#34;) def echo(ack, respond): ack() respond(\u0026#34;echo\u0026#34;) @app.command(\u0026#34;/hoge\u0026#34;) def hoge(ack, respond): ack() respond(\u0026#34;hoge\u0026#34;) if __name__ == \u0026#34;__main__\u0026#34;: app.start(port=3000) å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã¯æ¬¡ã®ã¨ãŠã‚Š:\n1 2 3 4 $ docker-compose build $ docker-compose up -d $ docker exec -it \u0026lt;CONTAINER_ID\u0026gt; bash [IN CONTAINER]# python main.py Slack App è¨­å®š App ä½œæˆ ã¾ãšã¯æ™®é€šã« Slack App ã‚’ä½œæˆã€‚ App Display Name ã€ Default username ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ç©ºæ¬„ã«ãªã£ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã‚’è¨­å®šã—ãªã„ã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ããªã„ã®ã§ã€å¿˜ã‚Œãšè¨­å®šã™ã‚‹ã“ã¨ã€‚\nå‚è€ƒ:\nã€Slackã€‘ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãƒœãƒƒãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“ã¨å‡ºãŸã¨ãã®å¯¾å‡¦æ–¹æ³• | THE SIMPLE Slash Commands 1 2 3 4 5 6 7 8 9 slash_commands: - command: /echo url: https://xxxxxxxxxx.ngrok-free.app/slack/events description: echo should_escape: false - command: /hoge url: https://xxxxxxxxxx.ngrok-free.app/slack/events description: hoge should_escape: false âš ï¸ url ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ /echo ã‚„ /hoge ã§ã¯ãªãä¸€å¾‹ /slack/events ï¼ˆã“ã“ã§ç„¡é§„ã«æ™‚é–“ã‚’æº¶ã‹ã—ã¦ã—ã¾ã£ãŸâ€¦ï¼‰\nå‚è€ƒ: ã‚³ãƒãƒ³ãƒ‰ã®ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã¨å¿œç­” - Slack | Bolt for Python\nOAuth \u0026amp; Permissions å®Ÿéš›ã«å‹•ã‹ã—ã¦ã¿ã‚‹ å…¥åŠ› å®Ÿè¡Œçµæœ ","date":"2023-11-25T17:45:00Z","permalink":"https://yamamoto-yuta.github.io/p/slack-slash-commands-notes/","title":"Slack ã® Slash Commands ä½œæˆãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nFunction Calling ãŒèª¬æ˜ç­‰ã‚’èª­ã‚“ã§ã‚‚ã‚¤ãƒã‚¤ãƒã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§å®Ÿéš›ã«è©¦ã—ã¦ã¿ãŸã€‚ã“ã‚Œã¯ãã®æ™‚ã®ãƒ¡ãƒ¢ã€‚\nä»Šå›ã¯æ¬¡ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ‰‹é †ã‚’ã‚„ã£ã¦ã¿ãŸã€‚\nhttps://platform.openai.com/docs/guides/function-calling\nã¾ãŸã€æ¬¡ã®æ—¥æœ¬èªè§£èª¬è¨˜äº‹ãŒå‚è€ƒã«ãªã£ãŸã€‚\nhttps://dev.classmethod.jp/articles/understand-openai-function-calling/\nã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ä»Šå›ã€å®Ÿè¡Œç’°å¢ƒã¯ Google Colab ã«ã—ãŸã€‚\nã¾ãšã¯ OpenAI ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚\n1 !pip install openai ç¶šã„ã¦ã€å„ç¨®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¨ OpenAI ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’ä½œæˆã€‚\n1 2 3 4 5 6 import json from openai import OpenAI client = OpenAI( api_key=OPENAI_API_KEY ) OpenAI API Key ã¯æ¬¡ã®ãƒšãƒ¼ã‚¸ã§ä½œæˆã§ãã‚‹:\nAPI keys - OpenAI API\nä»Šå›ã€ Function Calling ã®å‹•ä½œç¢ºèªç”¨ã«æ¬¡ã®ãƒ€ãƒŸãƒ¼é–¢æ•°ã‚’åˆ©ç”¨ã—ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 # Example dummy function hard coded to return the same weather # In production, this could be your backend API or an external API def get_current_weather(location, unit=\u0026#34;fahrenheit\u0026#34;): \u0026#34;\u0026#34;\u0026#34;Get the current weather in a given location\u0026#34;\u0026#34;\u0026#34; if \u0026#34;tokyo\u0026#34; in location.lower(): return json.dumps({\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;10\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}) elif \u0026#34;san francisco\u0026#34; in location.lower(): return json.dumps({\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;72\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;fahrenheit\u0026#34;}) elif \u0026#34;paris\u0026#34; in location.lower(): return json.dumps({\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;22\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}) else: return json.dumps({\u0026#34;location\u0026#34;: location, \u0026#34;temperature\u0026#34;: \u0026#34;unknown\u0026#34;}) å…¨ä½“åƒ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ã®å…¨ä½“åƒã¯æ¬¡ã®ã¨ãŠã‚Š:\nï¼ˆAI ãŒï¼‰è³ªå•ã«å¿…è¦ãªé–¢æ•°ã‚’é¸ã³ã€å¼•æ•°ã‚’ä½œæˆã™ã‚‹ ï¼ˆãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒï¼‰é–¢æ•°ã‚’å®Ÿè¡Œ ï¼ˆAI ãŒï¼‰é–¢æ•°çµæœã‚‚å…¥åŠ›ã«å…¥ã‚Œã¦è³ªå•ã«å›ç­”ã™ã‚‹ å¼•ç”¨: [OpenAI] Function calling ã§éŠã‚“ã§ã¿ãŸã‚‰æœ¬è³ªãŒè¦‹ãˆã¦ããŸã®ã§ã¾ã¨ã‚ã¦ã¿ãŸ | DevelopersIO\nSTEP 1 ï½œä¼šè©±ã¨åˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã‚’ãƒ¢ãƒ‡ãƒ«ã«é€ã‚‹ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ï¼ˆæ—¥æœ¬èªã®ã‚³ãƒ¡ãƒ³ãƒˆã¯è‡ªåˆ†ã§è¿½è¨˜ã—ãŸï¼‰:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 # Step 1: send the conversation and available functions to the model # ä¼šè©± messages = [{\u0026#34;role\u0026#34;: \u0026#34;user\u0026#34;, \u0026#34;content\u0026#34;: \u0026#34;What\u0026#39;s the weather like in San Francisco, Tokyo, and Paris?\u0026#34;}] # åˆ©ç”¨å¯èƒ½ãªé–¢æ•° tools = [ { \u0026#34;type\u0026#34;: \u0026#34;function\u0026#34;, \u0026#34;function\u0026#34;: { \u0026#34;name\u0026#34;: \u0026#34;get_current_weather\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Get the current weather in a given location\u0026#34;, \u0026#34;parameters\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;object\u0026#34;, \u0026#34;properties\u0026#34;: { \u0026#34;location\u0026#34;: { \u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;The city and state, e.g. San Francisco, CA\u0026#34;, }, \u0026#34;unit\u0026#34;: {\u0026#34;type\u0026#34;: \u0026#34;string\u0026#34;, \u0026#34;enum\u0026#34;: [\u0026#34;celsius\u0026#34;, \u0026#34;fahrenheit\u0026#34;]}, }, \u0026#34;required\u0026#34;: [\u0026#34;location\u0026#34;], }, }, } ] # ãƒ¢ãƒ‡ãƒ«ã¸æŠ•ã’ã¦å›ç­”ã‚’å–å¾— response = client.chat.completions.create( model=\u0026#34;gpt-3.5-turbo-1106\u0026#34;, messages=messages, tools=tools, tool_choice=\u0026#34;auto\u0026#34;, # auto is default, but we\u0026#39;ll be explicit ) response ã®ä¸­èº«ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚ä»Šå›ã¯ã‚µãƒ³ãƒ•ãƒ©ãƒ³ã‚·ã‚¹ã‚³ã€æ±äº¬ã€ãƒ‘ãƒªã® 3 ã¤ã®éƒ½å¸‚ã®å¤©æ°—ã‚’è¨Šã„ã¦ã„ã‚‹ã®ã§ã€ tool_calls ãŒ 3 ãƒªã‚¯ã‚¨ã‚¹ãƒˆåˆ†ã«ãªã£ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 { \u0026#39;id\u0026#39;: \u0026#39;chatcmpl-xxxxxxxxxx\u0026#39;, \u0026#39;choices\u0026#39;: [ Choice( finish_reason=\u0026#39;tool_calls\u0026#39;, index=0, message=ChatCompletionMessage( content=None, role=\u0026#39;assistant\u0026#39;, function_call=None, tool_calls=[ ChatCompletionMessageToolCall( id=\u0026#39;call_aaaaaaaaaa\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_bbbbbbbbbb\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_cccccccccc\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ) ] ) ) ], \u0026#39;created\u0026#39;: 1700895213, \u0026#39;model\u0026#39;: \u0026#39;gpt-3.5-turbo-1106\u0026#39;, \u0026#39;object\u0026#39;: \u0026#39;chat.completion\u0026#39;, \u0026#39;system_fingerprint\u0026#39;: \u0026#39;fp_xxxxxxxxxx\u0026#39;, \u0026#39;usage\u0026#39;: CompletionUsage( completion_tokens=77, prompt_tokens=88, total_tokens=165 ) } ã“ã®ä¸­ã‹ã‚‰æ¬¡ã® 2 ã¤ã‚’å–ã‚Šå‡ºã™ã€‚\n1 2 response_message = response.choices[0].message tool_calls = response_message.tool_calls æ¬¡ã®å‡¦ç†ã«å…¥ã‚‹å‰ã«ã€ Function Calling ãŒè¦æ±‚ã•ã‚Œã¦ã„ã‚‹ã‹ã®ãƒã‚§ãƒƒã‚¯ãŒå¿…è¦ã€‚\n1 2 3 # Step 2: check if the model wanted to call a function if tool_calls: ... STEP 2 ï½œå®Ÿéš›ã«é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 # Step 3: call the function # Note: the JSON response may not always be valid; be sure to handle errors available_functions = { \u0026#34;get_current_weather\u0026#34;: get_current_weather, } # only one function in this example, but you can have multiple messages.append(response_message) # extend conversation with assistant\u0026#39;s reply # Step 4: send the info for each function call and function response to the model for tool_call in tool_calls: function_name = tool_call.function.name function_to_call = available_functions[function_name] function_args = json.loads(tool_call.function.arguments) function_response = function_to_call( location=function_args.get(\u0026#34;location\u0026#34;), unit=function_args.get(\u0026#34;unit\u0026#34;), ) messages.append( { \u0026#34;tool_call_id\u0026#34;: tool_call.id, \u0026#34;role\u0026#34;: \u0026#34;tool\u0026#34;, \u0026#34;name\u0026#34;: function_name, \u0026#34;content\u0026#34;: function_response, } ) # extend conversation with function response åˆ†è§£ã—ã¦è¦‹ã¦ã„ãã€‚\nåˆ©ç”¨å¯èƒ½ãªé–¢æ•°ã®è¾æ›¸ã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚ä»Šå›ã¯ get_current_weather() ã—ã‹åˆ©ç”¨ã§ããªã„ã®ã§ã€è¾æ›¸å†…ã®ã‚¢ã‚¤ãƒ†ãƒ ã¯ 1 ã¤ã ã‘ã«ãªã‚‹ã€‚\n1 2 3 available_functions = { \u0026#34;get_current_weather\u0026#34;: get_current_weather, } # only one function in this example, but you can have multiple available_functions ã®ä¸­èº«ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚é–¢æ•°ãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦è¾æ›¸ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚\n1 {\u0026#39;get_current_weather\u0026#39;: \u0026lt;function __main__.get_current_weather(location, unit=\u0026#39;fahrenheit\u0026#39;)\u0026gt;} STEP 1 ã§å¾—ãŸ response_message ã‚’ message ã« append ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ STEP 3 ã§æœ€çµ‚çš„ãªå›ç­”ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã™ã‚‹ã€‚\n1 messages.append(response_message) # extend conversation with assistant\u0026#39;s reply ã—ãŸãŒã£ã¦ã€ messages ã®ä¸­èº«ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 [ { \u0026#39;role\u0026#39;: \u0026#39;user\u0026#39;, \u0026#39;content\u0026#39;: \u0026#34;What\u0026#39;s the weather like in San Francisco, Tokyo, and Paris?\u0026#34; }, ChatCompletionMessage( content=None, role=\u0026#39;assistant\u0026#39;, function_call=None, tool_calls=[ ChatCompletionMessageToolCall( id=\u0026#39;call_aaaaaaaaaa\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_bbbbbbbbbb\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_cccccccccc\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ) ] ) ] STEP 1 ã§ä½œæˆã—ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ«ãƒ¼ãƒ—ã§é †æ¬¡ã€å®Ÿéš›ã«é–¢æ•°ã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ã„ãã€‚\n1 2 3 # Step 4: send the info for each function call and function response to the model for tool_call in tool_calls: ... å®Ÿéš›ã«é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹éƒ¨åˆ†ã¯æ¬¡ã®ã‚³ãƒ¼ãƒ‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 # å‘¼ã³å‡ºã™é–¢æ•°ã‚’å–å¾— function_name = tool_call.function.name function_to_call = available_functions[function_name] # é–¢æ•°ã«æ¸¡ã™å¼•æ•°ã‚’å–å¾—ï¼ˆå¼•æ•°ã¯ JSON æ–‡å­—åˆ—ã§æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã®ã§ json.loads() ï¼‰ function_args = json.loads(tool_call.function.arguments) # å®Ÿéš›ã«é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ function_response = function_to_call( location=function_args.get(\u0026#34;location\u0026#34;), unit=function_args.get(\u0026#34;unit\u0026#34;), ) é–¢æ•°ã®å®Ÿè¡Œçµæœã‚’ messages ã¸ append ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œã¯ STEP 3 ã§æœ€çµ‚çš„ãªå›ç­”ã‚’ä½œæˆã™ã‚‹ãŸã‚ã§ã‚ã‚‹ã€‚\n1 2 3 4 5 6 7 8 messages.append( { \u0026#34;tool_call_id\u0026#34;: tool_call.id, \u0026#34;role\u0026#34;: \u0026#34;tool\u0026#34;, \u0026#34;name\u0026#34;: function_name, \u0026#34;content\u0026#34;: function_response, } ) # extend conversation with function response ãƒ«ãƒ¼ãƒ—çµ‚äº†æ™‚ã® messages ã®ä¸­èº«ã¯æ¬¡ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 [{\u0026#39;role\u0026#39;: \u0026#39;user\u0026#39;, \u0026#39;content\u0026#39;: \u0026#34;What\u0026#39;s the weather like in San Francisco, Tokyo, and Paris?\u0026#34;}, ChatCompletionMessage(content=None, role=\u0026#39;assistant\u0026#39;, function_call=None, tool_calls=[ChatCompletionMessageToolCall(id=\u0026#39;call_aaaaaaaaaa\u0026#39;, function=Function(arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39;), type=\u0026#39;function\u0026#39;), ChatCompletionMessageToolCall(id=\u0026#39;call_bbbbbbbbbb\u0026#39;, function=Function(arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39;), type=\u0026#39;function\u0026#39;), ChatCompletionMessageToolCall(id=\u0026#39;call_cccccccccc\u0026#39;, function=Function(arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39;), type=\u0026#39;function\u0026#39;)]), {\u0026#39;tool_call_id\u0026#39;: \u0026#39;call_aaaaaaaaaa\u0026#39;, \u0026#39;role\u0026#39;: \u0026#39;tool\u0026#39;, \u0026#39;name\u0026#39;: \u0026#39;get_current_weather\u0026#39;, \u0026#39;content\u0026#39;: \u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;72\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;fahrenheit\u0026#34;}\u0026#39;}, {\u0026#39;tool_call_id\u0026#39;: \u0026#39;call_bbbbbbbbbb\u0026#39;, \u0026#39;role\u0026#39;: \u0026#39;tool\u0026#39;, \u0026#39;name\u0026#39;: \u0026#39;get_current_weather\u0026#39;, \u0026#39;content\u0026#39;: \u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;10\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;}, {\u0026#39;tool_call_id\u0026#39;: \u0026#39;call_cccccccccc\u0026#39;, \u0026#39;role\u0026#39;: \u0026#39;tool\u0026#39;, \u0026#39;name\u0026#39;: \u0026#39;get_current_weather\u0026#39;, \u0026#39;content\u0026#39;: \u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;temperature\u0026#34;: \u0026#34;22\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;}] STEP 3 ï½œæœ€çµ‚çš„ãªå›ç­”ã‚’ä½œæˆã™ã‚‹ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰:\n1 2 3 4 second_response = client.chat.completions.create( model=\u0026#34;gpt-3.5-turbo-1106\u0026#34;, messages=messages, ) # get a new response from the model where it can see the function response second_response ã®ä¸­èº«:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 { \u0026#39;id\u0026#39;: \u0026#39;chatcmpl-yyyyyyyyyy\u0026#39;, \u0026#39;choices\u0026#39;: [ Choice( finish_reason=\u0026#39;stop\u0026#39;, index=0, message=ChatCompletionMessage( content=\u0026#39;Currently, the weather in San Francisco is 72Â°F, in Tokyo it is 10Â°C, and in Paris it is 22Â°C.\u0026#39;, role=\u0026#39;assistant\u0026#39;, function_call=None, tool_calls=None ) ) ], \u0026#39;created\u0026#39;: 1700895214, \u0026#39;model\u0026#39;: \u0026#39;gpt-3.5-turbo-1106\u0026#39;, \u0026#39;object\u0026#39;: \u0026#39;chat.completion\u0026#39;, \u0026#39;system_fingerprint\u0026#39;: \u0026#39;fp_eeff13170a\u0026#39;, \u0026#39;usage\u0026#39;: CompletionUsage( completion_tokens=29, prompt_tokens=169, total_tokens=198 ) } second_response.choices[0].message.content ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€é–¢æ•°ã®å®Ÿè¡ŒçµæœãŒå›ç­”ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚\n1 \u0026#39;Currently, the weather in San Francisco is 72Â°F, in Tokyo it is 10Â°C, and in Paris it is 22Â°C.\u0026#39; ä½•ãŒå¬‰ã—ã„ã®ã‹ï¼Ÿ ï¼ˆã»ã¼ã»ã¼ã€Œ [OpenAI] Function calling ã§éŠã‚“ã§ã¿ãŸã‚‰æœ¬è³ªãŒè¦‹ãˆã¦ããŸã®ã§ã¾ã¨ã‚ã¦ã¿ãŸ | DevelopersIO ã€ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã§ã¯ã‚ã‚‹ãŒâ€¦ï¼‰\nä¾‹ãˆã°ã€ä»Šå›ã®ã‚ˆã†ã«è‡ªç„¶è¨€èªã§å„éƒ½å¸‚ã®æ°—æ¸©ã‚’å•ã„åˆã‚ã›ã‚‹ä»•çµ„ã¿ã‚’ä½œã‚‹å ´åˆã€ ChatGPT ã ã‘ã§ã¯å„éƒ½å¸‚ã®æ°—æ¸©ã¯ç­”ãˆã‚‰ã‚Œãªã„ã®ã§ API ç­‰ã§åˆ¥é€”æƒ…å ±ã‚’å–å¾—ã—ã¦ãã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆè£œè¶³ï¼‰ã€‚ãã®ãŸã‚ã€å•ã„åˆã‚ã›æ–‡ã‹ã‚‰ API ç­‰ã¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿…è¦ãªæƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã€‚\nã€Œ What\u0026rsquo;s the weather like in San Francisco, Tokyo, and Paris? ã€ã¨ã„ã†è³ªå•ã®å ´åˆã€ï¼ˆã©ã®ã‚ˆã†ãªæƒ…å ±ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¿…è¦ã‹ã«ã‚ˆã‚‹ãŒï¼‰ã€Œ San Francisco ã€ã€Œ Tokyo ã€ã€Œ Paris ã€ã® 3 ã¤ã®æƒ…å ±ã‚’æŠ½å‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nFunction Calling ãŒç™»å ´ã™ã‚‹ã¾ã§ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å·¥å¤«ã™ã‚‹ã“ã¨ã§æƒ…å ±ã‚’æŠ½å‡ºã—ã‚„ã™ãã—ã¦ã„ãŸã€‚\nä¾‹ãˆã°æ¬¡ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”¨ã„ãŸã¨ã™ã‚‹ã€‚\n1 2 3 4 5 6 7 8 æ¬¡ã®å•ã„åˆã‚ã›æ–‡ã‹ã‚‰éƒ½å¸‚ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¦ãã ã•ã„: ## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ - éƒ½å¸‚1 - éƒ½å¸‚2 ## å•ã„åˆã‚ã›æ–‡ What\u0026#39;s the weather like in San Francisco, Tokyo, and Paris? ã™ã‚‹ã¨ã€ ChatGPT ã¯æ¬¡ã®ã‚ˆã†ã«å›ç­”ã—ã¦ãã‚Œã‚‹ã€‚\n1 2 3 4 ## å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ - San Francisco - Tokyo - Paris ä»Šå›ã®æ°—æ¸©ã®ä¾‹ã¯å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒã‚·ãƒ³ãƒ—ãƒ«ã ã£ãŸã®ã§æ¯”è¼ƒçš„æŒ‡å®šã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§å›ç­”ã—ã¦ãã‚Œã¦ã„ã‚‹ãŒã€è¤‡é›‘ãªå‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã ã£ãŸã‚Šã™ã‚‹ã¨æŒ‡å®šã—ãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«ã—ãŸãŒã£ã¦ãã‚Œãªã‹ã£ãŸã‚Šã™ã‚‹ã€‚\nFunction Calling ã‚’ä½¿ãˆã°ã€å¼•æ•°ã®ä»•æ§˜ã‚’æŒ‡å®šã™ã‚Œã°ãã‚Œã«åˆã†ã‚ˆã†ã«æƒ…å ±ã‚’æŠ½å‡ºã—ã¦ãã‚Œã‚‹ã€‚ä¾‹ãˆã°ä»Šå›ã®å ´åˆã€æ¬¡ã®ã‚ˆã†ã«æƒ…å ±ã‚’æŠ½å‡ºã—ã¦ãã‚Œã¦ã„ãŸã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 [ ChatCompletionMessageToolCall( id=\u0026#39;call_aaaaaaaaaa\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;San Francisco\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_bbbbbbbbbb\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Tokyo\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ), ChatCompletionMessageToolCall( id=\u0026#39;call_cccccccccc\u0026#39;, function=Function( arguments=\u0026#39;{\u0026#34;location\u0026#34;: \u0026#34;Paris\u0026#34;, \u0026#34;unit\u0026#34;: \u0026#34;celsius\u0026#34;}\u0026#39;, name=\u0026#39;get_current_weather\u0026#39; ), type=\u0026#39;function\u0026#39; ) ] è£œè¶³: ä»Šã¯ Browse with Bing ã®ãŠã‹ã’ã§ ChatGPT å˜ä½“ã§ã®å›ç­”ãŒå¯èƒ½ã«ãªã£ã¦ã„ã‚‹ ç¾åœ¨ã§ã¯ ChatGPT ã«ã€Œ Browse with Bing ã€æ©Ÿèƒ½ãŒæ­è¼‰ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ LLM å˜ä½“ã§ã‚‚å›ç­”ãŒå¯èƒ½ã¨ãªã£ã¦ã„ã‚‹ã€‚\nä¾‹ãˆã°ã€ä»Šå›ã®ã€Œ What\u0026rsquo;s the weather like in San Francisco, Tokyo, and Paris? ã€ã¨ã„ã†è³ªå•ã‚’ ChatGPT (ChatGPT Plus åŠ å…¥ç‰ˆ) ã«æŠ•ã’ã¦ã¿ãŸã¨ã“ã‚ã€æ¬¡ã®å›ç­”ãŒå¾—ã‚‰ã‚ŒãŸ:\nç¾åœ¨ã®å¤©æ°—ã«ã¤ã„ã¦ã€ä»¥ä¸‹ã®éƒ½å¸‚ã®æƒ…å ±ã¯æ¬¡ã®é€šã‚Šã§ã™ï¼š\nã‚µãƒ³ãƒ•ãƒ©ãƒ³ã‚·ã‚¹ã‚³ï¼ˆã‚«ãƒªãƒ•ã‚©ãƒ«ãƒ‹ã‚¢å·ã€ã‚¢ãƒ¡ãƒªã‚«ï¼‰ï¼šæ°—æ¸©ã¯ 57Â°Fï¼ˆç´„ 14Â°Cï¼‰ã§ã€éƒ¨åˆ†çš„ã«é›²ãŒã‚ã‚Šã¾ã™ã€‚ä»Šå¾Œã®äºˆå ±ã§ã¯æœ€é«˜æ°—æ¸©ãŒ 66Â°Fï¼ˆç´„ 19Â°Cï¼‰ã€æœ€ä½æ°—æ¸©ãŒ 49Â°Fï¼ˆç´„ 9Â°Cï¼‰ã¨ãªã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚é¢¨é€Ÿã¯åŒ—æ±ã‹ã‚‰ 5mphï¼ˆç´„ 8km/hï¼‰ã§ã™[â€]ã€‚\næ±äº¬ï¼ˆæ—¥æœ¬ï¼‰ï¼šæ°—æ¸©ã¯ 60Â°Fï¼ˆç´„ 16Â°Cï¼‰ã§ã€æ¶¼ã—ã„ã§ã™ã€‚ä»Šå¾Œã®äºˆå ±ã§ã¯æœ€é«˜æ°—æ¸©ãŒ 76Â°Fï¼ˆç´„ 24Â°Cï¼‰ã€æœ€ä½æ°—æ¸©ãŒ 48Â°Fï¼ˆç´„ 9Â°Cï¼‰ã¨ãªã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚é¢¨é€Ÿã¯å—ã‹ã‚‰ 9mphï¼ˆç´„ 14km/hï¼‰ã§ã™[â€]ã€‚\nãƒ‘ãƒªï¼ˆãƒ•ãƒ©ãƒ³ã‚¹ï¼‰ï¼šæ°—æ¸©ã¯ 41Â°Fï¼ˆç´„ 5Â°Cï¼‰ã§ã€ä¸€éƒ¨ã«é›²ãŒã‚ã‚Šã¾ã™ã€‚ä½“æ„Ÿæ¸©åº¦ã¯ 39Â°Fï¼ˆç´„ 4Â°Cï¼‰ã§ã™ã€‚ä»Šå¾Œã®äºˆå ±ã§ã¯æœ€é«˜æ°—æ¸©ãŒ 56Â°Fï¼ˆç´„ 13Â°Cï¼‰ã€æœ€ä½æ°—æ¸©ãŒ 40Â°Fï¼ˆç´„ 4Â°Cï¼‰ã¨ãªã‚‹è¦‹è¾¼ã¿ã§ã™ã€‚é¢¨é€Ÿã¯åŒ—è¥¿ã‹ã‚‰ 3mphï¼ˆç´„ 5km/hï¼‰ã§ã™[â€]ã€‚\nã“ã‚Œã‚‰ã®æƒ…å ±ã¯ã€å„éƒ½å¸‚ã®ç¾åœ¨ã®æ°—è±¡æ¡ä»¶ã‚’åæ˜ ã—ã¦ã„ã¾ã™ã€‚å¤©å€™ã¯å¤‰ã‚ã‚Šã‚„ã™ã„ã®ã§ã€æœ€æ–°ã®æƒ…å ±ã‚’å¾—ã‚‹ãŸã‚ã«ã¯ã€å®šæœŸçš„ã«å¤©æ°—äºˆå ±ã‚’ç¢ºèªã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚\n","date":"2023-11-25T11:54:00Z","permalink":"https://yamamoto-yuta.github.io/p/function-calling-memo/","title":"Function Calling è§¦ã£ã¦ã¿ãŸãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nå…ˆæ—¥ã€ãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã€Œ CSV2MD Shortcut ã€ã® v0.2.0 ã‚’ãƒªãƒªãƒ¼ã‚¹ã—ãŸ ã€‚ã“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯æ–°æ©Ÿèƒ½ã¨ã—ã¦ Popup ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã—ãŸã€‚ v0.1.0 ã§ã¯ BSW ã«ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›å‡¦ç†ã‚’å®Ÿè£…ã—ã¦ã„ãŸã€‚ Popup ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã«ã‚ãŸã£ã¦ãã®å‡¦ç†ã‚’ BSW ã‹ã‚‰åˆ‡ã‚Šå‡ºãã†ã¨ã—ãŸã€‚ãŒã€ã†ã¾ãã„ã‹ãªã‹ã£ãŸâ€¦ã€‚ ã“ã®è¨˜äº‹ã§ã¯ã€ãã®ã¨ãã®è©¦è¡ŒéŒ¯èª¤ã‚’ãƒ­ã‚°ã¨ã—ã¦æ®‹ã™ã€‚ è©²å½“ issue:\nhttps://github.com/yamamoto-yuta/csv2md-shortcut/issues/35\næ¤œè¨¼ç”¨ãƒªãƒã‚¸ãƒˆãƒª:\nhttps://github.com/yamamoto-yuta/chrome-extension-injected-code-debug\nå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®è¨˜è¼‰:\nFor the func key, you can pass in a TS function from your project. It will be transpiled into JS when your extension bundles. You may also use the files key to inject a file from the root of the built bundle.\nã“ã‚Œã‚’èª­ã‚€é™ã‚Šã€ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã«æ‰‹ã‚’åŠ ãˆã‚‹ã—ã‹ç„¡ã•ãã†â€¦ï¼Ÿï¼ˆã§ã‚ã‚Œã°ã€ãã‚Œã¯ç®¡ç†é¢å€’ãã•ããªã‚Šãã†ãªã®ã§ã‚„ã‚‰ãªã„æ–¹ãŒè‰¯ã•ãã†â€¦ï¼‰\n","date":"2023-08-05T15:57:00Z","permalink":"https://yamamoto-yuta.github.io/p/executing-functions-from-other-files-in-executescript/","title":"executeScript() ã§å‘¼ã¶é–¢æ•°ã®ä¸­ã§åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã—ãŸã„"},{"content":" âœï¸ ç·¨é›†\n2024/06/30 ã« v1.0.0 ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã®ã§ã€ä»¥å¾Œã¯ README ã®æ‰‹é †ã§ OKã€‚\nhttps://github.com/ShotaroKataoka/ls-Improved\n2024/06/29ä»¥å‰ã®æ–¹æ³• ã‚³ãƒ¼ãƒ‰ã¯ã“ã“ https://github.com/ShotaroKataoka/ls-Improved/tree/develop-rust-rewrite\nManual å…¬å¼ GitHub ã® Releases ãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£å‡ã—ã¦ã€lsi ã‚’ä½¿ã„ãŸã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ç§»å‹• path/to/lsi-** ã§å‹•ã æ¯å› path/to/lsi-** ã¨æ‰“ã¤ã®ã¯é¢å€’ãã•ã„ã®ã§ alias ã‚’ç™»éŒ²ã—ã¦ãŠãã¨è‰¯ã„ã€‚\napt æ‰‹é † PPA ãƒªãƒã‚¸ãƒˆãƒª:\nhttps://github.com/ShotaroKataoka/ppa\nGPG éµã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ 1 curl -s --compressed \u0026#34;https://ShotaroKataoka.github.io/ppa/ubuntu/KEY.gpg\u0026#34; | gpg --dearmor | tee /etc/apt/trusted.gpg.d/ls_improved_ppa.gpg PPA ã‚’è¿½åŠ  1 echo \u0026#34;deb [signed-by=/etc/apt/trusted.gpg.d/ls_improved_ppa.gpg] https://ShotaroKataoka.github.io/ppa/ubuntu ./\u0026#34; | tee /etc/apt/sources.list.d/ls_Improved.list ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« 1 apt-get update \u0026amp;\u0026amp; apt-get install ls-improved æ¤œè¨¼ç”¨ç’°å¢ƒ Dockerfile:\n1 2 3 4 5 FROM ubuntu:20.04 RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \u0026amp;\u0026amp; apt-get install -y \\ curl \\ gpg docker-compose.yml\n1 2 3 4 5 6 7 version: \u0026#34;3.8\u0026#34; services: ubuntu: build: . image: ubuntu-apt-install-sandbox container_name: ubuntu tty: true å‚è€ƒè¨˜äº‹ .deb ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã€GitHub ã§ PPA ã‚’ãƒ›ã‚¹ãƒˆã—ã¦ã€Debian ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ–¹æ³•ï¼ˆãã® 4: ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã—ãŸ PPA ã‹ã‚‰ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ Debian ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ï¼‰ï½œ Ryo Nakano gcloud CLI ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ |Â Google Cloud ","date":"2023-07-23T14:50:00Z","permalink":"https://yamamoto-yuta.github.io/p/rust-ls-improved-installation-notes/","title":"Rust ç‰ˆ ls-Improved å°å…¥ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nå‰ã‹ã‚‰æ°—ã«ãªã£ã¦ã„ãŸãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã®é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ŒPlasmoã€ã‚’è§¦ã£ã¦ã¿ãŸã®ã§ã€ãã®æ™‚ã®ãƒ¡ãƒ¢ã€‚\nåŸºæœ¬çš„ã«ä¸‹è¨˜ã®è¨˜äº‹ã‚’ãªãã‚‹å½¢ã§è§¦ã£ã¦ã„ã£ãŸã€‚\nãƒ–ãƒ©ã‚¦ã‚¶æ‹¡å¼µæ©Ÿèƒ½ã‚’ä½œã‚‹ãŸã‚ã® React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€Plasmoã€\nãªã®ã§ã€ã“ã“ã§ã¯ä¸Šè¨˜è¨˜äº‹ã‚’ãªãã£ãŸéš›ã«ã¤ã¾ã¥ã„ãŸç®‡æ‰€ã‚„å€‹äººçš„ãªæ‰€æ„Ÿãªã©ã«ã¤ã„ã¦è¨˜ã™ã€‚\nç’°å¢ƒæ§‹ç¯‰ã‚’ Docker ã§ã‚„ã£ã¦ã¿ãŸ ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒãŒã”ã¡ã‚ƒã”ã¡ã‚ƒã™ã‚‹ã®ãŒå€‹äººçš„ã«å«Œã ã£ãŸã®ã§ã€ Docker ã§ç’°å¢ƒæ§‹ç¯‰ã—ã¦ã¿ãŸã€‚\nä¸Šè¨˜è¨˜äº‹ã‚„å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã¯ç‰¹ã« Docker ã«ã¤ã„ã¦ã®è¨€åŠã¯ç„¡ã‹ã£ãŸãŒã€ Node.js ãŒã‚ã‚Œã°ååˆ†ã ã£ãŸã®ã§é©å½“ãª Node.js ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒã£ã¦ã“ã‚Œã°ã„ã‘ã‚‹ã¯ãšã€‚\nã¡ãªã¿ã«ã€ Plasmo ã®ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶ã¨ã—ã¦ Node.js ãŒ 16.14 ä»¥é™ã§ã‚ã‚‹ã“ã¨ãŒæŒ™ã’ã‚‰ã‚Œã¦ã„ãŸã€‚\nNode.js 16.14.x or later\nå¼•ç”¨: https://docs.plasmo.com/framework#system-requirements\nãŸã ã€ Node.js ã®ãƒªãƒªãƒ¼ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã«ã‚ˆã‚‹ã¨ 16 ç³»ã¯ä»Šå¹´ï¼ˆè¨˜äº‹åŸ·ç­†æ™‚ã¯ 2023 å¹´ 6 æœˆ 4 æ—¥ï¼‰ã® 9 æœˆã§ End-of-life ã¨ã®ã“ã¨ã ã£ãŸã®ã§ã€ä»Šå›ã¯ 18 ç³»ã‚’ä½¿ã£ã¦ã¿ã‚‹ã“ã¨ã«ã—ãŸã€‚\nNode.js ã®ãƒªãƒªãƒ¼ã‚¹ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«:\nhttps://github.com/nodejs/Release#release-schedule\nä»¥ä¸Šã‚’è¸ã¾ãˆã¦ä½œæˆã—ãŸ docker-compose.yml ãŒä¸‹è¨˜ã®é€šã‚Š:\n1 2 3 4 5 6 7 8 9 version: \u0026#34;3\u0026#34; services: app: image: node:18.16.0 volumes: - .:/usr/src/app working_dir: /usr/src/app tty: true Plasmo ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆã¯ docker compose run ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ã¦ä¸‹è¨˜ã§è¡Œãˆã‚‹ã€‚ãªãŠã€ Plasmo ã¯ pnpm ã‚³ãƒãƒ³ãƒ‰ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¦ã„ãŸãŒã€ Node.js ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ãªã‹ã£ãŸã®ã§ä»Šå›ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹ npm ã‚³ãƒãƒ³ãƒ‰ã§é€²ã‚ãŸã€‚ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã®ãŸã‚ã«ã‚³ãƒ³ãƒ†ãƒŠãŒæºœã¾ã£ã¦ã„ã‹ãªã„ã‚ˆã† --rm ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã¦ã„ã‚‹ã€‚\n1 $ docker compose run --rm app npm create plasmo ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆã®éš›ã«è‰²ã€…è¨Šã‹ã‚ŒãŸãŒã€ä»Šå›ã¯æ‹¡å¼µæ©Ÿèƒ½ã®åå‰ã‚’ learn-plasmo ã«ã—ãŸä»¥å¤–ã¯æ—¢å®šå€¤ã§å›ç­”ã—ãŸã€‚\nDevelopment server ã®èµ·å‹•ã‚‚åŒæ§˜ã«ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§è¡Œãˆã‚‹ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ learn-plasmo/ ï¼‰ã«ç§»å‹•ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ç‚¹ã«æ³¨æ„ã€‚\n1 $ docker compose run --rm app bash -c \u0026#34;cd learn-plasmo \u0026amp;\u0026amp; npm run dev\u0026#34; è¨˜äº‹ä¸­ã« Storage API ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ãã ã‚ŠãŒã‚ã‚‹ãŒã€ãã‚Œã‚‚ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§è¡Œãˆã‚‹:\n1 $ docker compose run --rm app bash -c \u0026#34;cd learn-plasmo \u0026amp;\u0026amp; npm install @plasmohq/storage react-hook-form\u0026#34; ä»–ã«ã‚‚ Messaging API ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«ã‚‚è¿½åŠ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãã ã‚ŠãŒã‚ã£ãŸãŒã€ãã‚Œã‚‚ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã§è¡Œãˆã‚‹:\n1 $ docker compose run --rm app bash -c \u0026#34;cd learn-plasmo \u0026amp;\u0026amp; npm install @plasmohq/messaging\u0026#34; ã¤ã¾ã¥ã„ãŸç‚¹ãƒ¡ãƒ¢ ã€Œ Storage ã‚’åˆ©ç”¨ã™ã‚‹ ã€ã®ã¨ã“ã‚ã§ãªãœã‹å…¥åŠ›å€¤ãŒä¿å­˜ã•ã‚Œãªãã¦ã¤ã¾ã¥ã„ãŸãŒã€ä¸€åº¦ Production build ã§å‹•ã‹ã—ãŸå¾Œ Development server ã«æˆ»ã£ã¦ããŸã‚‰ã¡ã‚ƒã‚“ã¨ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚åŸå› ã¯ä¸æ˜â€¦ï¼ˆè¦æ¤œè¨¼ï¼‰ ã€Œ New Tab Page ã€ã®ã¨ã“ã‚ã¯è‡ªåˆ†ãŒ Vivaldi ãƒ¦ãƒ¼ã‚¶ã ã£ãŸã›ã„ã§ãã‚‚ãã‚‚ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ããªã‹ã£ãŸ ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´æ™‚ã¯ã€Œãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ãŒèµ°ã‚‹ â†’ æ‹¡å¼µæ©Ÿèƒ½ã‚’å†èª­ã¿è¾¼ã¿ã€ã®æ‰‹é †ã‚’è¸ã‚€ã¨åæ˜ ã•ã‚Œã‚‹ å€‹äººçš„ãªæ‰€æ„Ÿ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸‹è¨˜ã®æ©Ÿèƒ½ãŒä»˜ã„ã¦ã‚‹ã®ãŒè‰¯ã‹ã£ãŸ:\ndev/prod ã®ãƒ“ãƒ«ãƒ‰åˆ†ã‘ ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ ã¾ãŸã€ä»Šå›ã¯è©¦ã•ãªã‹ã£ãŸãŒä¸‹è¨˜ã®æ©Ÿèƒ½ã‚‚è‰¯ã•ãã†ã ã£ãŸ:\nChrome Web Store ã¸ã®è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ Google Analytics ã¨é€£æºã§ãã‚‹ã£ã½ã„ï¼ˆâ†’ å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ ï¼‰ ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚‚ã“ã¾ã‚ã«ã•ã‚Œã¦ãã†ãªã®ã§ã€ã“ã‚Œã‹ã‚‰æ‹¡å¼µæ©Ÿèƒ½ä½œã‚‹ã¨ãã¯ Plasmo ä½¿ã†ã‚ˆã†ã«ã—ã¦ã¿ã‚ˆã†ã‹ãªâ€¦\n","date":"2023-06-04T12:54:00Z","permalink":"https://yamamoto-yuta.github.io/p/memo-on-trying-plasmo/","title":"Plasmo è§¦ã£ã¦ã¿ãŸãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã„ã¤ã‚‚ä½¿ã£ã¦ã‚‹ Slack å‘ã‘çµµæ–‡å­—ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼:\nçµµæ–‡å­—ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ - Slack å‘ã‘çµµæ–‡å­—ã‚’ç„¡æ–™ã§ç°¡å˜ç”Ÿæˆ\nãƒªãƒã‚¸ãƒˆãƒªã‚’è¦‹ã¦ã¿ã‚‹ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã« Python ã‚’ç”¨ã„ã¦ãŠã‚Šã€ãã®ä¸­ã§ emojilib ã¨ã„ã†è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ç”¨ã„ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸã€‚\nãã“ã§ emojilib ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ emojilib ã¯ libemoji ã¨ã„ã† C/C++ è£½ã®è‡ªä½œãƒ©ã‚¤ãƒ–ãƒ©ãƒªã® Python ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã„ã†ã“ã¨ãŒåˆ†ã‹ã£ãŸã€‚\nemojilib ã‚’å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã—ãŸ Dockerfile ã‚’ä¸‹è¨˜ã«ç¤ºã™ã€‚ emojilib è‡ªä½“ã¯ pip install ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã®ã ãŒã€ libemoji ã‚’å‹•ã‹ã™ãŸã‚ä¾å­˜ãŒ ã„ãã¤ã‹ã‚ã£ãŸ ã®ã§åˆ¥é€” apt-get install ã§å…¥ã‚Œã¦ã„ã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 FROM python:3.7 RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y RUN apt-get install -y \\ git \\ cmake \\ g++ \\ libfontconfig1-dev \\ libx11-dev \\ libxcomposite-dev \\ libgl1-mesa-dev \\ libglu1-mesa-dev \\ freeglut3-dev RUN pip install --upgrade pip RUN pip install emojilib --extra-index-url https://repo.fury.io/emoji-gen/ ","date":"2023-05-07T16:08:00Z","permalink":"https://yamamoto-yuta.github.io/p/how-slack-emoji-generator-works/","title":"ã„ã¤ã‚‚ä½¿ã£ã¦ã‚‹Slackå‘ã‘çµµæ–‡å­—ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒã©ã†ã‚„ã£ã¦çµµæ–‡å­—ã‚’ç”Ÿæˆã—ã¦ã‚‹ã‹èª¿ã¹ã¦ã¿ãŸãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã‚„ã‚ŠãŸã„ã“ã¨ Slack API çµŒç”±ã§ Slack ã¸çµµæ–‡å­—ã‚’è¿½åŠ ã—ãŸã„\nèª¿ã¹ãŸã“ã¨ æ–¹é‡ 1: Slack API ã® admin.emoji.add ã‚’åˆ©ç”¨ã™ã‚‹ å…¬å¼ã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹çµµæ–‡å­—è¿½åŠ ç”¨ APIã€‚\nå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://api.slack.com/methods/admin.emoji.add\nãŸã ã—ã€çµå±€ã“ã® API ã¯ä½¿ãˆãªã‹ã£ãŸã€‚ç†ç”±ã¯ã“ã® API ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ Slack App ã« admin.teams:write ã¨ã„ã†æ¨©é™ã‚’ä»˜ä¸ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸã‹ã‚‰ã€‚\nadmin.teams:write ã«ã¤ã„ã¦ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: https://api.slack.com/scopes/admin.teams:write\nã“ã‚Œã«ã¯æ¬¡ã®å•é¡ŒãŒã‚ã£ãŸã®ã§ä»Šå›ã¯æ–¹é‡ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ãŸ:\nAdmin API ã¯å€‹ã€…ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã¯ãªãçµ„ç¹”å…¨ä½“ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã€ãŸã çµµæ–‡å­—ã‚’è¿½åŠ ã™ã‚‹ã ã‘ã®ç”¨é€”ã§ä»˜ä¸ã™ã‚‹ã«ã¯ä¸é©å½“ãªãŸã‚ ãã‚‚ãã‚‚ Enterprise ç‰ˆã§ãªã„ã¨åˆ©ç”¨ã§ããªã„ãŸã‚ æ–¹é‡ 2: ä¸€èˆ¬å…¬é–‹ã•ã‚Œã¦ã„ãªã„ API /api/emoji.add ã‚’åˆ©ç”¨ã™ã‚‹ ã©ã†ã‚„ã‚‰ Slack ã«ã¯ä¸€èˆ¬å…¬é–‹ã•ã‚Œã¦ã„ãªã„ API ãŒã„ãã¤ã‹ã‚ã‚‹ã‚‰ã—ãã€ãã®ä¸­ã®ä¸€ã¤ã§ã‚ã‚‹ /api/emoji.add ã‚’åˆ©ç”¨ã™ã‚Œã°çµµæ–‡å­—ã®è¿½åŠ ãŒå¯èƒ½ã‚‰ã—ã„:\nå‚è€ƒ: https://github.com/slackhq/slack-api-docs/issues/28#issuecomment-424195796\nã“ã® API ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãŒã„ãã¤ã‹ã‚ã‚‹ã‚ˆã†ã ã£ãŸã®ã§ã€ãã‚Œã‚‰ã‚’å‚è€ƒã« API ã‚’å©ã„ã¦ã¿ãŸã€‚ API ã‚’å©ãæ‰‹é †ã¯æ¬¡ã®é€šã‚Šã€‚\n/api/emoji.add API ã‚’å©ãæ‰‹é † 1. ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥æ‰‹ã™ã‚‹ çµµæ–‡å­—ã‚’è¿½åŠ ã—ãŸã„ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’é–‹ã é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¿ãƒ–ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ 1 2 3 JSON.parse(localStorage.localConfig_v2).teams[ document.location.pathname.match(/^\\/client\\/(T[A-Z0-9]+)/)[1] ].token; å¼•ç”¨: https://github.com/jackellenberger/emojme/blob/master/README.md#cookie-token-one-liner\nxoxc-xxxxxxxxxx ã¨ã„ã£ãŸå½¢å¼ã®ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¿”ã£ã¦ãã‚‹ã¯ãšã€‚\n2. Cookie ã‚’å…¥æ‰‹ã™ã‚‹ https://\u0026lt;TEAM_ID\u0026gt;.slack.com/customize/emoji ã‚’é–‹ãï¼ˆãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‚’é–‹ã„ãŸçŠ¶æ…‹ã§ã€Œä»¥ä¸‹ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨é£›ã¹ã‚‹ï¼‰ é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã‚’é–‹ãã€ã€Œãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã€ã‚¿ãƒ–ã‚’é–‹ã emoji ã¨ã„ã†ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’é¸æŠã™ã‚‹ ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã® cookie: ã®å€¤ãŒå…¥æ‰‹ã—ãŸã„ Cookie ï¼ˆã“ã®å€¤ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ãã€ã€Œå³ã‚¯ãƒªãƒƒã‚¯ \u0026gt; ã€å€¤ã‚’ã‚³ãƒ”ãƒ¼ã€ã€ã ã¨ã‚³ãƒ”ãƒ¼å¾Œã®æ–‡å­—åˆ—ã«æ—¥æœ¬èªãŒæ··ã˜ã£ã¦å¾Œã§å›°ã‚‹ã®ã§ã€ç¯„å›²é¸æŠã§ã‚³ãƒ”ãƒ¼ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼‰ 3. API ã‚’å©ã API ã‚’å©ãã‚³ãƒ¼ãƒ‰:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 import requests TOKEN = \u0026#34;xoxc-xxxxxxxxxx\u0026#34; # ãƒˆãƒ¼ã‚¯ãƒ³ COOKIE = \u0026#34;xxxxxxxxxx\u0026#34; # Cookie team_name = \u0026#34;xxxxxxxxxx\u0026#34; # ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ãƒãƒ¼ãƒ å emoji_name = \u0026#34;emoji\u0026#34; # çµµæ–‡å­—ã®åå‰ emoji_img_filepath = \u0026#34;./emoji.png\u0026#34; # çµµæ–‡å­—ã®ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ URL_ADD = \u0026#34;https://{team_name}.slack.com/api/emoji.add\u0026#34; r = requests.post( URL_ADD.format(team_name=team_name), headers = {\u0026#39;Cookie\u0026#39;: COOKIE}, data = { \u0026#39;mode\u0026#39;: \u0026#39;data\u0026#39;, \u0026#39;name\u0026#39;: emoji_name, \u0026#39;token\u0026#39;: TOKEN }, files={\u0026#39;image\u0026#39;: open(emoji_img_filepath, \u0026#39;rb\u0026#39;)} ) æ¬¡ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¦ã„ã‚Œã°æˆåŠŸ:\n1 {\u0026#34;ok\u0026#34;:true} æ®‹ã‚‹èª²é¡Œ ãƒˆãƒ¼ã‚¯ãƒ³ã¨ Cookie ã®å…¥æ‰‹ã‚’è‡ªå‹•ã§ã§ããªã„ã‹ï¼Ÿ ä½™è«‡ /api/emoji.add ã® xoxb ãƒˆãƒ¼ã‚¯ãƒ³ã§ã®åˆ©ç”¨ã«ã¤ã„ã¦ /api/emoji.add ã‚’ xoxb ãƒˆãƒ¼ã‚¯ãƒ³ã§åˆ©ç”¨ã§ãã‚‹ã‚ˆã†æ±‚ã‚ã‚‹ Issue ãŒ 2019 å¹´ 1 æœˆã«å»ºã¦ã‚‰ã‚Œã¦ã„ã‚‹ãŒã€2023 å¹´ 5 æœˆç¾åœ¨ã€ã¾ã  Open ãªã¾ã¾ã§ã‚ã‚‹ã€‚\nè©²å½“ Issue: https://github.com/slackhq/slack-api-docs/issues/95\nxoxc ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§å…¥æ‰‹ã™ã‚‹ https://\u0026lt;TEAM_ID\u0026gt;.slack.com/customize/emoji ãƒšãƒ¼ã‚¸ã‚’ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ã“ã¨ã§ xoxc ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å…¥æ‰‹ã—ã¦ã„ã‚‹ä¾‹ã‚’ç´¹ä»‹ã—ã¦ã„ã‚‹ è¨˜äº‹ ã‚’è¦‹ã¤ã‘ãŸã€‚\nè©²å½“ã‚³ãƒ¼ãƒ‰: https://github.com/smashwilson/slack-emojinator/blob/fbcf759ebbda8bd37b77c91362edde9fd3e0c05a/upload.py#L81-L94\nã—ã‹ã—ã€ã‚„ã£ã¦ã¿ãŸãŒã†ã¾ãã„ã‹ãªã‹ã£ãŸï¼ˆ api_token: ã®å€¤ãŒ \u0026quot;\u0026quot; ã ã£ãŸï¼‰ã€‚ã‚„ã£ã¦ã¿ãŸå½“æ™‚ã¯ã¾ã ãƒˆãƒ¼ã‚¯ãƒ³ã‚„ Cookie ã®å…¥æ‰‹ãªã©ãŒæ‰‹æ¢ã‚Šã®çŠ¶æ…‹ã ã£ãŸã®ã§ã€ãã‚ŒãŒåŸå› ã§ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã‹ã‚‚â€¦ï¼Ÿ\nå‚è€ƒ Slack ã§çµµæ–‡å­—ã‚’è¿½åŠ ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½œã‚ã†ã¨ã—ãŸã¨ãã«èª¿ã¹ãŸã“ã¨ Slack Custom Emoji ã‚’è¿½åŠ ã™ã‚‹éå…¬é–‹ API /api/emoji.add | CodeNote smashwilson/slack-emojinator: Bulk upload emoji into Slack Fauntleroy/neutral-face-emoji-tools: Utilities that make life as a Slack emoji addict a little easier. jackellenberger/emojme: very powerful very stupid Slack emoji tools, holy cow! ","date":"2023-05-06T16:56:00Z","permalink":"https://yamamoto-yuta.github.io/p/api-add-custom-emoji-to-slack/","title":"APIçµŒç”±ã§Slackã¸ã‚«ã‚¹ã‚¿ãƒ çµµæ–‡å­—ã‚’è¿½åŠ ã§ããªã„ã‹èª¿æŸ»ã—ãŸã¨ãã®ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã€ŒQ-Q ãƒ—ãƒ­ãƒƒãƒˆã€ã£ã¦ä½•ï¼Ÿ 2 ã¤ã®ç¢ºç‡åˆ†å¸ƒã®åˆ†ä½æ•°ã‚’äº’ã„ã«ãƒ—ãƒ­ãƒƒãƒˆã—ã¦ï¼Œä¸¡è€…ãŒã©ã®ãã‚‰ã„é¡ä¼¼ã—ãŸç¢ºç‡åˆ†å¸ƒãªã®ã‹ã‚’å¯è¦–åŒ–ã™ã‚‹æ‰‹æ³•ï¼\nç¸¦è»¸ã«èª¿ã¹ãŸã„ç¢ºç‡åˆ†å¸ƒã®åˆ†ä½æ•°ï¼Œæ¨ªè»¸ã«ç†è«–åˆ†å¸ƒã®ç¢ºç‡å¯†åº¦é–¢æ•°ã®é€†é–¢æ•°ã‚’ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ï¼åˆ†å¸ƒãŒé¡ä¼¼ã—ã¦ã„ã‚Œã° $y=x$ çš„ãªç›´å‰ä¸Šã«ãƒ—ãƒ­ãƒƒãƒˆã•ã‚Œã‚‹ï¼\nQ-Q ãƒ—ãƒ­ãƒƒãƒˆã®ä¸€ä¾‹:\nå¼•ç”¨: ã€Pythonã€‘æ­£è¦åˆ†å¸ƒã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚’èª¿ã¹ã‚‹æ‰‹æ³• 3 ç¨® | ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹æƒ…å ±å±€\nQ-Q ãƒ—ãƒ­ãƒƒãƒˆã®ç¸¦è»¸ï¼Œæ¨ªè»¸ã®é–¢ä¿‚ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã«ã—ãŸã‚‚ã®:\nå¼•ç”¨: ã€çµ±è¨ˆå­¦ã€‘Q-Q ãƒ—ãƒ­ãƒƒãƒˆã®ä»•çµ„ã¿ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç†è§£ã™ã‚‹ã€‚ - Qiita\nã‚„ã£ã¦ã¿ã‚‹ æ¤œè¨¼ã‚³ãƒ¼ãƒ‰å…¨ä½“ã¯ã‚³ãƒãƒ©:\nGoogle Colab: https://colab.research.google.com/drive/1wSn2s6tbKpCUa6Gbi7zMsIzWZzTCkT_-?usp=sharing\nimport:\n1 2 3 4 5 import numpy as np import matplotlib.pyplot as plt import japanize_matplotlib import scipy.stats as st from scipy.special import ndtri æ­£è¦åˆ†å¸ƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ãŸãƒ‡ãƒ¼ã‚¿ãŒæ­£è¦åˆ†å¸ƒã¨é¡ä¼¼ã—ã¦ã„ã‚‹ã‹èª¿ã¹ã‚‹ ç¸¦è»¸ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ãŸãƒ‡ãƒ¼ã‚¿ã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ :\n1 2 3 4 5 6 7 8 9 10 11 12 N = 200 # ãƒ‡ãƒ¼ã‚¿ä»¶æ•° MEAN = 10 # å¹³å‡ STD = 3 # æ¨™æº–åå·® data = np.random.normal(loc=MEAN, scale=STD, size=N) plt.title(f\u0026#34;æ­£è¦åˆ†å¸ƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ãŸãƒ—ãƒ­ãƒƒãƒˆã®ãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ \\nï¼ˆå¹³å‡={MEAN}ï¼Œæ¨™æº–åå·®={STD}ï¼‰\u0026#34;) plt.xlabel(\u0026#34;éšç´š\u0026#34;) plt.ylabel(\u0026#34;åº¦æ•°\u0026#34;) plt.hist(data, bins=20) plt.grid(True) plt.show() ãƒ‡ãƒ¼ã‚¿ã®åˆ†ä½æ•°:\n1 2 3 4 5 6 7 8 9 10 11 sorted_data = np.sort(data) x = np.linspace(0, 1, N) plt.figure(figsize=(5, 5)) plt.title(\u0026#34;æ­£è¦åˆ†å¸ƒã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã—ãŸãƒ—ãƒ­ãƒƒãƒˆã®åˆ†ä½æ•°\u0026#34;) plt.xlabel(\u0026#34;åˆ†ä½æ•°\u0026#34;) plt.ylabel(\u0026#34;å€¤\u0026#34;) plt.xlim(0, 1) plt.scatter(x, sorted_data) plt.grid(True) plt.show() æ¨ªè»¸ ä»Šå›ã®ç†è«–åˆ†å¸ƒã¯æ­£è¦åˆ†å¸ƒãªã®ã§ï¼Œæ­£è¦åˆ†å¸ƒã®ç¢ºç‡å¯†åº¦é–¢æ•°ï¼ˆï¼æ­£è¦ç´¯ç©åˆ†å¸ƒé–¢æ•°ï¼‰ã®é€†é–¢æ•°ã‚’ç”¨ã„ã‚‹ï¼\næ­£è¦ç´¯ç©åˆ†å¸ƒ:\n1 2 3 4 5 6 7 8 9 x = np.linspace(-STD, STD, N) y_cdf = st.norm.cdf(x) plt.figure(figsize=(5, 5)) plt.title(f\u0026#34;æ­£è¦ç´¯ç©åˆ†å¸ƒé–¢æ•°\\nï¼ˆå®šç¾©åŸŸ=[{-STD}, {STD}]ï¼‰\u0026#34;) plt.xlabel(\u0026#34;x\u0026#34;) plt.ylabel(\u0026#34;y\u0026#34;) plt.scatter(x, y_cdf) plt.grid(True) æ­£è¦ç´¯ç©åˆ†å¸ƒé–¢æ•°ã®é€†é–¢æ•°:\n1 2 3 4 5 6 7 8 9 x = np.linspace(0, 1, N) inv_norm = ndtri(x) plt.figure(figsize=(5, 5)) plt.title(f\u0026#34;æ­£è¦ç´¯ç©åˆ†å¸ƒé–¢æ•°ã®é€†é–¢æ•°\\nï¼ˆå®šç¾©åŸŸ=[{0}, {1}]ï¼‰\u0026#34;) plt.xlabel(\u0026#34;x\u0026#34;) plt.ylabel(\u0026#34;y\u0026#34;) plt.scatter(x, inv_norm) plt.grid(True) Q-Q ãƒ—ãƒ­ãƒƒãƒˆ 1 2 3 4 5 6 plt.figure(figsize=(5, 5)) plt.title(f\u0026#34;Q-Qãƒ—ãƒ­ãƒƒãƒˆ\u0026#34;) plt.xlabel(\u0026#34;ç†è«–åˆ†å¸ƒ\u0026#34;) plt.ylabel(\u0026#34;å¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒ\u0026#34;) plt.scatter(inv_norm, sorted_data) plt.grid(True) ã‚°ãƒ©ãƒ•ãŒä¸€ç›´ç·šã«ãªã£ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šï¼Œå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ã®ç¢ºç‡åˆ†å¸ƒãŒæ­£è¦åˆ†å¸ƒã«é¡ä¼¼ã—ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ããŸï¼\nå€‹äººçš„ãªç†è§£ åŒã˜åˆ†å¸ƒãªã‚‰ï¼Œã‚½ãƒ¼ãƒˆã—ã¦åˆ†ä½æ•°ã§å¯è¦–åŒ–ã—ãŸã¨ãã®åˆ†å¸ƒã‚‚åŒã˜ã¯ãš ãã®å ´åˆï¼ŒåŒã˜ãƒ‡ãƒ¼ã‚¿ã‚’ x è»¸ï¼Œy è»¸ä¸¡æ–¹ã«ãƒ—ãƒ­ãƒƒãƒˆã™ã‚‹ã®ã¨åŒã˜ãªã®ã§ï¼Œãã®ãƒ—ãƒ­ãƒƒãƒˆã¯ $y=x$ çš„ãªæ„Ÿã˜ã«ãªã‚‹ ç†è«–åˆ†å¸ƒã®åˆ†ä½æ•°ãƒ—ãƒ­ãƒƒãƒˆã¯ç´¯ç©ç¢ºç‡é–¢æ•°ãŒä½¿ãˆã‚‹ ã€Œãªã‚‰ï¼Œç†è«–åˆ†å¸ƒã®é–¢æ•°ã‹ã‚‰åˆ†ä½æ•°ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆã—ã¦ã‚‚ã„ã‘ã‚‹ã®ã§ã¯ï¼Ÿã€ã¨æ€ã£ã¦ã‚„ã£ã¦ã¿ãŸã‘ã©ï¼ŒQ-Q ãƒ—ãƒ­ãƒƒãƒˆç”Ÿæˆæ™‚ã®é€†é–¢æ•°å€¤ãŒåˆ†ã‹ã‚‰ãªãã¦è©°ã‚“ã â€¦ å®Ÿç”¨ SciPy ã® stats.probplot() ã‚’ä½¿ãˆã°ç°¡å˜ã« Q-Q ãƒ—ãƒ­ãƒƒãƒˆã‚’ä½œæˆã§ãã‚‹ï¼\n1 2 3 4 fig = plt.subplots(figsize=(5, 5)) st.probplot(sorted_data, dist=\u0026#34;norm\u0026#34;, plot=plt) plt.show() å‚è€ƒè¨˜äº‹ ã€Pythonã€‘æ­£è¦åˆ†å¸ƒã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚’èª¿ã¹ã‚‹æ‰‹æ³• 3 ç¨® | ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ã‚¹æƒ…å ±å±€ æ­£è¦ Q-Q ãƒ—ãƒ­ãƒƒãƒˆ | çµ±è¨ˆç”¨èªé›† | çµ±è¨ˆ WEB ã€çµ±è¨ˆå­¦ã€‘Q-Q ãƒ—ãƒ­ãƒƒãƒˆã®ä»•çµ„ã¿ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã§ç†è§£ã™ã‚‹ã€‚ - Qiita Q-Q ãƒ—ãƒ­ãƒƒãƒˆ - Wikipedia ","date":"2023-01-07T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/qq-plot-study-notes/","title":"Q-Qãƒ—ãƒ­ãƒƒãƒˆå‹‰å¼·ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nã¯ã˜ã‚ã« Selenium+Python ç’°å¢ƒã‚’ Docker ã§ä½œã£ãŸéš›ã®ãƒ¡ãƒ¢ï¼åŸºæœ¬çš„ã«ä¸‹è¨˜ã®è¨˜äº‹ã‚’å‚è€ƒã«è¡Œã£ãŸ:\nå‚è€ƒè¨˜äº‹: ç¬¬ 662 å›ã€€Docker+Selenium Server ã§ Web ãƒ–ãƒ©ã‚¦ã‚¶è‡ªå‹•æ“ä½œç’°å¢ƒã‚’ä½œã‚‹ | gihyo.jp\nã¾ãŸï¼Œè¨˜äº‹ä¸­ã®ã‚³ãƒ¼ãƒ‰ã¯ä¸‹è¨˜ãƒªãƒã‚¸ãƒˆãƒªã«ä¸ŠãŒã£ã¦ã„ã‚‹:\nãƒªãƒã‚¸ãƒˆãƒª: https://github.com/yamamoto-yuta/selenium-on-docker-sample\næ‰‹é † 1. Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ pull ä»Šå›ã¯ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§ãã‚Œã° OK ã ã£ãŸã®ã§ standalone-chrome ã‚’ pull ã—ãŸ\n1 $ docker pull selenium/standalone-chrome 2. ç´ ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã¯ pip ã¨ selenium ãŒå…¥ã£ã¦ã„ãªã„ã®ã§ï¼Œå…¥ã‚ŒãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ Dockerfile ã§ä½œæˆ 1 2 3 4 5 6 7 FROM selenium/standalone-chrome USER root RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \u0026amp;\u0026amp; apt install -y python3-pip USER 1200 RUN pip3 install selenium ãªãŠï¼Œ apt ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãŠã†ã¨ã—ãŸã‚‰ Permission denied ã¨è¨€ã‚ã‚ŒãŸã®ã§ï¼Œä¸€æ™‚çš„ã« root ãƒ¦ãƒ¼ã‚¶ã«ã—ã¦ã„ã‚‹:\n1 2 3 4 5 6 7 =\u0026gt; ERROR [2/3] RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \u0026amp;\u0026amp; apt install -y python3-pip 1.0s ------ \u0026gt; [2/3] RUN apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \u0026amp;\u0026amp; apt install -y python3-pip: #0 0.900 Reading package lists... #0 0.925 E: List directory /var/lib/apt/lists/partial is missing. - Acquire (13: Permission denied) ------ failed to solve: executor failed running [/bin/sh -c apt-get update \u0026amp;\u0026amp; apt-get upgrade -y \u0026amp;\u0026amp; apt install -y python3-pip]: exit code: 100 3. ç’°å¢ƒè¨­å®šã‚’ docker-compose.yml ã«ã¾ã¨ã‚ã‚‹ 1 2 3 4 5 6 7 8 9 10 11 version: \u0026#34;3.9\u0026#34; services: app: build: . image: \u0026#34;selenium-on-docker-sample\u0026#34; container_name: \u0026#34;selenium-on-docker-sample\u0026#34; volumes: - /dev/shm:/dev/shm - .:/usr/src/app working_dir: /usr/src/app ãƒã‚¤ãƒ³ãƒˆã¯ä¸‹è¨˜ã® volumes è¨­å®šï¼ã“ã®è¨­å®šã§ã¯ãƒ›ã‚¹ãƒˆã®ãƒ¡ãƒ¢ãƒªé ˜åŸŸ /dev/shm ã‚’ãƒã‚¦ãƒ³ãƒˆã—ã¦ã„ã‚‹ï¼ã“ã‚Œã‚’ã—ã¦ãŠã‹ãªã„ã¨ãƒ¡ãƒ¢ãƒªä¸è¶³ã§æ­£å¸¸ã«å‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚‹ã‚‰ã—ã„:\n1 2 volumes: - /dev/shm:/dev/shm å‚è€ƒ: Selenium ã‚’ docker ã§å‹•ã‹ã™ã¨ç•°æ§˜ã«é…ã„ ç‰¹å®šã‚µã‚¤ãƒˆã§è½ã¡ã‚‹å ´åˆã®å¯¾å‡¦æ³• â”‚ wonwon eater\nãªãŠï¼Œä¸Šè¨˜ã®æ–¹æ³•ã¯ãƒ›ã‚¹ãƒˆ OS ãŒ Linux ã®å ´åˆã«ä½¿ãˆã‚‹æ–¹æ³•ã§ï¼Œä»–ã® OS ã®å ´åˆã¯ç›´æ¥ã‚µã‚¤ã‚ºã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒã‚ã‚‹ã‚‰ã—ã„:\n1 2 3 build: context: . shm_size: \u0026#34;2gb\u0026#34; å‚è€ƒ: Selenium ã‚’ docker ã§å‹•ã‹ã™ã¨ç•°æ§˜ã«é…ã„ ç‰¹å®šã‚µã‚¤ãƒˆã§è½ã¡ã‚‹å ´åˆã®å¯¾å‡¦æ³• â”‚ wonwon eater\nå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:\nStart a Docker container with Firefox 1 docker run -d -p 4444:4444 -p 7900:7900 --shm-size=\u0026#34;2g\u0026#34; selenium/standalone-firefox:4.7.2-20221219 ï¼ˆä¸­ç•¥ï¼‰ â˜ï¸ When executing docker run for an image that contains a browser please use the flag \u0026ndash;shm-size=2g to use the host\u0026rsquo;s shared memory.\nå¼•ç”¨: SeleniumHQ/docker-selenium: Docker images for Selenium Grid\n3. ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã¦ä¸­ã«å…¥ã‚‹ 1 2 $ docker compose up $ docker exec -it \u0026lt;CONTAINER_ID\u0026gt; bash 4. ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ ä»Šå›ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã‚¹ã‚¯ãƒªãƒ—ãƒˆ sample.py ã‚’ä½œæˆã—ãŸï¼å†…å®¹ã¨ã—ã¦ã¯ï¼Œã€Œwebdriverã€ã§ã‚°ã‚°ã£ã¦æ¤œç´¢çµæœã®ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ¨™æº–å‡ºåŠ›ã™ã‚‹ï¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 import time from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.common.keys import Keys # Chromeã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ options = webdriver.ChromeOptions() driver = webdriver.Chrome(\u0026#39;chromedriver\u0026#39;, options=options) try: # è¦ç´ ã®å¾…æ©Ÿæ™‚é–“ã‚’æœ€å¤§10ç§’ã«è¨­å®š driver.implicitly_wait(10) # http://www.google.com ã‚’é–‹ã driver.get(\u0026#34;http://www.google.com\u0026#34;) # æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«ã€Œwebdriverã€ã¨å…¥åŠ›ã—ã¦æ¤œç´¢ driver.find_element(By.NAME, \u0026#34;q\u0026#34;).send_keys(\u0026#34;webdriver\u0026#34; + Keys.ENTER) time.sleep(5) # æ¤œç´¢çµæœã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å–å¾—ã—ã¦å‡ºåŠ› element_titles = driver.find_elements(By.TAG_NAME, \u0026#34;h3\u0026#34;) for element_title in element_titles: print(element_title.text) except: import traceback traceback.print_exc() finally: # Chromeã‚’çµ‚äº† input(\u0026#34;ä½•ã‹ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨çµ‚äº†ã—ã¾ã™...\u0026#34;) driver.quit() å®Ÿè¡Œçµæœ:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 seluser@aefbc6616615:/usr/src/app$ python3 sample.py WebDriver - Selenium WebDriver ã‚’ä½¿ç”¨ã—ã¦ Microsoft Edge ã‚’è‡ªå‹•åŒ–ã™ã‚‹ WebDriver - MDN Web Docs - Mozilla WebDriver ã«ã¤ã„ã¦ç§ãŒçŸ¥ã£ã¦ã„ã‚‹ã“ã¨ (2017 å¹´ç‰ˆ) 10åˆ†ã§ç†è§£ã™ã‚‹ Selenium - Qiita ChromeDriver - WebDriver for Chrome 7. WebDriver API â€” Selenium Python Bindings 2 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ WebDriverãƒã‚¦ã‚¹ã¨ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆ Pythonã§è‡ªå‹•åŒ–ã—ã‚ˆã†ï¼ ãƒ¼ Selenium Webdriverã‚’ ... ä½•ã‹ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨çµ‚äº†ã—ã¾ã™... éç¨‹ã§èª¿ã¹ãŸã“ã¨ /dev/shm ã£ã¦ä½•ï¼Ÿ tmpfs ã¨ã„ã† Linux ãƒã‚·ãƒ³ã®ãƒ¡ãƒ¢ãƒªã«ä½œæˆã§ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãƒã‚¦ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒˆã® 1 ã¤ï¼tmpfs ã¯ä¸€è¦‹ RAM ãƒ‡ã‚£ã‚¹ã‚¯ã£ã½ã„ãŒï¼Œtmpfs ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ãŸã‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒä¸è¦ã¨ã„ã†é•ã„ãŒã‚ã‚‹ï¼ˆãã®ãŸã‚ï¼Œã‚ã‚‰ã‹ã˜ã‚å®¹é‡ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒç„¡ãï¼Œä½¿ç”¨ã—ãŸåˆ†ã ã‘ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè²»ã™ã‚‹ï¼‰ï¼\n/dev/shm ã‚’åˆ©ç”¨ã™ã‚‹ã«ã¯ï¼Œå¥½ããªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ï¼\nå‚è€ƒ: tmpfs - Linux æŠ€è¡“è€…èªå®š LinuC | LPI-Japan\nSelenium ã¯ 3 ç³»ã¨ 4 ç³»ã§æ›¸ãæ–¹ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ å…ƒè¨˜äº‹ ã§ã¯ find_elements_by_* ç³»ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨ã„ã‚‰ã‚Œã¦ã„ãŸãŒï¼Œãã‚Œã‚‰ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 4.3.0 å»ƒæ­¢ã•ã‚Œã¦ãŠã‚Šï¼Œç¾åœ¨ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªæ›¸ãæ–¹ã«ãªã£ã¦ã„ã‚‹æ¨¡æ§˜:\n3 ç³»:\n1 driver.find_elements_by_class_name(\u0026#34;content\u0026#34;) 4 ç³»:\n1 2 3 # å¼•æ•°ã«ã¾ã¨ã‚ã¦æ›¸ãã‚„ã‚Šæ–¹ã«çµ±ä¸€ã•ã‚Œã‚‹ from selenium.webdriver.common.by import By driver.find_elements(By.CLASS_NAME, \u0026#34;content\u0026#34;) å¼•ç”¨: ã€Seleniumã€‘æ€¥ã« AttributeError: \u0026lsquo;WebDriver\u0026rsquo; object has no attribute ãŒèµ·ããŸ - Qiita\n","date":"2022-12-30T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/selenium-python-environment-docker-memo/","title":"Selenium+Pythonç’°å¢ƒã‚’Dockerã§ä½œã£ãŸã¨ãã®ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nï¼“è¡Œã§ SlackDeck ã¯è¤‡æ•°ã® \u0026lt;iframe\u0026gt; ã« Web ç‰ˆ Slack ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ï¼Œé€šçŸ¥ãŒæ¥ã‚‹ã¨å¤šé‡ã§éŸ³ãŒé³´ã£ã¦ã—ã¾ã† ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«è‰²ã€…èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ï¼Œ Slack ã®é€šçŸ¥ã¯ Notification API ã‚’ç”¨ã„ã¦è¡Œã‚ã‚Œã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã£ãŸ ã—ã‹ã—ï¼Œ \u0026lt;iframe\u0026gt; ã®é€šçŸ¥è¨±å¯ã¯ãƒ¡ã‚¤ãƒ³ãƒ•ãƒ¬ãƒ¼ãƒ ã®é€šçŸ¥è¨±å¯ã‹ã‚‰è¡Œã†ã¹ãã§ã‚ã‚‹ã“ã¨ã‚‚åˆ†ã‹ã‚Šï¼Œå¤šé‡ã§éŸ³ãŒé³´ã£ã¦ã„ã‚‹æŒ™å‹•ãŒé©åˆ‡ãªæŒ™å‹•ã¨ã„ã†ã“ã¨ã«ãªã£ã¦ã—ã¾ã£ãŸ SlackDeck ã¨ã¯ï¼Ÿ Slack ã®ãƒãƒ£ãƒ³ãƒãƒ«ã‚’æ¨ªã«ä¸¦ã¹ã‚‰ã‚Œã‚‹ Chrome æ‹¡å¼µæ©Ÿèƒ½\nhttps://chrome.google.com/webstore/detail/slackdeck/cocnkjpcbmoopfpmogblnjpjdfcaohod\nä½•ãŒå•é¡Œã ã£ãŸã‹ï¼Ÿ SlackDeck ã¯ï¼Œãƒ¡ã‚¤ãƒ³ã® Slack ã‚’è¡¨ç¤ºã™ã‚‹ \u0026lt;body\u0026gt; ã¨ã‚«ãƒ©ãƒ ã¨ã—ã¦ Slack ã‚’è¡¨ç¤ºã™ã‚‹ \u0026lt;iframe\u0026gt; ã§æ§‹æˆã•ã‚Œã¦ã„ã‚‹ï¼å›³ã«ã™ã‚‹ã¨æ¬¡ã®é€šã‚Š:\nã“ã®çŠ¶æ…‹ã§ Slack ã«é€šçŸ¥ãŒæ¥ã‚‹ã¨ï¼Œ \u0026lt;body\u0026gt; ã¨å…¨ã¦ã® \u0026lt;iframe\u0026gt; ã§é€šçŸ¥éŸ³ãŒé³´ã£ã¦ã—ã¾ã„ï¼Œå¤šé‡ã§é€šçŸ¥éŸ³ãŒé³´ã£ã¦ã—ã¾ã†ï¼\nã“ã‚ŒãŒåŸå› ã§ SlackDeck ã‚’ Chrome ã‹ã‚‰å‰Šé™¤ã—ã¦ã—ã¾ã†ãƒ¦ãƒ¼ã‚¶ã‚‚ã„ãŸãŸã‚ï¼Œä»Šå›ï¼Œä¿®æ­£ã‚’è©¦ã¿ãŸæ¬¡ç¬¬ï¼\nèª¿ã¹ã¦åˆ†ã‹ã£ãŸã“ã¨ Slack ã§ã¯é€šçŸ¥ã®é€ä¿¡ã« Notification API ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ ã‚¦ã‚§ãƒ–é€šçŸ¥ã®æœ€ã‚‚é¡•è‘—ãªç”¨é€”ã®ä¸€ã¤ãŒã€ã‚¦ã‚§ãƒ–ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒ¼ãƒ«ã‚„ IRC ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã„ã¦ã€æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã—ãŸã¨ãã«ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã»ã‹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ä½•ã‹ã‚’ã—ã¦ã„ã¦ã‚‚é€šçŸ¥ã‚’ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã§ã™ã€‚ã“ã‚Œã«ã¯æ•°å¤šãã®äº‹ä¾‹ãŒå­˜åœ¨ã—ã€ä¾‹ãˆã° Slack ãªã©ãŒã‚ã‚Šã¾ã™ã€‚ å¼•ç”¨: é€šçŸ¥ API ã®ä½¿ç”¨ - Web API | MDN\n\u0026lt;iframe\u0026gt; ã‹ã‚‰é€šçŸ¥è¨±å¯ã‚’æ±‚ã‚ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ Notification.requestPermission() ã¯ Chrome ã‹ã‚‰éæ¨å¥¨ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹ Remove the ability to call Notification.requestPermission() from non-main frames. This change will align the requirements for notification permission with that of push notifications, easing friction for developers. It allows us to unify notification and push permissions. å¼•ç”¨: Remove Usage of Notifications from iFrames - Chrome Platform Status\nã“ã®éæ¨å¥¨å®£è¨€ã«å¯¾å¿œã—ãŸäº‹ä¾‹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ï¼Œä»£ã‚ã‚Šã«ãƒˆãƒƒãƒ—ãƒ¬ãƒ™ãƒ«ã®ãƒ•ãƒ¬ãƒ¼ãƒ ã‹ã‚‰è¨±å¯ã‚’è¦æ±‚ã™ã‚‹ã‹æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ãã®ãŒè‰¯ã„ã‚‰ã—ã„ å‚è€ƒ: Notification.requestPermission from iframe deprecated Â· Issue #17 Â· amazon-connect/amazon-connect-streams\nä»¥ä¸Šã‚ˆã‚Šï¼Œ \u0026lt;body\u0026gt; ã§è¡¨ç¤ºã—ã¦ã„ã‚‹ Slack ã®é€šçŸ¥ã‚’è¨±å¯ã—ãŸãªã‚‰ã° \u0026lt;iframe\u0026gt; ã§è¡¨ç¤ºã—ã¦ã„ã‚‹ Slack ã‚‚è¨±å¯ã•ã‚Œã¦ã„ã‚‹ã®ãŒé©åˆ‡ï¼ã¤ã¾ã‚Šï¼Œå¤šé‡ã§é€šçŸ¥éŸ³ãŒé³´ã£ã¦ã„ã‚‹æŒ™å‹•ãŒé©åˆ‡ã¨ãªã‚‹ï¼\nã©ã†ã™ã‚‹ï¼Ÿ ã©ã†ã—ã‚ˆã†â€¦\n","date":"2022-12-19T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/problem-with-slackdeck-notification-duplication/","title":"SlackDeckã®é€šçŸ¥å¤šé‡ã§é³´ã£ã¡ã‚ƒã†å•é¡Œã§è©°ã‚“ã è©±"},{"content":" âœï¸ ç·¨é›†\nå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:\nThe Trello REST API API Introduction å‚è€ƒè¨˜äº‹:\nTrelloAPI+GAS ã§ Trello ã®ã‚«ãƒ¼ãƒ‰ç§»å‹•ã‚’ Slack ã«é€šçŸ¥ã™ã‚‹ä»•çµ„ã¿ã‚’ä½œã£ãŸè©± - ãƒˆãƒ¬ã‚¿é–‹ç™ºè€…ãƒ–ãƒ­ã‚° ã€Trelloã€‘Rest API ã®å‚™å¿˜éŒ² Discord ã® Webhook URL ã‚’å–å¾— æ™®é€šã«ç”¨æ„\nTrello ã® API ã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾— Trello ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹çŠ¶æ…‹ã§æ¬¡ã®ãƒšãƒ¼ã‚¸ã«ã‚¢ã‚¯ã‚»ã‚¹ é–‹ç™ºè€…å‘ã‘ API ã‚­ãƒ¼\nAPI ã‚­ãƒ¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹ API ã‚­ãƒ¼: ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ã‚­ãƒ¼ ã®æ¬„ã«ã‚ã‚‹è‹±æ•°å­—ã®ç¾…åˆ— ãƒˆãƒ¼ã‚¯ãƒ³: ãƒˆãƒ¼ã‚¯ãƒ³ ã¸ã‚¢ã‚¯ã‚»ã‚¹ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ ç™ºè¡Œã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ¡ãƒ¢ ä¸‹è¨˜ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã£ã¦ãã¦ã„ã‚Œã° OK 1 2 curl --request GET \\ --url \u0026#39;https://api.trello.com/1/members/me/boards?key={APIKey}\u0026amp;token={APIToken}\u0026#39; GAS ã¨é€£æº é€šçŸ¥ç”¨ãƒãƒ£ãƒ³ãƒãƒ«ã‚’ä½œæˆï¼ˆæ¨©é™ã« Bot ã‚’è¿½åŠ ã—ã¦ãŠã‹ãªã„ã¨ã€Bot ã‹ã‚‰é€šçŸ¥ã§ããªã„ã®ã§æ³¨æ„ï¼‰ GAS ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ GAS ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: trello_notifier_bot\nGAS ã‹ã‚‰ Discord ã¸é€šçŸ¥ã‚’é€ã‚Œã‚‹ã‹ãƒ†ã‚¹ãƒˆ Discord ã® Webhook URL ã¯ç’°å¢ƒå¤‰æ•°çš„ãªã‚‚ã®ãªã®ã§ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã‹ã‚‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸è¿½åŠ \nã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 function myFunction() { const scriptProps = PropertiesService.getScriptProperties().getProperties(); const payload = { content: \u0026#34;content\u0026#34;, embeds: [ { title: \u0026#34;title\u0026#34;, description: \u0026#34;description\u0026#34;, }, ], }; const payloads = [ { url: scriptProps.DISCORD_WEBHOOK_URL, contentType: \u0026#34;application/json\u0026#34;, payload: JSON.stringify(payload), }, ]; UrlFetchApp.fetchAll(payloads); } å‹•ä½œçµæœ: Trello ã« Webhook ã‚’ç™»éŒ²ã™ã‚‹ ä¸‹è¨˜ POST ã‚’é€ä¿¡ã™ã‚‹ã€‚ callbackURL ã«ã¯ GAS ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã¨ãã«ç™ºè¡Œã•ã‚Œã‚‹ URL ã‚’å…¥ã‚Œã‚‹ã€‚ idModel ã¯å¤‰æ›´ã‚’æ¤œçŸ¥ã—ãŸã„ãƒœãƒ¼ãƒ‰ã® ID ã‚’å…¥ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 curl -X POST -H \u0026#34;Content-Type: application/json\u0026#34; \\ https://api.trello.com/1/tokens/{APIToken}/webhooks/ \\ -d \u0026#39;{ \u0026#34;key\u0026#34;: \u0026#34;{APIKey}\u0026#34;, \u0026#34;callbackURL\u0026#34;: \u0026#34;http://www.mywebsite.com/trelloCallback\u0026#34;, \u0026#34;idModel\u0026#34;:\u0026#34;4d5ea62fd76aa1136000000c\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;My first webhook\u0026#34; }\u0026#39; å¼•ç”¨: https://developer.atlassian.com/cloud/trello/guides/rest-api/webhooks/#creating-a-webhook\nã†ã¾ãã„ãã¨ã€ä¸‹è¨˜ã‚³ãƒ¼ãƒ‰ã®å ´åˆã€ç™»éŒ²ã—ãŸãƒœãƒ¼ãƒ‰ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹ã¨ doPost ã¨ã„ã†æ–‡å­—åˆ—ãŒ Discord ã¸é€ä¿¡ã•ã‚Œã‚‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 function doPost(e) { postToDiscord(\u0026#34;doPost\u0026#34;); } function postToDiscord(content) { const payload = { content: content, }; const payloads = [ { url: scriptProps.DISCORD_WEBHOOK_URL, contentType: \u0026#34;application/json\u0026#34;, payload: JSON.stringify(payload), }, ]; UrlFetchApp.fetchAll(payloads); } callbackURL ã® URL ã¯å…¨ã¦å¤§æ–‡å­—ãªã®ã§æ³¨æ„ï¼ˆé–“é•ãˆã‚‹ã¨ã€ Value isn't a string. ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿”ã£ã¦ãã‚‹ï¼‰\nWhen creating a webhook, the error \u0026ldquo;Value isn\u0026rsquo;t a string.\u0026rdquo; - Trello - The Atlassian Developer Community\næ¬¡ã®æ‰‹é †ã§ Webhook ã®ç™»éŒ²ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã—ãŸ:\næ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ \u0026gt; ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ¦ãƒ¼ã‚¶: è‡ªåˆ†ã®ã¿ ã«ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ createWebhook() ã‚’å®Ÿè¡Œ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç®¡ç† \u0026gt; ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ¦ãƒ¼ã‚¶: å…¨å“¡ ã«å¤‰æ›´ Trello ã®ãƒœãƒ¼ãƒ‰ã«å¤‰æ›´ã‚’åŠ ãˆãŸæ™‚ã€Discord ã¸é€šçŸ¥ãŒæ¥ã‚Œã° OK æ‰‹é † 1 ã§ ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ¦ãƒ¼ã‚¶: è‡ªåˆ†ã®ã¿ ã™ã‚‹ç†ç”±ã¯ã€å…¨ä½“å…¬é–‹ã«ã™ã‚‹ã¨ 403 ã‚¨ãƒ©ãƒ¼ãŒè¿”ã£ã¦ãã‚‹ã‹ã‚‰ã‚‰ã—ã„ã€‚\nå‚è€ƒ: GAS ã‚’ä½¿ã£ã¦ trello webhook ã‚’å—ã‘ã‚‹æ™‚ã®ãƒãƒã‚Šã©ã“ã‚ - Qiita\n1 å›ä½œæˆã•ã‚ŒãŸ Webhook ã‚’å†åº¦ä½œã‚ã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚ æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ ã‚’å®Ÿæ–½ã™ã‚‹ã“ã¨ã§æš«å®šçš„ã«å›é¿ã§ãã‚‹ã€‚\nGAS å¤‰æ›´ã®åæ˜ æ–¹æ³• GAS ã®ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ãŸã‚‰ æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ ã‚’è¡Œã‚ãªã„ã¨åæ˜ ã•ã‚Œãªã„ã€‚ãŸã ã—ã€ æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ ã‚’ã™ã‚‹ã¨ Callback URL ãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ã€‚\nãã®å ´åˆã€ ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’ç®¡ç† ã‹ã‚‰æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã“ã¨ã§ã€URL ã‚’å¤‰æ›´ã›ãšã«åæ˜ ã§ãã‚‹ã€‚\nå‚è€ƒ:\nã€Webã€‘GAS ã® HTML ãƒ•ã‚¡ã‚¤ãƒ«ãŒã€Œã‚¹ã‚¯ãƒªãƒ—ãƒˆé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ï¼šdoGetã€ã¨å‡ºã¦è¡¨ç¤ºã•ã‚Œãªã„ã¨ãã«ç¢ºèªã™ã‚‹ã“ã¨ã€Google Apps Scriptã€‘ - æ˜ ç”»ã¨æ—…è¡Œã¨ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ GAS ã® Web ã‚¢ãƒ—ãƒªã§ URL ã‚’å¤‰ãˆãšã«æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¬é–‹ã™ã‚‹ï¼ˆæ–°ã‚¨ãƒ‡ã‚£ã‚¿ï¼‰ - make it easy doPost(e) ã§å—ã‘å–ã‚‹æƒ…å ± Action Types Object Definitions å—ã‘å–ã£ãŸæƒ…å ±ã« Action ID ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’ä½¿ã£ã¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³è©³ç´°ã‚’å–å¾—ã™ã‚‹ã®ãŒè‰¯ã•ãã†\nThe Trello REST API\nä¾‹ï¼‘ï¼‰ã‚«ãƒ¼ãƒ‰ã®ãƒªã‚¹ãƒˆã‚’ç§»å‹•ã—ãŸå ´åˆ:\n{ \"id\": \"63712c0f23c9cc02ffa935ef\", \"idMemberCreator\": \"5da3f38080e88b1af8e8ff86\", \"data\": { \"card\": { \"idList\": \"5dd692ca0897377466449231\", \"id\": \"627bc1e708099f5b7124c099\", \"name\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\", \"idShort\": 26, \"shortLink\": \"cs179j1u\" }, \"old\": { \"idList\": \"627bc1c16397f33d596253c0\" }, \"board\": { \"id\": \"5dd692c956a9247b4140e18b\", \"name\": \"2022ç§‹ãƒ©ã‚¤ãƒ–\", \"shortLink\": \"szHdDf00\" }, \"listBefore\": { \"id\": \"627bc1c16397f33d596253c0\", \"name\": \"ã‚„ã‚ŠãŸã„ã“ã¨\" }, \"listAfter\": { \"id\": \"5dd692ca0897377466449231\", \"name\": \"ã‚„ã‚‹ã“ã¨\" } }, \"appCreator\": null, \"type\": \"updateCard\", \"date\": \"2022-11-13T17:40:31.715Z\", \"limits\": null, \"display\": { \"translationKey\": \"action_move_card_from_list_to_list\", \"entities\": { \"card\": { \"type\": \"card\", \"idList\": \"5dd692ca0897377466449231\", \"id\": \"627bc1e708099f5b7124c099\", \"shortLink\": \"cs179j1u\", \"text\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\" }, \"listBefore\": { \"type\": \"list\", \"id\": \"627bc1c16397f33d596253c0\", \"text\": \"ã‚„ã‚ŠãŸã„ã“ã¨\" }, \"listAfter\": { \"type\": \"list\", \"id\": \"5dd692ca0897377466449231\", \"text\": \"ã‚„ã‚‹ã“ã¨\" }, \"memberCreator\": { \"type\": \"member\", \"id\": \"5da3f38080e88b1af8e8ff86\", \"username\": \"user36408094\", \"text\": \"å±±æœ¬é›„å¤ª\" } } }, \"memberCreator\": { \"id\": \"5da3f38080e88b1af8e8ff86\", \"activityBlocked\": false, \"avatarHash\": \"bd843173354efbec0932501d2c787a46\", \"avatarUrl\": \"https://trello-members.s3.amazonaws.com/5da3f38080e88b1af8e8ff86/bd843173354efbec0932501d2c787a46\", \"fullName\": \"å±±æœ¬é›„å¤ª\", \"idMemberReferrer\": null, \"initials\": \"å±±æœ¬å¤ª\", \"nonPublic\": {}, \"nonPublicAvailable\": true, \"username\": \"user36408094\" } } ä¾‹ï¼’ï¼‰åŒä¸€ãƒªã‚¹ãƒˆå†…ã§ã‚«ãƒ¼ãƒ‰ã‚’å…¥ã‚Œæ›¿ãˆãŸå ´åˆ:\n{ \"id\": \"63712d7e1d8da00421bd3234\", \"idMemberCreator\": \"5da3f38080e88b1af8e8ff86\", \"data\": { \"card\": { \"pos\": 229375, \"id\": \"627bc2098e68668fe44d5219\", \"name\": \"èƒŒæ™¯ã¨ç…§æ˜ã§ã‚ã‚ã›ã‚‹\", \"idShort\": 28, \"shortLink\": \"htmAcLHf\" }, \"old\": { \"pos\": 131071 }, \"board\": { \"id\": \"5dd692c956a9247b4140e18b\", \"name\": \"2022ç§‹ãƒ©ã‚¤ãƒ–\", \"shortLink\": \"szHdDf00\" }, \"list\": { \"id\": \"627bc1c16397f33d596253c0\", \"name\": \"ã‚„ã‚ŠãŸã„ã“ã¨\" } }, \"appCreator\": null, \"type\": \"updateCard\", \"date\": \"2022-11-13T17:46:38.819Z\", \"limits\": null, \"display\": { \"translationKey\": \"action_moved_card_higher\", \"entities\": { \"card\": { \"type\": \"card\", \"pos\": 229375, \"id\": \"627bc2098e68668fe44d5219\", \"shortLink\": \"htmAcLHf\", \"text\": \"èƒŒæ™¯ã¨ç…§æ˜ã§ã‚ã‚ã›ã‚‹\" }, \"memberCreator\": { \"type\": \"member\", \"id\": \"5da3f38080e88b1af8e8ff86\", \"username\": \"user36408094\", \"text\": \"å±±æœ¬é›„å¤ª\" } } }, \"memberCreator\": { \"id\": \"5da3f38080e88b1af8e8ff86\", \"activityBlocked\": false, \"avatarHash\": \"bd843173354efbec0932501d2c787a46\", \"avatarUrl\": \"https://trello-members.s3.amazonaws.com/5da3f38080e88b1af8e8ff86/bd843173354efbec0932501d2c787a46\", \"fullName\": \"å±±æœ¬é›„å¤ª\", \"idMemberReferrer\": null, \"initials\": \"å±±æœ¬å¤ª\", \"nonPublic\": {}, \"nonPublicAvailable\": true, \"username\": \"user36408094\" } } ä¾‹ï¼“ï¼‰ã‚«ãƒ¼ãƒ‰ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ãŸå ´åˆ:\n{ \"id\": \"63712df1630c6c05daf96fd0\", \"idMemberCreator\": \"5da3f38080e88b1af8e8ff86\", \"data\": { \"text\": \"aaaaa\", \"textData\": { \"emoji\": {} }, \"card\": { \"id\": \"627bc1e708099f5b7124c099\", \"name\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\", \"idShort\": 26, \"shortLink\": \"cs179j1u\" }, \"board\": { \"id\": \"5dd692c956a9247b4140e18b\", \"name\": \"2022ç§‹ãƒ©ã‚¤ãƒ–\", \"shortLink\": \"szHdDf00\" }, \"list\": { \"id\": \"5dd692ca0897377466449231\", \"name\": \"ã‚„ã‚‹ã“ã¨\" } }, \"appCreator\": null, \"type\": \"commentCard\", \"date\": \"2022-11-13T17:48:33.824Z\", \"limits\": { \"reactions\": { \"perAction\": { \"status\": \"ok\", \"disableAt\": 900, \"warnAt\": 720 }, \"uniquePerAction\": { \"status\": \"ok\", \"disableAt\": 17, \"warnAt\": 14 } } }, \"display\": { \"translationKey\": \"action_comment_on_card\", \"entities\": { \"contextOn\": { \"type\": \"translatable\", \"translationKey\": \"action_on\", \"hideIfContext\": true, \"idContext\": \"627bc1e708099f5b7124c099\" }, \"card\": { \"type\": \"card\", \"hideIfContext\": true, \"id\": \"627bc1e708099f5b7124c099\", \"shortLink\": \"cs179j1u\", \"text\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\" }, \"comment\": { \"type\": \"comment\", \"text\": \"aaaaa\" }, \"memberCreator\": { \"type\": \"member\", \"id\": \"5da3f38080e88b1af8e8ff86\", \"username\": \"user36408094\", \"text\": \"å±±æœ¬é›„å¤ª\" } } }, \"memberCreator\": { \"id\": \"5da3f38080e88b1af8e8ff86\", \"activityBlocked\": false, \"avatarHash\": \"bd843173354efbec0932501d2c787a46\", \"avatarUrl\": \"https://trello-members.s3.amazonaws.com/5da3f38080e88b1af8e8ff86/bd843173354efbec0932501d2c787a46\", \"fullName\": \"å±±æœ¬é›„å¤ª\", \"idMemberReferrer\": null, \"initials\": \"å±±æœ¬å¤ª\", \"nonPublic\": {}, \"nonPublicAvailable\": true, \"username\": \"user36408094\" } } ä¾‹ï¼”ï¼‰ã•ã‚‰ã«ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¿½åŠ ã—ãŸå ´åˆ:\n{ \"id\": \"63712e485c9137001535ed3f\", \"idMemberCreator\": \"5da3f38080e88b1af8e8ff86\", \"data\": { \"text\": \"bbbbb\", \"textData\": { \"emoji\": {} }, \"card\": { \"id\": \"627bc1e708099f5b7124c099\", \"name\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\", \"idShort\": 26, \"shortLink\": \"cs179j1u\" }, \"board\": { \"id\": \"5dd692c956a9247b4140e18b\", \"name\": \"2022ç§‹ãƒ©ã‚¤ãƒ–\", \"shortLink\": \"szHdDf00\" }, \"list\": { \"id\": \"5dd692ca0897377466449231\", \"name\": \"ã‚„ã‚‹ã“ã¨\" } }, \"appCreator\": null, \"type\": \"commentCard\", \"date\": \"2022-11-13T17:50:00.381Z\", \"limits\": { \"reactions\": { \"perAction\": { \"status\": \"ok\", \"disableAt\": 900, \"warnAt\": 720 }, \"uniquePerAction\": { \"status\": \"ok\", \"disableAt\": 17, \"warnAt\": 14 } } }, \"display\": { \"translationKey\": \"action_comment_on_card\", \"entities\": { \"contextOn\": { \"type\": \"translatable\", \"translationKey\": \"action_on\", \"hideIfContext\": true, \"idContext\": \"627bc1e708099f5b7124c099\" }, \"card\": { \"type\": \"card\", \"hideIfContext\": true, \"id\": \"627bc1e708099f5b7124c099\", \"shortLink\": \"cs179j1u\", \"text\": \"1æ›²ç›®ã®å‰ã«åä¹—ã‚Š, æŒ¨æ‹¶ã¨å¸¸å¥—å¥ï¼ˆä½™è£•ãŒã‚ã£ãŸã‚‰ï¼‰\" }, \"comment\": { \"type\": \"comment\", \"text\": \"bbbbb\" }, \"memberCreator\": { \"type\": \"member\", \"id\": \"5da3f38080e88b1af8e8ff86\", \"username\": \"user36408094\", \"text\": \"å±±æœ¬é›„å¤ª\" } } }, \"memberCreator\": { \"id\": \"5da3f38080e88b1af8e8ff86\", \"activityBlocked\": false, \"avatarHash\": \"bd843173354efbec0932501d2c787a46\", \"avatarUrl\": \"https://trello-members.s3.amazonaws.com/5da3f38080e88b1af8e8ff86/bd843173354efbec0932501d2c787a46\", \"fullName\": \"å±±æœ¬é›„å¤ª\", \"idMemberReferrer\": null, \"initials\": \"å±±æœ¬å¤ª\", \"nonPublic\": {}, \"nonPublicAvailable\": true, \"username\": \"user36408094\" } } ","date":"2022-10-30T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/trello-discord-integration-notes/","title":"Trello + Discord é€£æºãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\næ–¹æ³• skicka ã‚’ä½¿ã† rclone ã‚’ä½¿ã† skicka ã‚’ä½¿ã† skicka ã£ã¦ä½•ï¼Ÿ Google ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’ CLI ä¸Šã§æ“ä½œã§ãã‚‹ãƒ„ãƒ¼ãƒ« â†’ å…¬å¼ãƒªãƒã‚¸ãƒˆãƒª\nå°å…¥æ–¹æ³• åŸºæœ¬çš„ã«å…¬å¼ READMEé€šã‚Šã§ OK 2021/6/25 ç¾åœ¨ã€æ‰‹é † 5 ã®èªè¨¼ã®ã¨ã“ã‚ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ï¼ˆissue514ï¼‰ã®ã§ã€æ¬¡ã®è¨˜äº‹ã®æ‰‹é †ã‚’å®Ÿè¡Œã—ã¦è§£æ±ºã™ã‚‹ skicka ã®ã€ã€ŒGoogle ã§ãƒ­ã‚°ã‚¤ãƒ³ã€æ©Ÿèƒ½ãŒä¸€æ™‚çš„ã«ç„¡åŠ¹ã€ã‚’ä¸€æ™‚çš„ã«è§£æ±ºã™ã‚‹ - Qiita å…¬é–‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒã€Œãƒ†ã‚¹ãƒˆã€ã®ã¾ã¾ã ã¨ ã‚¨ãƒ©ãƒ¼ 403: access_denied ãŒå‡ºã‚‹ã®ã§ã€ã€Œæœ¬ç•ªç’°å¢ƒã« pushã€ã—ã¦ãŠãã“ã¨ å°å…¥ã—ã¦ã¿ãŸæ„Ÿæƒ³ ls ã ã‘ã§ã‚‚æ¯å› 3 ç§’ä»¥ä¸Šã‹ã‹ã‚‹ã®ã§ä½¿ã„ç‰©ã«ãªã‚‰ãªã„â€¦ä½•æ•…â€¦ å‚è€ƒè¨˜äº‹ GDrive ã‚’ CLI ã§ä½¿ã†ã€€- skicka - - Qiita ãƒªãƒ³ã‚¯ç­‰ã¾ã¨ã‚ï½œ Google Drive ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§æ‰±ã† - Qiita rclone ã‚’ä½¿ã† Rclone rclone ã‚’ä½¿ç”¨ã—ãŸ Google Drive ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ— - Qiita ","date":"2021-06-24T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/using-google-drive-via-cli/","title":"Googleãƒ‰ãƒ©ã‚¤ãƒ–ã‚’CLIã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚‹"},{"content":" âœï¸ ç·¨é›†\né¢¨é‚ªè–¬ã®åŠ¹æœã‚’æ¤œè¨¼ æ–°ã—ãé–‹ç™ºã—ãŸé¢¨é‚ªè–¬ã«ã€Œå›å¾©ã‚’æ—©ã‚ã‚‹åŠ¹æœãŒã‚ã‚‹ã‹ã€ã‚’æ¤œè¨¼ã™ã‚‹\nãƒ‡ãƒ¼ã‚¿åé›† é¢¨é‚ªã‚’å¼•ã„ã¦ã„ã‚‹äººã‚’ 100 äººé›†ã‚ã¦è–¬ã‚’é£²ã‚“ã§ã‚‚ã‚‰ã„ï¼Œå›å¾©æ—¥æ•°ã‚’è¨ˆæ¸¬ã™ã‚‹\nåŠ¹æœã‚’ç¢ºã‹ã‚ã‚‹ çµ±è¨ˆçš„æ¤œå®šã®æ–¹é‡ åé›†ã—ãŸã€ŒæŠ•è–¬è€…ã®å¹³å‡å›å¾©æ—¥æ•°ã€ã¨ã‚ã‚‰ã‹ã˜ã‚åˆ†ã‹ã£ã¦ã„ã‚‹ã€Œä¸€èˆ¬äººã®å¹³å‡å›å¾©æ—¥æ•°ã€ã®å·®ã‚’æ¯”è¼ƒã™ã‚‹ï¼ã“ã®å·®ãŒä¸€å®šä»¥ä¸Šã§ã‚ã‚Œã°è–¬ã«åŠ¹æœãŒã‚ã‚‹ã¨ã¿ãªã™ï¼\nâ€» ä¸€èˆ¬äººã®é¢¨é‚ªã®å›å¾©æ—¥æ•°ã¯ãã®åˆ†å¸ƒï¼ˆå›å¾©ã®å¹³å‡æ—¥æ•°ã€å›å¾©æ—¥æ•°ã®å€‹äººå·®ãªã©) ãŒã‚ã‚‰ã‹ã˜ã‚åˆ†ã£ã¦ã„ã‚‹ã‚‚ã®ã¨ã™ã‚‹\nçµ±è¨ˆçš„æ¤œå®šã®æ‰‹é † å¸°ç„¡ä»®èª¬ï¼šã€Œè–¬ã«åŠ¹æœãŒãªã„ã€ï¼ã€Œè–¬ã‚’é£²ã‚“ã§ã‚‚é£²ã¾ãªãã¦ã‚‚å›å¾©æ—¥æ•°ã«å¤‰ã‚ã‚Šã¯ãªã„ã€ å¯¾ç«‹ä»®èª¬ï¼šã€Œè–¬ã«åŠ¹æœãŒã‚ã‚‹ã€ï¼ã€Œè–¬ã‚’é£²ã‚“ã æ–¹ãŒå›å¾©æ—¥æ•°ãŒçŸ­ããªã‚‹ã€\næ¸¬å®šã—ãŸ 100 äººã®å¹³å‡å›å¾©æ—¥æ•°ã‚’ç®—å‡º å¸°ç„¡ä»®èª¬ã®ç¢ºç‡åˆ†å¸ƒï¼ˆï¼ä¸€èˆ¬äººã®å›å¾©æ—¥æ•°ã®ç¢ºç‡åˆ†å¸ƒï¼‰ã«å¾“ã†ç’°å¢ƒã§ï¼Œæ¸¬å®šã—ãŸå€¤ã«ãªã‚‹ç¢ºç‡ã‚’ç®—å‡º ç®—å‡ºã—ãŸç¢ºç‡ãŒä½ã‹ã£ãŸå ´åˆï¼Œã€Œè–¬ã«åŠ¹æœãŒãªã„ã€ã¨ã„ã†å¸°ç„¡ä»®èª¬ã‚’æ£„å´ã—ã€Œè–¬ã«åŠ¹æœãŒã‚ã‚‹ã€ã¨ã„ã†å¯¾ç«‹ä»®èª¬ã‚’æ¡ç”¨ã™ã‚‹ åˆ¤æ–­ã«ä½¿ã†æ•°å€¤ ã€Œä¸€å®šä»¥ä¸Šã®å·®ãŒã‚ã‚‹ã€ï¼ˆæœ‰æ„å·®ãŒèªã‚ã‚‰ã‚ŒãŸï¼‰ã¨ã„ã†åˆ¤æ–­ã‚’ä¸‹ã™ãŸã‚ã«ã¯æ•°å€¤çš„åˆ¤æ–­åŸºæº–ãŒå¿…è¦\np å€¤ï¼šå¸°ç„¡ä»®èª¬ãŒæ­£ã—ã„å ´åˆï¼Œè¦³æ¸¬å€¤ã¨ç­‰ã—ã„ã‹ãã‚Œã‚ˆã‚Šæ¥µç«¯ãªå€¤ã‚’å–ã‚‹ç¢ºç‡ æœ‰æ„æ°´æº–ï¼šp å€¤ãŒã©ã®ãã‚‰ã„å°ã•ã„å ´åˆã«å¸°ç„¡ä»®èª¬ã‚’æ£„å´ã™ã‚‹ã‹ï¼Œãã®é–¾å€¤\np å€¤ãŒæœ‰æ„æ°´æº–ã‚’ä¸‹å›ã‚‹ï¼æœ‰æ„å·®ãŒèªã‚ã‚‰ã‚ŒãŸ\né¢¨é‚ªè–¬ã®ã‚±ãƒ¼ã‚¹ã®å ´åˆ p å€¤ ä¸€èˆ¬äººã‹ã‚‰ 100 äººã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã‚“ã å ´åˆã®ç¢ºç‡åˆ†å¸ƒ p å€¤\nå¹³å‡å›å¾©æ—¥æ•°ãŒ 3.7 æ—¥ä»¥ä¸‹ã«ãªã‚‹ç¢ºç‡ï¼ 20% å¹³å‡å›å¾©æ—¥æ•°ãŒ 3.2 æ—¥ä»¥ä¸‹ã«ãªã‚‹ç¢ºç‡ï¼ 10% å¹³å‡å›å¾©æ—¥æ•°ãŒ 2.9 æ—¥ ä»¥ä¸‹ã«ãªã‚‹ç¢ºç‡ ï¼ 5% æœ‰æ„æ°´æº– æ¤œå®šå‰ã«ã‚ã‚‰ã‹ã˜ã‚æ±ºã‚ã¦ãŠã\nä»Šå›ã¯æœ‰æ„æ°´æº–ï¼ 5%ã«è¨­å®š åˆ¤å®šæ–¹æ³• ã€Œè–¬ã‚’é£²ã‚“ã äººã€100 äººã®å¹³å‡ãŒ 3.7 æ—¥ã ã£ãŸå ´åˆ â†’ ãã‚Œã¯ã€Œä¸€èˆ¬äººã€100 äººã§ã‚‚ 20%ã®ç¢ºç‡ã§ã‚ã‚Šå¾—ã‚‹å€¤ï¼è–¬ã«åŠ¹æœãŒã‚ã‚‹ã¨ã¯è¨€ãˆãªã„ï¼ˆæœ‰æ„å·®ãŒèªã‚ã‚‰ã‚Œãªã‹ã£ãŸï¼‰\nã€Œè–¬ã‚’é£²ã‚“ã äººã€100 äººã®å¹³å‡ãŒ 2.9 æ—¥ä»¥ä¸‹ã ã£ãŸå ´åˆ â†’ ãã‚Œã¯ã€Œä¸€èˆ¬äººã€100 äººã§ã‚‚ 5%ä»¥ä¸‹ã®ç¢ºç‡ã§ã—ã‹ã‚ã‚Šå¾—ãªã„å€¤ï¼è–¬ã«åŠ¹æœãŒã‚ã‚‹ã¨è¨€ãˆã‚‹ï¼ˆæœ‰æ„å·®ãŒèªã‚ã‚‰ã‚ŒãŸï¼‰\np å€¤ã®è§£é‡ˆã«é–¢ã™ã‚‹æ³¨æ„ç‚¹ p å€¤ã¯åŠ¹æœã‚’ç¤ºã™ã‚‚ã®ã§ã¯ãªã„ ä»Šå›ã®é¢¨é‚ªè–¬ã®å ´åˆã§ã¯å¹³å‡å›å¾©æ—¥æ•°ãŒ 3.7 æ—¥ä»¥ä¸‹ã«ãªã‚‹ç¢ºç‡ï¼ 20%ã ã£ãŸãŒï¼Œã‚µãƒ³ãƒ—ãƒ«æ•°ãŒã‚‚ã£ã¨å¤šã‹ã£ãŸã‚Šå°‘ãªã‹ã£ãŸã‚Šã™ã‚Œã°ã“ã® 20%ã¨ã„ã†å€¤ã¯å¤‰ã‚ã‚‹\nä½•å›ã‚‚è©¦è¡Œã—ã¦æœ‰åŠ¹ãª p å€¤ã‚’å‡ºã—ã¦ã¯ã„ã‘ãªã„ p å€¤=0.05 ã®å ´åˆï¼Œ100 å›ã« 5 å›ã—ã‹èµ·ã“ã‚‰ãªã„ä½ã„ç¢ºç‡ã‚’å‰æã¨ã—ã¦ã„ã‚‹ã®ã§ï¼Œä½•å›ã‚‚è©¦è¡Œã™ã‚‹ã¨ãã®å‰æãŒå´©ã‚Œã¦ã—ã¾ã† ãŠã¿ãã˜ã§å¤§å‰ãŒå‡ºã‚‹ã¾ã§ä½•å›ã‚‚å¼•ãã‚ˆã†ãªã‚‚ã®\np å€¤ã ã‘ã§åˆ¤æ–­ã—ã¦ã¯ã„ã‘ãªã„ p å€¤ã¯ã‚ãã¾ã§æŒ‡æ¨™ã®ä¸€ã¤ã«ã™ããªã„ ãã®ä»–ã®çµ±è¨ˆæ‰‹æ³•ï¼Œå®Ÿå‹™ä¸Šã®è€ƒæ…®ç‚¹ãªã©ã‚’é‘‘ã¿ã¦æœ€çµ‚çš„ãªåˆ¤æ–­ã‚’ä¸‹ã™å¿…è¦ãŒã‚ã‚‹\nå¸°ç„¡ä»®èª¬ãŒæ£„å´ã•ã‚Œãªãã¦ã‚‚ï¼Œå¸°ç„¡ä»®èª¬ãŒæ­£ã—ã„ã¨ã„ã†ã“ã¨ã«ã¯ãªã‚‰ãªã„ å¸°ç„¡ä»®èª¬ãŒæ£„å´ã•ã‚Œãªã‹ã£ãŸï¼æœ‰æ„å·®ãŒãŒèªã‚ã‚‰ã‚Œãªã‹ã£ãŸ ã¤ã¾ã‚Šï¼Œå¸°ç„¡ä»®èª¬ãŒæ­£ã—ã„ã¨ã„ã†ã“ã¨ã‚’ç¤ºã—ãŸã‚ã‘ã§ã¯ãªã„\nå‚è€ƒæ–‡çŒ® çµ±è¨ˆçš„æœ‰æ„ p å€¤ã£ã¦ä½•ã§ã™ã‹ï¼Ÿ ","date":"2020-07-01T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/statistical-significance-and-p-value/","title":"çµ±è¨ˆçš„æœ‰æ„ã¨på€¤"},{"content":" âœï¸ ç·¨é›†\næ™‚ç³»åˆ—è§£æã¨ã¯ï¼Ÿ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ï¼ˆæ¯æ—¥ã®å£²ã‚Šä¸Šã’ï¼Œæ—¥ã€…ã®æ°—æ¸© etcâ€¦ï¼‰ã‚’åˆ†æã™ã‚‹æ‰‹æ³• éå»ã®ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æœªæ¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’äºˆæ¸¬ã™ã‚‹ã“ã¨ãŒå¯èƒ½\nå›å¸°åˆ†æã§äºˆæ¸¬ã™ã‚Œã°ã„ã„ã®ã§ã¯ï¼Ÿ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®å›å¸°åˆ†æã«ã¯æ³¨æ„ãŒå¿…è¦\nå›å¸°åˆ†æï¼šã€€æœ€å°äºŒä¹—æ³•ã‚’ç”¨ã„ã¦å‚¾ãã‚„åˆ‡ç‰‡ã‚’æ¨å®š â†’ æœ€å°äºŒä¹—æ³•ãŒä½¿ãˆã‚‹æ¡ä»¶ï¼šã€€ãƒ‡ãƒ¼ã‚¿ã®ç‹¬ç«‹æ€§\nç‹¬ç«‹ã§ãªã„ãƒ‡ãƒ¼ã‚¿ã¨ã¯ï¼Ÿ â†’ éå»ã®å€¤ã«åˆã‚ã›ã¦ç¾åœ¨ã®å€¤ã‚‚å¤‰ã‚ã£ã¦ã—ã¾ã†ï¼ˆè‡ªå·±ç›¸é–¢ã®ã‚ã‚‹ï¼‰ãƒ‡ãƒ¼ã‚¿\nä¾‹ï¼‰ã€Œæ˜¨æ—¥ã®å£²ã‚Šä¸Šã’ãŒå¤šã‘ã‚Œã°ï¼Œä»Šæ—¥ã®å£²ã‚Šä¸Šã’ã‚‚å¤šããªã‚‹ã€ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¯ç‹¬ç«‹ã§ãªã„ã“ã¨ãŒå¤šã„ã€€â†’ å›å¸°åˆ†æã§ã¯ã†ã¾ãã„ã‹ãªã„å ´åˆãŒå¤šã„\næ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¸ã®å›å¸°åˆ†æãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ å¼•ç”¨ï¼šhttps://logics-of-blue.com/time-series-regression/\nèª¤å·®åˆ†å¸ƒã«ã¯æ­£è¦åˆ†å¸ƒã‚’ä»®å®šï¼ˆæ­£è¦åˆ†å¸ƒä»¥å¤–ã®å ´åˆï¼ŒçŠ¶æ…‹ç©ºé–“ãƒ¢ãƒ‡ãƒ«ç­‰ã§ã®å¯¾å¿œãŒå¿…è¦ï¼‰ æ¤œå®šã®æ–¹æ³•ã¯ã„ã‚ã„ã‚ã‚ã‚Šã€ã“ã®ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆé€šã‚Šã«ã—ã¦ã‚‚ã†ã¾ãã„ã‹ãªã„ or ã“ã®ã‚„ã‚Šæ–¹ä»¥å¤–ã®ã†ã¾ã„æ–¹æ³•ãŒã‚ã‚‹å ´åˆã‚‚ã‚ã‚‹ã®ã§ã€ã‚ãã¾ã§å‚è€ƒç¨‹åº¦ æ¤œå®š å˜ä½æ ¹æ¤œå®š æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒå˜æ ¹éç¨‹ã‹ã©ã†ã‹ã‚’åˆ¤å®šã™ã‚‹æ¤œå®š\nå®šå¸¸éç¨‹ æœŸå¾…å€¤ï¼ˆå¹³å‡ï¼‰ã¨è‡ªå·±ç›¸é–¢ãŒå¸¸ã«ä¸€å®šã®ç¢ºç‡éç¨‹ å¤§å±€çš„ã«è¦‹ã¦çœŸã£å¹³ - ä¾‹ï¼‰ãƒ›ãƒ¯ã‚¤ãƒˆãƒã‚¤ã‚º å˜ä½æ ¹éç¨‹ åŸç³»åˆ—$y_t$ãŒéå®šå¸¸éç¨‹ã§ï¼Œå·®åˆ†ç³»åˆ—$\\Delta y_t = y_t - y_{t-1}$ãŒå®šå¸¸éç¨‹ã®æ™‚ç³»åˆ— ä¾‹ï¼‰ãƒ©ãƒ³ãƒ€ãƒ ã‚¦ã‚©ãƒ¼ã‚¯ å˜ä½æ ¹éç¨‹ã«å›å¸°åˆ†æã‚’è¡Œã†ã¨ã©ã†ãªã‚‹ã‹ï¼Ÿ æœ‰æ„ãªå›å¸°ä¿‚æ•°ãŒå¾—ã‚‰ã‚Œã‚‹ ã—ã‹ã—ï¼Œç„¡é–¢ä¿‚ãªï¼’ã¤ã®ç³»åˆ—ã«å¯¾ã—ã¦æœ‰æ„ãªå›å¸°ãŒè¡Œãˆã¦ã„ã‚‹ã®ã¯ãŠã‹ã—ã„ ã—ãŸãŒã£ã¦ï¼Œå˜ä½æ ¹éç¨‹ã«å›å¸°åˆ†æã‚’è¡Œã†ã®ã¯è‰¯ããªã„ â†’ æ¤œå®šã§æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãŒå˜ä½æ ¹éç¨‹ãŒã©ã†ã‹èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹\nå˜ä½æ ¹æ¤œå®š ADF æ¤œå®š å¸°ç„¡ä»®èª¬ï¼šå˜ä½æ ¹éç¨‹ã§ã‚ã‚‹ å¯¾ç«‹ä»®èª¬ï¼šå˜ä½æ ¹éç¨‹ã§ãªã„ ã¨ã—ã¦ï¼Œp å€¤\u0026lt;0.05 ã§å¸°ç„¡ä»®èª¬æ£„å´ï¼å˜ä½æ ¹éç¨‹ã§ãªã„ã¨ã™ã‚‹å˜ä½æ ¹æ¤œå®š\nå‚è€ƒæ–‡çŒ® Python ã«ã‚ˆã‚‹æ™‚ç³»åˆ—åˆ†æã®åŸºç¤ æ™‚ç³»åˆ—è§£æ_ç†è«–ç·¨ æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã¸ã®å›å¸°åˆ†æ ","date":"2020-06-30T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/notes-for-time-series-analysis-basics/","title":"æ™‚ç³»åˆ—è§£æã®è§¦ã‚Šã ã‘ãƒ¡ãƒ¢"},{"content":" âœï¸ ç·¨é›†\nPageRank ã¨ã¯ï¼Ÿ Google ã®æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã«ç”¨ã„ã‚‰ã‚Œã¦ã„ã‚‹ Web ãƒšãƒ¼ã‚¸ã®ä¾¡å€¤è©•ä¾¡ã‚’è¡Œã†ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  ä¾¡å€¤è©•ä¾¡ã«ã¯ Web ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯é–¢ä¿‚ã‚’ç”¨ã„ã¦ã„ã‚‹ ç›´æ„Ÿçš„ãªç†è§£ Web ãƒšãƒ¼ã‚¸ã®ä¸­ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒšãƒ¼ã‚¸ã‚’ 1 ã¤æ±ºã‚ã‚‹ ãã®ãƒšãƒ¼ã‚¸ã«è²¼ã‚‰ã‚Œã¦ã„ã‚‹ãƒªãƒ³ã‚¯ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«ãƒšãƒ¼ã‚¸ã‚’é·ç§»ã—ã¦ã„ã ãƒšãƒ¼ã‚¸é·ç§»ã‚’ç¹°ã‚Šè¿”ã—ã¦ã€æœ€çµ‚çš„ã«ã©ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã„ã‚‹ç¢ºç‡ãŒé«˜ã„ã‹ï¼Ÿ ãã®ç¢ºç‡ãŒ PageRank\né‡è¦ãªãƒšãƒ¼ã‚¸ã¯ãŸãã•ã‚“å¼•ç”¨ã•ã‚Œã‚‹ã®ã§ï¼Œâ†‘ ã®ç¢ºç‡ãŒé«˜ããªã‚‹ï¼\nè¨ˆç®—æ–¹æ³• 1. å„ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯é–¢ä¿‚ã‹ã‚‰é·ç§»ç¢ºç‡è¡Œåˆ— P ã‚’ä½œæˆ ä¾‹ãˆã°ï¼Œå„ãƒšãƒ¼ã‚¸ã®ãƒªãƒ³ã‚¯é–¢ä¿‚ãŒ â†“ ã¿ãŸã„ãªå ´åˆï¼Œ\n$P$ ã¯ â†“ ã«ãªã‚‹\n$$ P = \\left( \\begin{array}{ccc} 0 \u0026amp; 0 \u0026amp; 1/2 \u0026amp; 1/2 \u0026amp; 0 \\ 1/2 \u0026amp; 0 \u0026amp; 0 \u0026amp; 1/2 \u0026amp; 0 \\ 1/2 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \u0026amp; 1/2 \\ 1/4 \u0026amp; 1/4 \u0026amp; 1/4 \u0026amp; 0 \u0026amp; 1/4 \\ 1/2 \u0026amp; 1/2 \u0026amp; 0 \u0026amp; 0 \u0026amp; 0 \\end{array} \\right) $$\nè¡Œæ–¹å‘ï¼šé·ç§»å…ƒã®ãƒšãƒ¼ã‚¸ åˆ—æ–¹å‘ï¼šé·ç§»å…ˆã®ãƒšãƒ¼ã‚¸ è¦ç´ ï¼šé·ç§»å…ƒãƒšãƒ¼ã‚¸ã‹ã‚‰é·ç§»å…ˆãƒšãƒ¼ã‚¸ã¸ã®é·ç§»ç¢ºç‡ ex. ãƒšãƒ¼ã‚¸ 1â†’ ãƒšãƒ¼ã‚¸ 3 ã¸ã®é·ç§»ç¢ºç‡ã¯ $p_{13} = 1/2$ 2. é·ç§»ç¢ºç‡è¡Œåˆ—ã®å›ºæœ‰å€¤ã¨å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¨ˆç®—ã™ã‚‹ 2.1. ãªãœå›ºæœ‰å€¤ã¨å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¨ˆç®—ã™ã‚‹ã®ã‹ï¼Ÿ $t$ å›é·ç§»ã—ãŸæ™‚ã«ãƒšãƒ¼ã‚¸ $i$ ã‚’é–‹ã„ã¦ã„ã‚‹ç¢ºç‡ã‚’ $x_{t_i}$ ã¨ã—ã¦ï¼Œå„ãƒšãƒ¼ã‚¸ã§ã®ç¢ºç‡ã‚’ãƒ™ã‚¯ãƒˆãƒ« $\\vec{x_t}$ ã‚’ç”¨ã„ã¦æ¬¡ã®ã‚ˆã†ã«ã¾ã¨ã‚ã‚‹ï¼\n$$ \\vec{x_t} = \\left( \\begin{array}{ccc} x_{t_1} \u0026amp; x_{t_2} \u0026amp; \\cdots \u0026amp; x_{t_i} \u0026amp; \\cdots \\end{array} \\right) $$\nã—ãŸãŒã£ã¦ï¼Œt+1 å›ç›®ã®é·ç§»ã¯æ¬¡ã®ã‚ˆã†ã«è¡¨ã›ã‚‹ï¼\n$$ \\vec{x_{t+1}} = \\vec{x_t} P $$\nã“ã®ã‚ˆã†ã«ã—ã¦ä½•å›ã‚‚é·ç§»ã‚’ç¹°ã‚Šè¿”ã—ã¦ã„ãã¨$\\vec{x_t}$ã¯ä¸€å®šã«åæŸã™ã‚‹ï¼ã¤ã¾ã‚Šï¼Œ\n$$ \\vec{x_t} = \\vec{x_t} P $$\nã¨ãªã‚‹ï¼\n2.2. å›ºæœ‰å€¤ã¨å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¨ˆç®—ã™ã‚‹ è¡Œåˆ— $P$ ã®å›ºæœ‰å€¤ $\\lambda$ ï¼Œå›ºæœ‰ãƒ™ã‚¯ãƒˆ $\\vec{x}$ ã¯æ¬¡ã®ã‚ˆã†ãªé–¢ä¿‚ã«ã‚ã‚‹ï¼\n$$ \\vec{x} P = \\lambda \\vec{x} $$\nã—ãŸãŒã£ã¦ï¼Œå›ºæœ‰å€¤ $\\lambda = 1$ ã«å¯¾å¿œã™ã‚‹å›ºæœ‰ãƒ™ã‚¯ãƒˆãƒ«ãŒ PageRank ã¨ãªã‚‹ï¼ˆâ€» PageRank ã¯ç¢ºç‡ãªã®ã§å¾Œã§æ­£è¦åŒ–ã™ã‚‹å¿…è¦ã‚ã‚Šï¼‰ï¼\nè£œè¶³ â†‘ ã§èª¬æ˜ã—ãŸè¨ˆç®—æ–¹æ³•ã¯æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªã‚‚ã®ã§ã‚ã‚Šï¼Œå®Ÿéš›ã«ã¯ã‚‚ã†å°‘ã—æ”¹è‰¯ãŒãªã•ã‚Œã¦ã„ã‚‹ï¼ä»¥ä¸‹ã«ãã®æ”¹è‰¯ã‚’ã„ãã¤ã‹æŒ™ã’ã‚‹ï¼\næ”¹è‰¯ï¼‘ã€€ãƒ©ãƒ³ãƒ€ãƒ ã‚¸ãƒ£ãƒ³ãƒ— â†“ ã®ã‚ˆã†ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚°ãƒ©ãƒ•ã ã¨ â‘¡ ã¨ â‘£ ã§é–‰ãƒ«ãƒ¼ãƒ—ãŒå½¢æˆã•ã‚Œã¦ã„ã¦ï¼Œã¾ã¨ã‚‚ã« PageRank ãŒè¨ˆç®—ã§ããªã„ï¼ãã®ãŸã‚ï¼Œä¸€å®šç¢ºç‡ã§ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ãªã„ãƒšãƒ¼ã‚¸ã¸ã‚¸ãƒ£ãƒ³ãƒ—ã™ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ï¼\næ”¹è‰¯ï¼’ã€€ã‚«ãƒ†ã‚´ãƒªã®æ¦‚å¿µ å®Ÿéš›ã®ãƒãƒƒãƒˆã‚µãƒ¼ãƒ•ã‚£ãƒ³ã§ã¯åŒã˜ã‚«ãƒ†ã‚´ãƒªã®ãƒšãƒ¼ã‚¸é–“ã®æ–¹ãŒï¼Œé•ã†ã‚«ãƒ†ã‚´ãƒªã®ãƒšãƒ¼ã‚¸é–“ã‚ˆã‚Šé·ç§»ã™ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ï¼ˆä¾‹ï¼šã‚µãƒƒã‚«ãƒ¼ã®ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã„ã‚‹äººãŒæ¬¡ã«é–‹ããƒšãƒ¼ã‚¸ã¯ï¼ŒåŒã˜ã‚¹ãƒãƒ¼ãƒ„ã‚«ãƒ†ã‚´ãƒªã§ã‚ã‚‹é‡çƒã®ãƒšãƒ¼ã‚¸ã®æ–¹ãŒï¼Œå…¨ãç•°ãªã‚‹ã‚«ãƒ†ã‚´ãƒªã§ã‚ã‚‹æ‰‹èŠ¸ã®ãƒšãƒ¼ã‚¸ã‚ˆã‚Šå¯èƒ½æ€§ãŒé«˜ã„ï¼‰ï¼\nå‚è€ƒæ–‡çŒ® PageRank ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŠã‚ˆã³ãã‚Œã«é–¢é€£ã™ã‚‹ç ”ç©¶ã«ã¤ã„ã¦ ã„ã¾ã•ã‚‰å­¦ã¶ PageRank ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  ","date":"2020-03-02T15:00:00Z","permalink":"https://yamamoto-yuta.github.io/p/pagerank-memo/","title":"PageRankãƒ¡ãƒ¢"}]